[
  {
    "question": "What is the name of the Ansys Fluent Slurm script for multinode (by core) jobs with restart functionality?",
    "answer": "The script is named `script-flu-bycore+restart.sh`."
  },
  {
    "question": "What is the primary purpose of the `script-flu-bycore+restart.sh` script?",
    "answer": "This script is designed for Ansys Fluent simulations that run across multiple cores and support automatic restarts from the most recent saved time step files, often to accommodate long runtimes exceeding typical job limits."
  },
  {
    "question": "Which Ansys module versions are supported by the `script-flu-bycore+restart.sh` script?",
    "answer": "The script specifies loading `ansys/2023R2` or newer versions, along with `StdEnv/2023`."
  },
  {
    "question": "What are the recommended SBATCH parameters for a multinode (by core) Fluent restart job?",
    "answer": "The recommended SBATCH parameters include `--account=def-group`, `--time=00-03:00`, `--ntasks=16`, `--mem-per-cpu=4G`, `--cpus-per-task=1`, and `--array=1-5%1` to specify 5 restart attempts."
  },
  {
    "question": "How should the `MYVERSION` variable be customized in the script?",
    "answer": "`MYVERSION` should be set to either `2d`, `2ddp`, `3d`, or `3ddp` based on your simulation's requirements, with `3d` as the shown default."
  },
  {
    "question": "What filenames are specified for the journal and restart files in the `script-flu-bycore+restart.sh`?",
    "answer": "The script uses `sample.jou` for the initial journal file (`MYJOUFILE`), `sample-restart.jou` for the restart journal file (`MYJOUFILERES`), `sample-restart.cas.h5` for the case restart file (`MYCASFILERES`), and `sample-restart.dat.h5` for the data restart file (`MYDATFILERES`)."
  },
  {
    "question": "How does the script handle Intel MPI environment variables specifically for the Narval cluster?",
    "answer": "For the Narval cluster, the script conditionally loads `intel/2021 intelmpi` and sets `INTELMPI_ROOT` and `HCOLL_RCACHE` if `EBVERSIONGENTOO` is 2020. If `EBVERSIONGENTOO` is 2023, it loads `intel/2023 intelmpi` and sets `INTELMPI_ROOT`."
  },
  {
    "question": "How is the total number of cores (`NCORES`) calculated in the script?",
    "answer": "`NCORES` is calculated as the product of `SLURM_NTASKS` and `SLURM_CPUS_PER_TASK`."
  },
  {
    "question": "What is the Fluent command used for an initial run on a single node?",
    "answer": "For an initial run on a single node, the command is `fluent -g $MYVERSION -t $NCORES -affinity=0 -mpi=intel -pshmem -I $MYJOUFILE`."
  },
  {
    "question": "How does the script run Fluent on multiple nodes for a restart job on the Nibi cluster?",
    "answer": "For a restart job on multiple nodes on the Nibi cluster, the command is `fluent -g $MYVERSION -t $NCORES -affinity=0 -mpi=intel -peth -cnf=/tmp/machinefile-$SLURM_JOB_ID -i $MYJOUFILERES`."
  },
  {
    "question": "What happens if a job attempt fails, but it's not the final attempt specified by the `--array` parameter?",
    "answer": "If a job attempt fails and it's not the final one, the script will output 'Resubmitting job now\u2026' and will likely trigger another attempt through the Slurm array mechanism."
  },
  {
    "question": "What symbolic links are created when a job needs to restart with the most recent output?",
    "answer": "The script creates symbolic links: `ln -sfv output/$(ls -ltr output | grep .cas | tail -n1 | awk '{print $9}') $MYCASFILERES` and `ln -sfv output/$(ls -ltr output | grep .dat | tail -n1 | awk '{print $9}') $MYDATFILERES` to point `MYCASFILERES` and `MYDATFILERES` to the latest `.cas` and `.dat` output files, respectively."
  },
  {
    "question": "What is the maximum number of restart attempts suggested in the SBATCH `--array` parameter?",
    "answer": "The `--array=1-5%1` parameter suggests a maximum of 5 restart attempts (or time steps), where 2 or more is the minimum."
  }
]