[
  {
    "question": "When configuring a JupyterLab session for single-core visualization, how do you set the memory and user interface options?",
    "answer": "You should set the 'Memory' based on the maximum amount of data to be processed at a time, and for 'User interface', select 'JupyterLab'."
  },
  {
    "question": "After the JupyterLab dashboard appears, what are the two main options for starting ParaView in a single-core interactive session?",
    "answer": "Option one is to load the 'boost/1.85.0' and 'paraview/6.0.0' modules under 'Software Modules' and then click the 'ParaView (VNC)' button. Option two is to click your preferred 'Desktop' button, open a terminal inside the virtual desktop, and type 'module load boost/1.85.0 paraview/6.0.0' followed by 'paraview'."
  },
  {
    "question": "What is the primary limitation of the ParaView GUI application regarding CPU core usage?",
    "answer": "The ParaView GUI application itself is single-threaded and cannot directly use multiple cores for true parallel rendering."
  },
  {
    "question": "How can true parallel rendering be achieved with ParaView in a JupyterLab environment?",
    "answer": "True parallel rendering requires connecting a single-core ParaView client to a parallel ParaView server, both of which can be launched within JupyterLab."
  },
  {
    "question": "What specific JupyterHub Server Options settings need to be adjusted for multi-core visualization compared to single-core?",
    "answer": "For multi-core visualization, you need to select your desired 'Number of Cores' (e.g., 4) and scale the 'Memory' request accordingly (e.g., 14400 MB for 4 cores, which is 3600 MB per core)."
  },
  {
    "question": "What commands are used to start a parallel ParaView server within a JupyterLab virtual desktop session?",
    "answer": "First, load the modules with 'module load boost/1.85.0 paraview/6.0.0', then run the parallel server with 'mpirun --oversubscribe -np <NUMBER_OF_CORES> pvserver' (e.g., 'mpirun --oversubscribe -np 4 pvserver')."
  },
  {
    "question": "How do you connect the ParaView GUI client to the parallel ParaView server running inside a JupyterLab session?",
    "answer": "In the ParaView GUI, click 'Connect', then 'Add Server'. Select 'Server Type' as 'Client/Server', set 'Host' to 'localhost', 'Port' to '11111', and 'Startup Type' to 'Manual'. Then, click 'Connect' again."
  },
  {
    "question": "How can you verify that parallel rendering is being performed in ParaView after connecting to a parallel server?",
    "answer": "You can verify parallel rendering by coloring your dataset by the 'Process Id' variable, which is unavailable when running in serial."
  },
  {
    "question": "Which Alliance HPC clusters support single-core visualization using Open OnDemand?",
    "answer": "Single-core visualization via Open OnDemand is supported on Nibi and Trillium."
  },
  {
    "question": "What are the web portals to access Open OnDemand for Nibi and Trillium?",
    "answer": "For Nibi, the portal is https://ondemand.sharcnet.ca, and for Trillium, it is https://ondemand.scinet.utoronto.ca."
  },
  {
    "question": "What are the steps to launch a compute desktop on Open OnDemand for single-core visualization?",
    "answer": "After logging in, navigate to 'Desktop' (on Nibi, 'Compute Nodes | Compute Desktop'), specify a CPU-only Slurm account and 1 CPU core, click 'Launch', wait for the job to start ('Running'), and then click 'Launch Compute Desktop'."
  },
  {
    "question": "Once inside an Open OnDemand desktop session, what commands do you use to start ParaView for single-core visualization?",
    "answer": "Open a terminal and type 'module load paraview/6.0.0' followed by 'paraview'."
  },
  {
    "question": "What are the maximum memory and core allocations available for multi-core visualization on Nibi's Open OnDemand?",
    "answer": "On Nibi's Open OnDemand, you can request up to 128GB memory and up to 8 cores for multi-core visualization."
  },
  {
    "question": "How do you start a parallel ParaView server within an Open OnDemand desktop session for multi-core visualization?",
    "answer": "Open a terminal, load the ParaView module with 'module load paraview/6.0.0', and then execute 'mpirun --oversubscribe -np <NUMBER_OF_CORES> pvserver' (e.g., 'mpirun --oversubscribe -np 4 pvserver')."
  },
  {
    "question": "Which HPC clusters are supported for the large-scale interactive client-server ParaView setup?",
    "answer": "The large-scale interactive client-server setup is supported on Rorqual, Nibi, Fir, Trillium, and Narval."
  },
  {
    "question": "What is a crucial requirement regarding ParaView versions for a successful client-server connection?",
    "answer": "ParaView requires the same major version on the local client and the remote host to prevent incompatibility, for example, client version 6.0.x for server version 6.0.0."
  },
  {
    "question": "How does the 'Remote Render Threshold' setting in ParaView preferences influence rendering behavior?",
    "answer": "Setting the 'Remote Render Threshold' to its default (20MB) or similar means small rendering tasks are done on your local GPU, while setting it to 0MB ensures all rendering, including rotations, is done remotely on the cluster resources."
  },
  {
    "question": "What types of rendering technologies are available on cluster CPUs for large datasets, and how do they compare to GPU rendering?",
    "answer": "Both rasterization and ray tracing can be done on cluster CPUs. Modern CPU-based libraries like OSPRay and OpenSWR offer performance quite similar to GPU-based rendering."
  },
  {
    "question": "How can you estimate the number of necessary cores for rendering a dataset in a client-server setup?",
    "answer": "You can estimate by dividing the amount of memory needed for rendering by approximately 3.5 GB per core. For instance, a 40GB dataset would require at least 12 cores just for holding the data."
  },
  {
    "question": "What is the recommended memory allocation per core for CPU-intensive software rendering?",
    "answer": "It is not recommended to allocate more than 4GB/core for CPU-intensive software rendering."
  },
  {
    "question": "What is the minimum job scheduling requirement on Trillium for client-server visualization?",
    "answer": "On Trillium, you must schedule on whole nodes, meaning in multiples of 192 cores; therefore, the minimum example will require 192 cores."
  },
  {
    "question": "What Slurm command is used to start a parallel CPU interactive job for client-server visualization, and what is the specific command for Trillium?",
    "answer": "The general command is 'salloc --time=1:00:0 --ntasks=<NUMBER_OF_TASKS> --mem-per-cpu=3600 --account=def-someprof'. For Trillium, assuming one node, it's 'salloc --time=1:00:0 --ntasks=192 --account=def-someprof'."
  },
  {
    "question": "What modules must be loaded and what command is used to start the ParaView server on the cluster, including any Trillium-specific steps?",
    "answer": "First, load the ParaView module with 'module load paraview/6.0.0'. On Trillium, you must first load 'StdEnv/2023' before 'paraview/6.0.0'. Then, start the server with 'srun pvserver --force-offscreen-rendering --opengl-window-backend OSMesa'."
  },
  {
    "question": "How do you establish an SSH tunnel from your local computer to a compute node on the cluster for ParaView client-server connection?",
    "answer": "On your local Mac/Linux computer, use the command 'ssh <username>@<cluster_name>.alliancecan.ca -L 11111:<compute_node_name>:11111', replacing placeholders with your details (e.g., 'ssh <username>@fir.alliancecan.ca -L 11111:fc30669:11111')."
  },
  {
    "question": "What is the specific SSH command for setting up an SSH tunnel to Nibi for large-scale interactive visualization, and what is the purpose of the '-T' flag?",
    "answer": "The command is 'ssh -T -J <username>@nibi.alliancecan.ca -L 11111:localhost:11111 <username>@<nibi_compute_node>'. The '-T' flag disables pseudo-terminal allocation, which is important for the initial client-server handshake, though it also disables the interactive shell prompt."
  },
  {
    "question": "How do you configure the ParaView client on your local computer to connect to a remote server after establishing an SSH tunnel?",
    "answer": "In ParaView on your computer, go to 'File -> Connect' or click the green 'Connect' button. Then, click 'Add Server', set a 'name' (e.g., fir), 'Server Type' to 'Client/Server', 'Host' to 'localhost', 'Port' to '11111', select 'Configure', choose 'Manual', and click 'Save'. Finally, select the server from the list and click 'Connect'."
  }
]