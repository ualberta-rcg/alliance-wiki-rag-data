[
  {
    "question": "What security mechanism does SSH rely on?",
    "answer": "SSH relies on public key cryptography (PK) for its security."
  },
  {
    "question": "What does a key pair consist of in public key cryptography?",
    "answer": "A key pair consists of a private part, to be kept secret, and a public part, which can be distributed freely."
  },
  {
    "question": "Why is public key cryptography sometimes described as asymmetric encryption?",
    "answer": "Public key cryptography is described as asymmetric encryption because anyone can use the public key to encode a message, but only the private part can decode it."
  },
  {
    "question": "How can public key cryptography be used to verify identities?",
    "answer": "If someone claims to be a specific person, a second party can send them a message encoded with that person's public key; if they can decode it, they have access to the private key, thus establishing identity."
  },
  {
    "question": "What other internet protocols are based on public key systems?",
    "answer": "PK systems are the basis for the SSL and TLS protocols that protect most internet traffic, such as HTTPS websites."
  },
  {
    "question": "In what ways is Public Key (PK) used in SSH on the systems described?",
    "answer": "PK is used when connecting to ensure the authentic server, to establish an encrypted session for secure traffic, and for the remote server to verify your identity to allow login."
  },
  {
    "question": "Is it recommended to use Public Key (PK) or a password to connect to the systems?",
    "answer": "We strongly recommend using PK to connect to our systems, as it is almost always more secure than using a password."
  },
  {
    "question": "What initial configuration is required to use Public Key (PK) for SSH?",
    "answer": "To use PK, you must generate a key pair and install the public key on the systems you intend to connect with."
  },
  {
    "question": "Where should an SSH key pair be generated?",
    "answer": "You should generate a key pair on your own system or on a system you believe is secure."
  },
  {
    "question": "What should never be done with the private part of an SSH key pair?",
    "answer": "The private part of the key pair should never be shared or copied on another computer."
  },
  {
    "question": "What is a passphrase used for when generating an SSH key pair?",
    "answer": "A passphrase is a string that is used to encrypt the private key, offering protection if the private key file is stolen."
  },
  {
    "question": "What is the recommended length for a strong passphrase?",
    "answer": "We recommend a strong passphrase of 15 characters or more."
  },
  {
    "question": "Where can users find specific instructions for generating SSH keys on Windows?",
    "answer": "For the Windows PuTTY or MobaXterm clients, see 'Generating SSH keys in Windows'."
  },
  {
    "question": "Where can users find specific instructions for generating SSH keys in a Unix-like environment?",
    "answer": "For a Unix-like environment (Linux, Mac, Windows Subsystem for Linux or Cygwin), see 'Using SSH keys in Linux'."
  },
  {
    "question": "What is the first step to install an SSH key using the CCDB method?",
    "answer": "The first step is to go to CCDB at https://ccdb.alliancecan.ca/ssh_authorized_keys or via the CCDB menu."
  },
  {
    "question": "How do you retrieve your SSH public key on Linux/MacOS?",
    "answer": "Under Linux/MacOS, you can retrieve your SSH public key by entering `cat .ssh/id_rsa.pub` on the command line."
  },
  {
    "question": "How can a public key generated with PuTTY or MobaXterm be prepared for CCDB?",
    "answer": "You can open PuTTY Key Generator or MobaXterm SSH Key Generator, go to 'File --> Load private key' and grab the content under 'Public key for pasting into OpenSSH authorized_keys'."
  },
  {
    "question": "What formats of public keys might need conversion before being uploaded to CCDB?",
    "answer": "Public keys in PEM format, RFC4716, or PKCS8 formats would need to be converted before going to STEP 3 of the CCDB upload process."
  },
  {
    "question": "What information should be provided when uploading your SSH public key into the CCDB form?",
    "answer": "You should paste the public portion of your key into the CCDB form and provide a description for it."
  },
  {
    "question": "After uploading a public key to CCDB, which systems can it be used to log in to?",
    "answer": "Once your public key is loaded into CCDB this way, you can use it to log in to any of our clusters, but not our OpenStack cloud systems."
  },
  {
    "question": "How long do public key changes typically take to propagate to clusters after being loaded into CCDB?",
    "answer": "Changes to public keys will often propagate to clusters in a few minutes; in some cases however, it can take up to approximately 30 minutes."
  },
  {
    "question": "When might a user prefer to install an SSH key using the `authorized_keys` file instead of CCDB?",
    "answer": "A user might prefer this method when they want to install a key only on a specific system rather than on all HPC systems."
  },
  {
    "question": "How do you install an SSH public key on a specific system, such as 'Fir', using the `authorized_keys` method?",
    "answer": "To install a key that only works on Fir, copy your public key into the file `~/.ssh/authorized_keys` on Fir."
  },
  {
    "question": "What command is recommended for conveniently copying an SSH public key to a remote system's `authorized_keys` file?",
    "answer": "The `ssh-copy-id` command is the most convenient way to do this, for example, `ssh-copy-id -i alliance-key username@fir.alliancecan.ca`."
  },
  {
    "question": "What makes the `authorized_keys` mechanism 'fragile'?",
    "answer": "The `authorized_keys` mechanism is fragile because SSH is quite picky about the permissions on the `authorized_keys` file, as well as your /home directory and the `.ssh` subdirectory."
  },
  {
    "question": "What is the purpose of an SSH key agent?",
    "answer": "An SSH key agent allows you to type your passphrase only once when starting the agent, and then the agent supplies the private key for new connections, avoiding repeated entries."
  },
  {
    "question": "How does using a key agent improve security compared to leaving the private key unencrypted?",
    "answer": "Using a key agent avoids storing the unencrypted private key on permanent storage, where it is more vulnerable to being stolen or copied."
  },
  {
    "question": "On which type of computer should key generation operations be performed?",
    "answer": "Key generation operations should be performed on your own computer, not on a shared computer, such as a cluster."
  },
  {
    "question": "How can you specify a comment for an SSH key during generation using `ssh-keygen`?",
    "answer": "You can specify a comment for the key using the `-C` option, for example, `ssh-keygen -C 'Alliance systems'`."
  },
  {
    "question": "How do you choose a specific name for the private and public key files when generating them with `ssh-keygen`?",
    "answer": "You can choose the name of the key file using the `-f` option, for example, `ssh-keygen -f alliance-key`, which produces `alliance-key` and `alliance-key.pub`."
  },
  {
    "question": "If you choose a custom name for your SSH key file, what option must you use when logging in?",
    "answer": "If you choose a custom name for your SSH key file, you may have to use the `-i` option to specify the name of the key when logging in, like `ssh -i alliance-key user@host`."
  },
  {
    "question": "How can you generate an SSH key with a different key type, such as ed25519?",
    "answer": "You can generate an SSH key with a different key type by using the `-t` option, for example, `ssh-keygen -t ed25519`."
  },
  {
    "question": "How can you strengthen an RSA SSH key type by setting a longer key length?",
    "answer": "You can strengthen certain key types, such as RSA, by setting a longer key length, for example, `ssh-keygen -t rsa-sha2-512 -b 4096`."
  },
  {
    "question": "What is the default behavior of a public key installed without constraints?",
    "answer": "By default, a public key installed without constraints can do anything."
  },
  {
    "question": "How can an SSH public key be constrained to only run a specific command?",
    "answer": "An SSH public key can be constrained to only perform a specific command by adding `restrict,command=\"<your command here>\"` before the key in the authorized_keys file."
  },
  {
    "question": "What key constraint allows an SSH key to be used only for SFTP?",
    "answer": "The constraint `restrict,command=\"/usr/libexec/openssh/sftp-server\"` allows the key to be used only for SFTP."
  },
  {
    "question": "How can an SSH key be constrained to limit which hosts can connect using it?",
    "answer": "An SSH key can be constrained to limit which hosts can connect using it by adding `restrict,from=\"<hostname_or_ip>\"` before the key."
  },
  {
    "question": "What is the effect of the `restrict` keyword on an interactive session if `pty` is not explicitly allowed?",
    "answer": "The `restrict` keyword turns off `pty allocation`, which makes an interactive session behave peculiarly."
  },
  {
    "question": "How can pty allocation be allowed for a source-constrained interactive session?",
    "answer": "To allow pty allocation for a source-constrained interactive session, you can add `,pty` to the `restrict,from` constraint, such as `restrict,from=\"d24-141-114-17.home.cgocable.net\",pty`."
  },
  {
    "question": "Where can users find more documentation on SSH key constraints?",
    "answer": "More documentation on SSH key constraints can be found in the `sshd man` page by typing `man sshd` on a Linux system."
  },
  {
    "question": "Should SSH keys be shared among multiple users?",
    "answer": "No, keys should be unique to a given user account and should not be used by multiple people."
  },
  {
    "question": "What is a best practice for storing a private key if you have to use a shared computer?",
    "answer": "If you have to use a shared computer, store your private key where only you are allowed access, or use an external storage such as a USB key if secure storage is not available."
  },
  {
    "question": "What is a key best practice regarding encrypting your private key?",
    "answer": "Always encrypt your private key with a passphrase, preferably 15 characters or more."
  },
  {
    "question": "Is it advisable to share or copy your private SSH key to a remote system?",
    "answer": "No, you should not share your private key or copy it to a remote system; your private key should not leave your workstation."
  },
  {
    "question": "What is a recommendation for users with multiple laptops regarding SSH keys?",
    "answer": "If you have several laptops, you can create dedicated SSH key pairs for each of them."
  },
  {
    "question": "What tool is recommended to make using encrypted SSH keys more convenient?",
    "answer": "It is recommended to use `ssh-agent` to make encrypted keys convenient."
  },
  {
    "question": "What additional tool should be used if agent forwarding is enabled?",
    "answer": "If agent forwarding is used, `ssh-askpass` should also be used."
  },
  {
    "question": "What security measure can be applied to public keys to limit their capabilities?",
    "answer": "It is a best practice to apply constraints to your public key to limit its scope."
  },
  {
    "question": "Under what circumstances might an SSH key be revoked?",
    "answer": "An SSH key may be revoked due to identified SSH key sharing or if it is believed that the private component of the SSH key may have become compromised, such as through improper key management, theft, or a security breach."
  },
  {
    "question": "What is the purpose of the Key Revocation List (KRL) maintained by the Digital Research Alliance of Canada?",
    "answer": "The Key Revocation List (KRL) is a registry of SSH keys that are no longer trusted or are otherwise considered invalid, ensuring no key on the list can be used to access Alliance services."
  },
  {
    "question": "What immediate actions should be taken if your SSH key is revoked?",
    "answer": "If your SSH key has been revoked, you must immediately replace it with a new one and remove the revoked key from all services (Alliance or other)."
  },
  {
    "question": "Whom should you contact if you believe your SSH key was mistakenly added to the Key Revocation List or have related concerns?",
    "answer": "If you believe your SSH key has been listed on the Key Revocation List in error, or if you have concerns or questions, contact our Technical support for assistance."
  }
]