[
  {
    "question": "What are the two primary ways to use MATLAB on the clusters?",
    "answer": "Users can either run MATLAB directly, which requires a license, or compile their MATLAB code using the MATLAB Compiler (mcc) and run the generated executable without license considerations."
  },
  {
    "question": "Which clusters have a MATLAB license available for students, professors, or academic researchers?",
    "answer": "MATLAB licenses are available on Fir, Narval, and Rorqual for any student, professor, or academic researcher."
  },
  {
    "question": "How can I check if I have access to an external MATLAB license on a cluster?",
    "answer": "You can test access by running `module load matlab/2023b.2` followed by `matlab -nojvm -nodisplay -batch license`. If a license number is printed, you have access."
  },
  {
    "question": "What should I do if the MATLAB license test shows the message 'This version is newer than the version of the license.dat file...'?",
    "answer": "If you receive this message, you should try loading an older version of MATLAB in the `module load` line."
  },
  {
    "question": "What steps are required to configure an external MATLAB license if your institution allows its use?",
    "answer": "You need to create a `matlab.lic` file in the `$HOME/.licenses/` directory with content like `SERVER <ip address> ANY <port>` and `USE_SERVER`, replacing the placeholders with your campus license server details. Then, technical support needs to ensure the license server is reachable by compute nodes."
  },
  {
    "question": "Why is it necessary to prepare the `.matlab` folder?",
    "answer": "The `/home` directory is accessible in read-only mode on some compute nodes, so a `.matlab` symbolic link needs to be created to ensure MATLAB profile and job data are written to the `/scratch` space instead."
  },
  {
    "question": "How do I create a symbolic link for the `.matlab` folder to point to `/scratch`?",
    "answer": "Navigate to your home directory (`cd $HOME`) and run: `if [ -d \".matlab\" ]; then mv .matlab scratch/; else mkdir -p scratch/.matlab; fi && ln -sn scratch/.matlab .matlab`."
  },
  {
    "question": "How can I view a list of available MATLAB toolboxes?",
    "answer": "Load the MATLAB module (`module load matlab`) and then run `matlab -nojvm -batch \"ver\"`."
  },
  {
    "question": "When must a MATLAB calculation be submitted to the scheduler?",
    "answer": "Any significant MATLAB calculation, defined as taking more than about 5 minutes or consuming over a gigabyte of memory, must be submitted to the scheduler."
  },
  {
    "question": "How do you submit a Slurm job script for a serial MATLAB program?",
    "answer": "After creating your Slurm script (e.g., `matlab_slurm.sl`), you submit it using the command `sbatch matlab_slurm.sl`."
  },
  {
    "question": "What is the purpose of the `-nojvm` option in MATLAB commands?",
    "answer": "The `-nojvm` option can suppress the creation of `java.log` files, but doing so may interfere with certain plotting functions."
  },
  {
    "question": "What parallel execution environment is generally sufficient for most MATLAB users on the clusters?",
    "answer": "Most MATLAB users on the clusters will likely find it sufficient to run MATLAB using a `Threads` parallel environment on a single node."
  },
  {
    "question": "What problem can arise when two or more parallel MATLAB jobs use a `Cluster` environment simultaneously?",
    "answer": "When two or more parallel MATLAB jobs call `parpool` at the same time, they may try to read and write to the same `.dat` file in the `$HOME/.matlab/local_cluster_jobs/R*` folder, which can corrupt the local parallel profile."
  },
  {
    "question": "How can corruption of the `local_cluster_jobs` folder be prevented for simultaneous parallel MATLAB jobs?",
    "answer": "It is recommended to ensure each job creates its own parallel profile in a unique location by setting the `JobStorageLocation` property of the `parallel.Cluster` object, for example, to `getenv('SLURM_TMPDIR')`."
  },
  {
    "question": "Which versions of the MATLAB Compiler (`mcc`) are provided on the clusters?",
    "answer": "The MATLAB Compiler (`mcc`) is provided for versions 2014a, 2018a, and later."
  },
  {
    "question": "How do you compile a MATLAB file using the `mcc` command?",
    "answer": "To compile a MATLAB file like `cosplot.m`, you would use the command `mcc -m -R -nodisplay cosplot.m`."
  },
  {
    "question": "Which wrapper script should be used to run a compiled MATLAB binary on the servers?",
    "answer": "Instead of the `run_cosplot.sh` script generated by `mcc`, users should use `run_mcr_binary.sh` as it sets the correct paths for execution on the servers."
  },
  {
    "question": "What command needs to be run once for each compiled MATLAB binary?",
    "answer": "The command `setrpaths.sh --path <binary_name>` needs to be run once for each compiled binary."
  },
  {
    "question": "Is it currently possible to submit MATLAB parallel jobs from a local computer using the MATLAB Parallel Server?",
    "answer": "No, job submission from a local computer is no longer possible since May 2023 due to mandatory security improvements on clusters and MATLAB's use of an SSH mode that is no longer permitted."
  }
]