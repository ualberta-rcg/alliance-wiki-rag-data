[
  {
    "question": "What are the primary connection options for a VNC server?",
    "answer": "You can connect to a persistent VNC server on dedicated VDI nodes, a temporary VNC server on a cluster compute node, or run lightweight sessions on cluster login nodes."
  },
  {
    "question": "What are VDI nodes, and what are their primary use cases?",
    "answer": "VDI (Virtual Desktop Infrastructure) nodes are dedicated remote desktop environments, like those on Graham (gra-vdi), that provide accelerated OpenGL and are intended for demanding and complex interactive graphical tasks."
  },
  {
    "question": "What file systems do Graham's VDI nodes share?",
    "answer": "The VDI nodes on Graham share the `/home`, `/project`, and `/scratch` filesystems."
  },
  {
    "question": "How can data from Graham jobs be accessed on VDI nodes?",
    "answer": "Any data files or directories created on Graham by running jobs in the queue are immediately accessible on gra-vdi for visualization and post-processing purposes, without requiring data transfer."
  },
  {
    "question": "How do you connect to gra-vdi using a VNC viewer?",
    "answer": "To connect to gra-vdi, start the VNC viewer (tigervnc) on your laptop and enter `VNC server: gra-vdi.alliancecan.ca`."
  },
  {
    "question": "What happens after connecting to `gra-vdi.alliancecan.ca`?",
    "answer": "You will see a login screen to enter your Alliance credentials, after which a desktop session will be started on either gra-vdi3 or gra-vdi4 using a round robin algorithm."
  },
  {
    "question": "Can I connect directly to a specific VDI machine instead of `gra-vdi.alliancecan.ca`?",
    "answer": "Yes, you can connect directly to specific VDI machines by specifying `VNC server: gra-vdi3.sharcnet.ca` or `VNC server: gra-vdi4.sharcnet.ca`."
  },
  {
    "question": "Why would someone choose to connect directly to `gra-vdi3.sharcnet.ca` or `gra-vdi4.sharcnet.ca`?",
    "answer": "Direct connection may be useful if one machine is overloaded and unresponsive, or if you consistently want to use the local `$SCRATCH` directory on a particular server."
  },
  {
    "question": "What is the definition of the `$SCRATCH` directory on gra-vdi nodes versus other clusters?",
    "answer": "On gra-vdi, `$SCRATCH` is defined as `/local/tmp/$USER`, whereas on clusters it is `/scratch/$USER` and is shared by all nodes."
  },
  {
    "question": "What is the data retention policy for `$SCRATCH` directories on gra-vdi?",
    "answer": "Data left on `$SCRATCH` on gra-vdi will eventually be deleted due to limited disk space, and users are advised not to store files there for more than 60 days."
  },
  {
    "question": "When should VDI nodes not be used, and what is the alternative?",
    "answer": "VDI nodes are intended for visualization tasks. For long-running computations within GUI applications, users should log out of gra-vdi and connect to a cluster compute node instead to preserve VDI resources."
  },
  {
    "question": "What kind of applications are suitable for running on cluster login nodes via VNC?",
    "answer": "Only lightweight applications that do not require significant memory, cputime, or a GPU, as login node resource limits will apply."
  },
  {
    "question": "How do you check for and terminate old VNC server sessions on a login node?",
    "answer": "First, SSH into `graham.alliancecan.ca`, then run `vncserver -list` to check for old sessions, and `pkill Xvnc -u $USER` to kill them."
  },
  {
    "question": "What option should be used when starting a new VNC server on a login node to ensure it automatically terminates?",
    "answer": "The `-idletimeout seconds` option should be added to the `vncserver` command."
  },
  {
    "question": "What is the purpose of the `-alwaysshared` option when starting a VNC server?",
    "answer": "When a VNC server is started with the `-alwaysshared` option, it allows multiple VNC viewer connections to the same desktop session."
  },
  {
    "question": "How can you find the TCP port that a new VNC server is listening on after it starts?",
    "answer": "You can determine the port by examining the VNC server's log file, for example, by running `grep -iE \"\\sport|kill\" /home/username/.vnc/gra-login2:2.log`."
  },
  {
    "question": "How do you set up an SSH tunnel from your laptop to a VNC server on a login node?",
    "answer": "On your desktop, open a terminal and run an SSH command in the format `ssh graham.computecanada.ca -L local_port:remote_node:remote_port`, for example, `ssh graham.computecanada.ca -L 5901:gra-login2:5903`."
  },
  {
    "question": "How do you connect to the VNC server using vncviewer after establishing an SSH tunnel?",
    "answer": "On your desktop, run `vncviewer localhost:local_port` (e.g., `vncviewer localhost:5901`). Mac or Windows users should enter `localhost:local_port` in the TigerVNC Viewer application."
  },
  {
    "question": "What are the memory and CPU time limits on Graham's cluster login nodes?",
    "answer": "On Graham, cluster login nodes have strict limits of 8GB of memory and 1 CPU-hour per process."
  },
  {
    "question": "What should be done if an application requires more resources than what a login node provides for a VNC session?",
    "answer": "If more resources are needed, the VNC server should be run on a cluster compute node or a VDI node instead."
  }
]