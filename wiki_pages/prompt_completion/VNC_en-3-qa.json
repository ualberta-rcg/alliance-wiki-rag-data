[
  {
    "question": "How do you identify the port your VNC server is listening on after starting it on a login node?",
    "answer": "You can use the `grep` command on the log file, for example: `grep -iE \"\\sport|kill\" /home/yourusername/.vnc/l4.nibi.sharcnet:1.log`. The output will show the TCP port, e.g., \"Listening for VNC connections on TCP port 5901\"."
  },
  {
    "question": "How do you set up an SSH tunnel from your desktop to a VNC server running on a cluster login node, such as nibi?",
    "answer": "From your laptop, execute a command similar to `ssh nibi.computecanada.ca -L 5905:l4:5901`, replacing `5905` with an arbitrary local port and `5901` with the VNC server's listening port."
  },
  {
    "question": "What command is used on your desktop to connect to a VNC server via a forwarded port?",
    "answer": "You use `vncviewer localhost:PORT`, where `PORT` is the local forwarded port (e.g., `vncviewer localhost:5905`)."
  },
  {
    "question": "How can Mac or Windows users connect to a VNC server via a forwarded port?",
    "answer": "They can click the `TigerVNC Viewer` application icon on their desktop and enter `localhost:PORT` (e.g., `localhost:5905`) in the \"Connection Details\" dialogue box."
  },
  {
    "question": "What are the typical memory and CPU time limits on Graham cluster login nodes?",
    "answer": "On Graham, strict memory and cputime limits apply on cluster login nodes, which are 8GB and 1 cpu-hour per process, respectively."
  },
  {
    "question": "What should you do if your VNC server application requires more resources than what cluster login nodes provide?",
    "answer": "If you require more resources, you should run your VNC server on a cluster compute node or a VDI node."
  },
  {
    "question": "When VDI login nodes are unavailable, what is the primary method to connect to a VNC server on a cluster compute node?",
    "answer": "You can start a VNC server on a compute node and connect to it from your desktop using suitable port forwarding."
  },
  {
    "question": "What are the limitations of running a VNC server on a compute node regarding graphical features?",
    "answer": "Running a VNC server on a compute node provides dedicated access to the server but does not offer a full graphical desktop or hardware-accelerated OpenGL."
  },
  {
    "question": "What is the initial prerequisite before starting a VNC server on a compute node?",
    "answer": "You must first log into a cluster (e.g., nibi) and create a compute node allocation using the `salloc` command, which typically has a 24-hour time limit."
  },
  {
    "question": "Provide an example command to request an interactive job with specific resources for a compute node allocation.",
    "answer": "An example command to request an interactive job with 4 CPUs and 16GB of memory for 1 hour is `salloc --time=1:00:00 --cpus-per-task=4 --mem=16000 --account=def-piusername`."
  },
  {
    "question": "What environment variable should be set on a compute node after an interactive job starts to prevent repetitive desktop errors?",
    "answer": "You should set the `XDG_RUNTIME_DIR` environment variable by running `export XDG_RUNTIME_DIR=${SLURM_TMPDIR}`."
  },
  {
    "question": "How do you start the VNC server itself on a compute node?",
    "answer": "After acquiring a compute node allocation and setting the required environment variable, you start the VNC server by executing the `vncserver` command."
  },
  {
    "question": "What critical step is required the first time you start a VNC server, and why?",
    "answer": "The first time you start a VNC server, you will be prompted to set a password. It is crucial `DO NOT LEAVE THIS BLANK` because leaving it empty would allow anyone to connect and access your files."
  },
  {
    "question": "How can you later change the password for your VNC server?",
    "answer": "You can change the VNC server password using the `vncpasswd` command."
  },
  {
    "question": "How do you determine the TCP port your VNC server is listening on after starting it on a compute node?",
    "answer": "You run the `grep` command on the log file, such as `grep -iE \"\\sport|kill\" /home/yourusername/.vnc/c48.nibi.sharcnet:1.log`, which will display the listening port (e.g., 5901)."
  },
  {
    "question": "What is the general format for establishing an SSH tunnel to a VNC server on a compute node for clusters other than nibi?",
    "answer": "For clusters other than nibi, the tunnel command format is `ssh username@clustername -L localforwardedport:computnode:remotelisteningport`. An example is `ssh username@rorqual.alliancecan.ca -L 5905:rc12509:5901`."
  },
  {
    "question": "What is the specific command format for creating an SSH tunnel to a VNC server on a nibi compute node?",
    "answer": "For nibi, the command format is `ssh -J username@clustername -L localforwardedport:localhost:remotelisteningport computenode`. An example is `ssh -J username@nibi.alliancecan.ca -L 5905:localhost:5901 c48`."
  },
  {
    "question": "What additional setup is required on your laptop for the specific SSH tunnel command used with nibi compute nodes?",
    "answer": "An SSH key pair must be created on your laptop, and the public key's contents need to be entered into your `~/.ssh/authorized_keys` file on `nibi`."
  },
  {
    "question": "What happens if you exit the node to which your SSH tunnel is connected?",
    "answer": "If you exit the node connected to your tunnel, you will lose the ability to connect to the VNC server with `vncviewer`. However, your vncserver will continue running, and you can regain access by simply starting a new tunnel."
  }
]