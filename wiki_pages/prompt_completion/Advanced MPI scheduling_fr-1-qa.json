[
  {
    "question": "Comment soumettre la plupart des t\u00e2ches MPI parall\u00e8les \u00e0 m\u00e9moire distribu\u00e9e?",
    "answer": "Vous devriez les soumettre en utilisant `-ntasks` ou `-n` pour sp\u00e9cifier le nombre de processus, permettant \u00e0 l'ordonnanceur de faire la meilleure allocation."
  },
  {
    "question": "O\u00f9 puis-je trouver plus de contr\u00f4le sur l'allocation des processus Slurm?",
    "answer": "Pour plus de contr\u00f4le sur l'allocation, consultez la page SchedMD 'Support for Multi-core/Multi-thread Architectures' et la section 'What exactly is considered a CPU?' de la FAQ Slurm."
  },
  {
    "question": "Quelles options de commande `sbatch` sont d\u00e9crites par SchedMD pour l'ordonnancement des processus?",
    "answer": "La page 'Support for Multi-core/Multi-thread Architectures' de SchedMD d\u00e9crit comment plusieurs options de la commande `sbatch` agissent sur l'ordonnancement des processus."
  },
  {
    "question": "Que faut-il sp\u00e9cifier pour une t\u00e2che Slurm, en plus de sa dur\u00e9e?",
    "answer": "En plus de la dur\u00e9e, il faut indiquer le nombre de processus MPI que Slurm doit d\u00e9marrer."
  },
  {
    "question": "Quel est le moyen le plus simple de sp\u00e9cifier le nombre de processus MPI \u00e0 d\u00e9marrer?",
    "answer": "Le moyen le plus simple est d'utiliser `--ntasks`."
  },
  {
    "question": "Pourquoi est-il recommand\u00e9 de sp\u00e9cifier la quantit\u00e9 de m\u00e9moire pour une t\u00e2che Slurm?",
    "answer": "L'allocation par d\u00e9faut de 256Mo de m\u00e9moire est souvent insuffisante, il est donc recommand\u00e9 de sp\u00e9cifier la quantit\u00e9 de m\u00e9moire n\u00e9cessaire."
  },
  {
    "question": "Comment sp\u00e9cifier la m\u00e9moire par processus quand le nombre de c\u0153urs par n\u0153ud est inconnu avec `--ntasks`?",
    "answer": "Lorsque `--ntasks` est utilis\u00e9 et qu'il est impossible de savoir combien de c\u0153urs seront sur chaque n\u0153ud, vous devriez utiliser `--mem-per-cpu`."
  },
  {
    "question": "Donnez un exemple de script Slurm pour une t\u00e2che avec peu de c\u0153urs et des n\u0153uds ind\u00e9termin\u00e9s.",
    "answer": "Un exemple est: `#!/bin/bash #SBATCH --ntasks=15 #SBATCH --mem-per-cpu=3G srun application.exe`."
  },
  {
    "question": "Que signifie le script exemple avec `--ntasks=15` et `--mem-per-cpu=3G`?",
    "answer": "Ce script sp\u00e9cifie 15 processus MPI, o\u00f9 chaque processus peut utiliser 3GB de m\u00e9moire, et l'allocation des c\u0153urs peut se faire sur 1 n\u0153ud, 15 n\u0153uds, ou tout nombre de n\u0153uds entre 1 et 15."
  },
  {
    "question": "Quand faut-il demander des n\u0153uds entiers pour une t\u00e2che parall\u00e8le?",
    "answer": "Vous devriez probablement demander des n\u0153uds entiers pour une t\u00e2che parall\u00e8le intensive qui peut utiliser efficacement 32 c\u0153urs ou plus."
  },
  {
    "question": "Combien de c\u0153urs et de m\u00e9moire utile un n\u0153ud de la grappe B\u00e9luga poss\u00e8de-t-il g\u00e9n\u00e9ralement?",
    "answer": "Un n\u0153ud de B\u00e9luga poss\u00e8de g\u00e9n\u00e9ralement 40 c\u0153urs et 186 GiB de m\u00e9moire utilisable (environ 4.6 GiB/c\u0153ur)."
  },
  {
    "question": "Combien de c\u0153urs et de m\u00e9moire utile un n\u0153ud de la grappe Graham poss\u00e8de-t-il g\u00e9n\u00e9ralement?",
    "answer": "Un n\u0153ud de Graham poss\u00e8de g\u00e9n\u00e9ralement 32 c\u0153urs et 125 GiB de m\u00e9moire utilisable (environ 3.9 GiB/c\u0153ur)."
  },
  {
    "question": "Combien de c\u0153urs et de m\u00e9moire utile un n\u0153ud de la grappe Cedar (Skylake) poss\u00e8de-t-il g\u00e9n\u00e9ralement?",
    "answer": "Un n\u0153ud de Cedar (Skylake) poss\u00e8de g\u00e9n\u00e9ralement 48 c\u0153urs et 187 GiB de m\u00e9moire utilisable (environ 3.9 GiB/c\u0153ur)."
  },
  {
    "question": "Combien de c\u0153urs et de m\u00e9moire utile un n\u0153ud de la grappe Narval poss\u00e8de-t-il g\u00e9n\u00e9ralement?",
    "answer": "Un n\u0153ud de Narval poss\u00e8de g\u00e9n\u00e9ralement 64 c\u0153urs et 249 GiB de m\u00e9moire utilisable (environ 3.9 GiB/c\u0153ur), avec des processeurs AMD EPYC Rome."
  },
  {
    "question": "Combien de c\u0153urs et de m\u00e9moire utile un n\u0153ud de la grappe Niagara poss\u00e8de-t-il g\u00e9n\u00e9ralement?",
    "answer": "Un n\u0153ud de Niagara poss\u00e8de g\u00e9n\u00e9ralement 40 c\u0153urs et 188 GiB de m\u00e9moire utilisable."
  },
  {
    "question": "Quelle grappe n'accepte que les t\u00e2ches sur n\u0153uds entiers?",
    "answer": "La grappe Niagara n'accepte que les t\u00e2ches sur n\u0153uds entiers."
  },
  {
    "question": "Que signifie la note 'Certains sont r\u00e9serv\u00e9s pour les t\u00e2ches sur n\u0153uds entiers' pour les grappes B\u00e9luga, Graham et Cedar?",
    "answer": "Cela signifie que les t\u00e2ches par c\u0153ur sont interdites sur certains de ces n\u0153uds."
  },
  {
    "question": "Donnez un exemple de script Slurm pour demander deux n\u0153uds entiers sur la grappe B\u00e9luga.",
    "answer": "Un exemple est: `#!/bin/bash #SBATCH --nodes=2 #SBATCH --ntasks-per-node=40 #SBATCH --mem=0 srun application.exe`."
  },
  {
    "question": "Donnez un exemple de script Slurm pour demander deux n\u0153uds entiers sur la grappe Niagara.",
    "answer": "Un exemple est: `#!/bin/bash #SBATCH --nodes=2 #SBATCH --ntasks-per-node=40 # ou 80 (activation du Hyper-Threading) #SBATCH --mem=0 srun application.exe`."
  },
  {
    "question": "Que fait l'option `--mem=0` dans un script Slurm?",
    "answer": "`--mem=0` indique \u00e0 Slurm de r\u00e9server toute la m\u00e9moire disponible de chacun des n\u0153uds assign\u00e9s \u00e0 la t\u00e2che."
  },
  {
    "question": "Quand ne devrait-on pas utiliser `--mem=0`?",
    "answer": "Vous ne devriez pas utiliser `--mem=0` si vous avez besoin de plus de m\u00e9moire par n\u0153ud que ce que le plus petit n\u0153ud peut offrir (par exemple plus de 125Gio sur Graham), mais plut\u00f4t demander une quantit\u00e9 explicite de m\u00e9moire."
  },
  {
    "question": "Comment demander moins qu'un n\u0153ud entier tout en assurant que tous les c\u0153urs sont sur le m\u00eame n\u0153ud?",
    "answer": "Vous pouvez le faire en demandant par exemple `--nodes=1`, `--ntasks-per-node=15` et `--mem=45G`."
  },
  {
    "question": "Quelle est la diff\u00e9rence entre `--mem-per-cpu=3G` et `--mem=45G` pour une t\u00e2che de 15 processus?",
    "answer": "Avec `--mem-per-cpu=3G`, la t\u00e2che serait annul\u00e9e si un des processus d\u00e9passe 3Go. Avec `--mem=45G`, la m\u00e9moire consomm\u00e9e par chaque processus n'importe pas tant que le total ne d\u00e9passe pas 45Go, offrant plus de flexibilit\u00e9."
  },
  {
    "question": "Comment le nombre de c\u0153urs sp\u00e9cifi\u00e9 peut-il affecter une t\u00e2che parall\u00e8le?",
    "answer": "Le fait d'indiquer ou non un nombre pr\u00e9cis de c\u0153urs peut influer sur le temps d'ex\u00e9cution (utilisation de la ressource) ou le temps d'attente (utilisation du temps imparti)."
  },
  {
    "question": "\u00c0 quoi fait r\u00e9f\u00e9rence le nombre de 't\u00e2ches' Slurm demand\u00e9es?",
    "answer": "Le nombre de 't\u00e2ches' Slurm demand\u00e9es repr\u00e9sente le nombre de 'processus' qui seront d\u00e9marr\u00e9s avec `srun`."
  },
  {
    "question": "Comment sp\u00e9cifier le nombre de processus MPI et le nombre de fils pour une t\u00e2che hybride (MPI avec OpenMP ou fils Posix)?",
    "answer": "Vous voudrez indiquer le nombre de processus MPI avec `--ntasks` ou `--ntasks-per-node` et le nombre de fils avec `--cpus-per-task`."
  },
  {
    "question": "Donnez un exemple de configuration pour une t\u00e2che hybride avec 16 processus MPI et 4 fils OpenMP par processus, sans sp\u00e9cifier les n\u0153uds.",
    "answer": "Un exemple est: `--ntasks=16 --cpus-per-task=4 --mem-per-cpu=3G srun --cpus-per-task=$SLURM_CPUS_PER_TASK application.exe`."
  },
  {
    "question": "Dans une t\u00e2che hybride avec 16 t\u00e2ches et 4 cpus-per-task, combien de c\u0153urs sont allou\u00e9s et combien de m\u00e9moire est disponible par processus avec `--mem-per-cpu=3G`?",
    "answer": "Ici, 64 c\u0153urs sont allou\u00e9s, 16 processus sont initialis\u00e9s, et chaque processus pourra utiliser 12Go de m\u00e9moire (4 c\u0153urs * 3GB/c\u0153ur)."
  },
  {
    "question": "Pourquoi doit-on sp\u00e9cifier `--cpus-per-task=$SLURM_CPUS_PER_TASK` pour `srun` dans les t\u00e2ches hybrides?",
    "answer": "C'est exig\u00e9 depuis Slurm 22.05 et ne nuit pas aux versions les moins r\u00e9centes."
  },
  {
    "question": "Comment configurer une t\u00e2che hybride de 16 processus MPI et 4 fils par processus sur 2 n\u0153uds entiers?",
    "answer": "Utilisez: `--nodes=2 --ntasks-per-node=8 --cpus-per-task=4 --mem=96G srun --cpus-per-task=$SLURM_CPUS_PER_TASK application.exe`."
  },
  {
    "question": "Pourquoi est-il pr\u00e9f\u00e9rable d'utiliser `--mem` plut\u00f4t que `--mem-per-cpu` pour sp\u00e9cifier la m\u00e9moire dans une t\u00e2che hybride avec des n\u0153uds sp\u00e9cifiques?",
    "answer": "`--mem` pr\u00e9cise la quantit\u00e9 de m\u00e9moire par n\u0153ud et est utilis\u00e9 de pr\u00e9f\u00e9rence \u00e0 `--mem-per-cpu` pour la flexibilit\u00e9 qu'il offre, tant que la m\u00e9moire totale par n\u0153ud n'est pas d\u00e9pass\u00e9e."
  }
]