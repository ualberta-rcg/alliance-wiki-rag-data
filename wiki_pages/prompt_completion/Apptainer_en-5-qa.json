[
  {
    "question": "Why is it advised not to mount CVMFS paths inside Apptainer containers?",
    "answer": "Mounting CVMFS paths inside Apptainer containers is discouraged because it can lead to complications and defeats the purpose of containers, which is to have all necessary programs entirely self-contained."
  },
  {
    "question": "What are the two primary formats in which Apptainer images can be created?",
    "answer": "Apptainer images can be created either as an `SIF` file or as a sandbox directory."
  },
  {
    "question": "What kind of filesystem is typically found in an SIF file produced by the `apptainer build` command, and what are its characteristics?",
    "answer": "Unless advanced methods are used, the `apptainer build` command produces an SIF file with a read-only `squashfs` filesystem, which is also compressed."
  },
  {
    "question": "What are the advantages of using an SIF file for an Apptainer image compared to a sandbox directory?",
    "answer": "SIF files are recommended because they are read-only, compressed, result in smaller images, offer faster disk reads, and use only a single quota file count instead of thousands."
  },
  {
    "question": "What is an Apptainer sandbox directory?",
    "answer": "A sandbox directory is a regular filesystem directory that starts empty, and Apptainer populates it with the necessary files and directories during image building. Its contents should only be accessed or updated through Apptainer."
  },
  {
    "question": "In what situations might a user prefer a sandbox directory over an SIF file?",
    "answer": "A user might need a sandbox directory in situations where read-write access to the image itself is required to update the container image."
  },
  {
    "question": "How can a user update an Apptainer SIF file if updates are infrequent?",
    "answer": "If updates are infrequent, a user can build a sandbox image from the SIF, make the required changes within the sandbox using `apptainer shell --writable`, and then build a new SIF file from the modified sandbox directory."
  },
  {
    "question": "What are the disadvantages of using a sandbox directory for an Apptainer image?",
    "answer": "Using a sandbox directory will consume significant amounts of both disk space and file count quotas, and disk access speeds to content within it will be slower compared to an SIF file."
  },
  {
    "question": "Can normal users build Apptainer images that require root permissions on compute clusters using older Apptainer versions?",
    "answer": "No, Apptainer version 1.0.x and older Singularity cannot be used on compute clusters by a normal user to build images that require root permissions, especially when using Linux distribution package managers."
  },
  {
    "question": "What is the key difference in using the `--fakeroot` feature between Apptainer version 1.1 and earlier versions?",
    "answer": "With Apptainer version 1.1 and newer, `--fakeroot` can be used without needing formal addition by a system administrator, whereas prior versions required submitting a ticket for such access."
  },
  {
    "question": "What options are available if a user needs to build an Apptainer image that requires a `root` account and cannot be built on the clusters?",
    "answer": "If an image requires a `root` account and cannot be built on the clusters, the user can submit a ticket asking Alliance staff for help, or build the image on a computer they control where they have root permissions."
  },
  {
    "question": "Can Docker images generally be built and run with Apptainer without needing additional permissions or `--fakeroot`?",
    "answer": "Yes, Docker images often can be built and run as-is with Apptainer without issues, typically not requiring additional permissions or explicit use of `--fakeroot`."
  },
  {
    "question": "When might elevated permissions be necessary when working with a Docker image in Apptainer, even if it initially built without them?",
    "answer": "Elevated permissions might be necessary if a user needs to modify the image after creating it, for example, if installing a new package using the image's Linux distribution package manager requires such permissions."
  }
]