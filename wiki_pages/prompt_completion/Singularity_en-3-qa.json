[
  {
    "question": "What is the recommended two-step process for creating a Singularity image from Docker Hub on a cluster?",
    "answer": "The process involves first downloading the Docker image without conversion on a data transfer or login node, and then converting the downloaded Docker image to a Singularity image on a compute node with a suitable allocation of memory and CPU."
  },
  {
    "question": "Which tool from the Moby Project can be used to download a Docker image without converting it to Singularity?",
    "answer": "The `download-frozen-image` tool from the Moby Project can be used to download a Docker image without converting it to Singularity."
  },
  {
    "question": "Where should the initial download of a Docker image be performed in the two-step process for Singularity image creation?",
    "answer": "The initial download of a Docker image (without conversion) should be performed on any data transfer or login node."
  },
  {
    "question": "Where should the conversion of a downloaded Docker image into a Singularity image take place?",
    "answer": "The conversion of a downloaded Docker image to a Singularity image is computationally intensive and should be done on a compute node with a suitable allocation of memory and CPU, typically within an interactive job."
  },
  {
    "question": "What is the command to build a Singularity image from a Docker archive on a compute node?",
    "answer": "After loading the singularity module, the command is `singularity build IMAGE_NAME.sif docker-archive://ARCHIVE_NAME.tar`."
  },
  {
    "question": "What is the first step to create a Singularity image using a Dockerfile?",
    "answer": "The first step is to create a Docker image from the Dockerfile on your VM or Linux machine where you have sudo access, using a command like `sudo docker build -t CC:latest .`."
  },
  {
    "question": "What is the second step to create a Singularity image from an existing Docker image (built from a Dockerfile)?",
    "answer": "The second step is to use the Docker image created previously as the source for Singularity, using a command like `sudo singularity build cc_image_latest.sif docker-daemon://CC:latest`."
  },
  {
    "question": "What is the purpose of the `--sandbox` flag when building a Singularity image?",
    "answer": "The `--sandbox` flag allows you to create a container within a writable directory, which enables easy modifications of existing containers."
  },
  {
    "question": "How can one make changes within a Singularity sandbox container?",
    "answer": "Changes can be made within the container using the `--writable` flag with the `singularity shell` command, for example: `singularity shell --writable IMAGE_NAME/`."
  },
  {
    "question": "How do you convert a Singularity sandbox directory into a .sif file?",
    "answer": "A sandbox directory can be converted into a `.sif` file using the build command, such as `singularity build production.sif IMAGE_NAME/`."
  },
  {
    "question": "Is `sudo` typically required when building a pre-built Singularity image from Singularity or Docker Hub?",
    "answer": "No, you typically will not need `sudo` access if you are building a pre-built image from Singularity or Docker Hub."
  },
  {
    "question": "What happens to filesystem permissions if `sudo` is not used when building a Singularity image?",
    "answer": "If `sudo` is not used, all filesystem permissions will be collapsed to be the permissions of the Linux user and group that is running `singularity build`."
  },
  {
    "question": "Why might retaining original filesystem permissions be important when building a Singularity image?",
    "answer": "Retaining original filesystem permissions is important if you need to regularly update/reconfigure the contents of the image and if tools used for updating/reconfiguring require those permissions to be retained."
  },
  {
    "question": "What should be done if Singularity image creation fails due to user restrictions on a cluster node?",
    "answer": "If image creation fails due to user restrictions, it is recommended to request assistance to create the Singularity image by contacting Technical support."
  }
]