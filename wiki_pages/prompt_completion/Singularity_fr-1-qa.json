[
  {
    "question": "Why is the content of this page considered obsolete?",
    "answer": "This page is obsolete because Singularity is no longer supported; users should consult the Apptainer wiki page instead."
  },
  {
    "question": "What is Singularity?",
    "answer": "Singularity is an open-source software created by Berkeley Lab."
  },
  {
    "question": "What are the main purposes of Singularity?",
    "answer": "Singularity is used to securely run Linux containers on multi-user Linux clusters, give users full control of their environment, and create and deploy scientific software packages across different clusters of the same architecture."
  },
  {
    "question": "What type of virtualization does Singularity provide?",
    "answer": "Singularity enables operating system virtualization in the form of containers."
  },
  {
    "question": "What are the differences between a Singularity container and a virtual machine instance?",
    "answer": "Unlike a virtual machine instance, a container may require fewer resources and can only execute programs designed for the same kernel (Linux) and hardware architecture."
  },
  {
    "question": "What can a virtual machine instance do that a container cannot?",
    "answer": "A virtual machine instance can run more than one operating system and can sometimes execute programs designed for different CPU architectures."
  },
  {
    "question": "Which Linux functionalities do containers leverage?",
    "answer": "Containers use Linux functionalities such as cgroups for resource limitation, control, and isolation; kernel namespaces for virtualizing and isolating OS resources for process groups; and Overlay filesystems to provide the appearance of write operations on read-only filesystems."
  },
  {
    "question": "How does Singularity compare to other container solutions like Docker in terms of security?",
    "answer": "Unlike other container solutions like Docker, Singularity allows containers to be used securely, especially with multi-user computing clusters."
  },
  {
    "question": "Where is Singularity available?",
    "answer": "Singularity is available on our clusters."
  },
  {
    "question": "What are the requirements for using Singularity on a personal computer?",
    "answer": "To use Singularity on your own computer, you should consult the installation documentation and have a relatively recent Linux distribution (kernel v3 10.0 or higher)."
  },
  {
    "question": "How do you load a Singularity module on the clusters?",
    "answer": "You can load a Singularity module by running a command like `$ module load singularity/2.5`."
  },
  {
    "question": "How can you see available Singularity modules?",
    "answer": "You can see available Singularity modules by running `$ module spider singularity`."
  },
  {
    "question": "What must be done before using Singularity?",
    "answer": "Before using Singularity, you must create an image (a container), which is either a file or a directory where Linux is installed."
  },
  {
    "question": "What command is used to create a Singularity image?",
    "answer": "To create an image, you use the `singularity build` command, in the format `singularity build WHAT-TO-WRITE SPECIAL-URI-OR-PATH`."
  },
  {
    "question": "What can WHAT-TO-WRITE refer to when building a Singularity image?",
    "answer": "`WHAT-TO-WRITE` can be the name of the Singularity image file (*.sif) or a directory if building a sandbox with the `--sandbox` option, generally on your own Linux computer with root access."
  },
  {
    "question": "What are the possible sources for SPECIAL-URI-OR-PATH when building a Singularity image?",
    "answer": "`SPECIAL-URI-OR-PATH` can be a URI starting with `library://`, `docker://`, or `shub://`, or a path to an existing container, a sandbox directory, or a Singularity image recipe file."
  },
  {
    "question": "What are the recommended conditions for creating Singularity images?",
    "answer": "It is strongly recommended to create Singularity images on a Linux computer or instance with Singularity installed, internet access, and preferably where you have root access (sudo permissions)."
  },
  {
    "question": "What happens if you create a Singularity image without `sudo` permissions?",
    "answer": "Without `sudo` permissions, all user and group permissions for the created image will become those defined for the account from which the image was created, making it generally difficult to update later."
  },
  {
    "question": "Why are `root` permissions often required for maintaining images?",
    "answer": "Commands like `dpkg`, `apt-get`, and `apt` for Debian and Ubuntu images require `root` permissions to install and update packages."
  },
  {
    "question": "What must be done with images created on a personal computer before they can be used on a cluster?",
    "answer": "Images created on a personal computer must be downloaded to the cluster before they can be used."
  },
  {
    "question": "What error might occur during image build on certain Linux distributions even with sufficient memory?",
    "answer": "You might receive a 'WARNING: 'nodev' mount option set on /tmp, it could be a source of failure during build process' and 'FATAL: no memory left on device' error during image build on certain Linux distributions."
  },
  {
    "question": "Why do some recent Linux distributions cause a 'no memory left on device' error during Singularity image build?",
    "answer": "Many recent Linux distributions use an in-memory filesystem, which can limit the size of a container you wish to build."
  },
  {
    "question": "How can you resolve the 'no memory left on device' error during a Singularity build?",
    "answer": "You can resolve this issue by configuring the `SINGULARITY_TMPDIR` environment variable to point to a filesystem location, for example: `$ SINGULARITY_TMPDIR=\"disk/location\" singularity build IMAGE_NAME.sif docker://DOCKER-IMAGE-NAME`."
  },
  {
    "question": "Can users have `sudo` permissions on Compute Canada clusters for creating Singularity images?",
    "answer": "No, users cannot have `sudo` permissions on Compute Canada clusters, so they should be aware of the implications regarding image permissions."
  },
  {
    "question": "Where can Singularity images be created on Compute Canada infrastructure?",
    "answer": "Singularity images can be created on all our clusters and on visualization computers like `gra-vdi.computecanada.ca`."
  },
  {
    "question": "What are the specific instructions for creating Singularity images on different Compute Canada clusters?",
    "answer": "On Beluga, Graham, and Niagara, use an SSH connection and a login node. On Cedar, use an SSH connection and an interactive job, not a login node. On `gra-vdi.computecanada.ca`, use a VNC connection and a terminal window. Do not create links with `/localscratch` on Niagara."
  },
  {
    "question": "Which platform is preferred for creating Singularity images on Compute Canada infrastructure?",
    "answer": "The preferred option for creating Singularity images is `gra-vdi.computecanada.ca`."
  },
  {
    "question": "What are the challenges of creating Singularity images on Beluga, Graham, Niagara, and Cedar?",
    "answer": "On Beluga, Graham, and Niagara, login nodes have limited RAM and compute nodes lack internet access. On Cedar, login nodes cannot be used, and it's difficult to predict necessary RAM for compute nodes, potentially leading to errors."
  }
]