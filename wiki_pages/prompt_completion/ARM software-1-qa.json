[
  {
    "question": "What is ARM DDT?",
    "answer": "ARM DDT (formerly known as Allinea DDT) is a powerful commercial parallel debugger with a graphical user interface. It can be used to debug serial, MPI, multi-threaded, and CUDA programs, or any combination of the above, written in C, C++, and FORTRAN."
  },
  {
    "question": "What is ARM MAP?",
    "answer": "MAP (formerly Allinea) is an efficient parallel profiler from ARM, often used alongside DDT."
  },
  {
    "question": "What types of programs and languages does ARM DDT support?",
    "answer": "ARM DDT can debug serial, MPI, multi-threaded, and CUDA programs, or any combination of these, written in C, C++, and FORTRAN."
  },
  {
    "question": "Which modules are available for DDT and MAP on Nibi and Trillium?",
    "answer": "On Nibi and Trillium, the `ddt-cpu` module is available for CPU debugging and profiling, and the `ddt-gpu` module is available for GPU or mixed CPU/GPU debugging. Both require the StdEnv module to be loaded."
  },
  {
    "question": "How do I log in to use ARM DDT, which is a GUI application?",
    "answer": "As ARM DDT is a GUI application, you should log in using `ssh -Y` and use an SSH client like MobaXTerm (Windows) or XQuartz (Mac) to ensure proper X11 tunnelling."
  },
  {
    "question": "How are DDT and MAP typically used interactively?",
    "answer": "Both DDT and MAP are normally used interactively through their GUI, which is accomplished using the `salloc` command."
  },
  {
    "question": "Can MAP be used non-interactively, and if so, how?",
    "answer": "Yes, MAP can be used non-interactively by submitting it to the scheduler with the `sbatch` command."
  },
  {
    "question": "What are the license limitations for DDT/MAP and DDT-GPU?",
    "answer": "The current license limits the use of DDT/MAP to a maximum of 64 CPU cores across all users at any given time, while DDT-GPU is limited to 8 GPUs."
  },
  {
    "question": "What is the initial command to allocate nodes for CPU-only debugging or profiling?",
    "answer": "To allocate nodes for CPU-only debugging or profiling, you can use a command like `salloc --x11 --time=0-1:00 --mem-per-cpu=4G --ntasks=4`."
  },
  {
    "question": "Which module should be loaded for CPU-only code debugging or profiling?",
    "answer": "For CPU-only code, you should load the `ddt-cpu` module, for example, `module load ddt-cpu`."
  },
  {
    "question": "How do you start DDT or MAP once nodes are allocated and modules are loaded for CPU-only code?",
    "answer": "You can run the ddt or map command followed by the path to your code, such as `ddt path/to/code` or `map path/to/code`."
  },
  {
    "question": "What important settings should be confirmed in the DDT/MAP application window before running CPU-only code?",
    "answer": "Before pressing the 'Run' button, you must make sure the MPI implementation is the default OpenMPI in the DDT/MAP application window and specify the desired number of CPU cores."
  },
  {
    "question": "What is the compatibility issue between current DDT versions and OpenMPI?",
    "answer": "Current versions of DDT and OpenMPI have a compatibility issue that breaks the important feature of DDT, which is displaying message queues (available from the 'Tools' drop-down menu)."
  },
  {
    "question": "What is the workaround for the DDT and OpenMPI compatibility issue?",
    "answer": "Before running DDT, you have to execute the command: `export OMPI_MCA_pml=ob1`."
  },
  {
    "question": "Are there any side effects to using the `export OMPI_MCA_pml=ob1` workaround?",
    "answer": "Yes, the `export OMPI_MCA_pml=ob1` workaround can make your MPI code run slower, so it should only be used when debugging."
  },
  {
    "question": "What salloc command is used to allocate nodes for CUDA code debugging?",
    "answer": "To allocate nodes for CUDA code debugging or profiling, you can use a command like `salloc --x11 --time=0-1:00 --mem-per-cpu=4G --ntasks=1 --gres=gpu:1`."
  },
  {
    "question": "Which module needs to be loaded for GPU or mixed CPU/GPU debugging?",
    "answer": "You need to load the `ddt-gpu` module, for example, `module load ddt-gpu`."
  },
  {
    "question": "What should be done if `module load ddt-gpu` fails with a suggestion to load an older OpenMPI version?",
    "answer": "If `module load ddt-gpu` fails, reload the OpenMPI module with the suggested command (e.g., `module load openmpi/2.0.2`), and then reload the `ddt-gpu` module."
  },
  {
    "question": "Besides `ddt-gpu`, what other module is required for CUDA code debugging?",
    "answer": "A `cuda` module must be loaded, for example, `module load cuda`."
  },
  {
    "question": "What should be done if DDT reports a mismatch between the CUDA driver and toolkit version?",
    "answer": "If DDT complains about a CUDA driver and toolkit version mismatch, execute a command like `export ALLINEA_FORCE_CUDA_VERSION=10.1` (using the correct version) and then run DDT again."
  },
  {
    "question": "Why might the DDT graphical interface be laggy?",
    "answer": "The DDT interface might be laggy because X11 is very sensitive to packet latency, especially if you are not on the same campus as the computer cluster."
  },
  {
    "question": "How can the lag in the DDT interface be fixed?",
    "answer": "The lag in the DDT interface can be fixed by running DDT under VNC."
  },
  {
    "question": "What are the general steps to manually launch a job from the DDT startup screen when using VNC from a login or VDI node?",
    "answer": "From the DDT startup screen, pick the 'manually launch backend yourself' job start option, enter the appropriate information for your job, press the 'listen' button, and then press the 'help' button next to 'waiting for you to start the job...' to get the command needed to start your job."
  },
  {
    "question": "What is an example command for manually launching a job under DDT when using VNC from a login or VDI node?",
    "answer": "An example command provided is `/cvmfs/restricted.computecanada.ca/easybuild/software/2020/Core/allinea/20.2/bin/forge-client --ddtsessionfile /home/$USER/.allinea/session/gra-vdi3-1 $PROGRAM ...` where `$USER` is your username and `$PROGRAM` is the command to start your program."
  }
]