[
  {
    "question": "What is the status of this documentation page?",
    "answer": "This page is a draft (\u00e9bauche); the final version is currently under development."
  },
  {
    "question": "Where can users send suggestions regarding this page?",
    "answer": "Users can send suggestions to the technical support via [[Technical support/fr|soutien technique]]."
  },
  {
    "question": "What is the main purpose of this procedure?",
    "answer": "This procedure allows using ControlMaster from WSL to connect to clusters with multiple native Windows applications for a certain duration, without requiring re-authentication for each session."
  },
  {
    "question": "Where can I find instructions for working with Windows Subsystem for Linux (WSL)?",
    "answer": "Refer to [[Windows Subsystem for Linux (WSL)/fr|Travailler avec Windows Subsystem for Linux (WSL)]]."
  },
  {
    "question": "Which Linux distribution is used in the configuration files?",
    "answer": "The distribution used is Ubuntu."
  },
  {
    "question": "What is the hostname for the WSL instance?",
    "answer": "The hostname for the WSL instance is `ubuntu`."
  },
  {
    "question": "Which files contain information about the 'ubuntu' hostname?",
    "answer": "`/etc/hostname` contains `ubuntu`, and `/etc/hosts` contains `127.0.0.1 localhost ubuntu`."
  },
  {
    "question": "What is the name of the Windows system in this configuration?",
    "answer": "The name of the Windows system is `smart`."
  },
  {
    "question": "Who is the user making the connection from the Windows system?",
    "answer": "The connection is made by the user named `jaime`."
  },
  {
    "question": "What is the name of the user for the Ubuntu VM?",
    "answer": "The name of the user for the Ubuntu VM is also `jaime`."
  },
  {
    "question": "What is the name of the user for the Alliance?",
    "answer": "The name of the user for the Alliance is `pinto`."
  },
  {
    "question": "Which cluster are we trying to connect to in this exercise?",
    "answer": "We are trying to connect to Cedar."
  },
  {
    "question": "How do you update and upgrade packages on Ubuntu?",
    "answer": "Run `sudo apt update && sudo apt upgrade -y`."
  },
  {
    "question": "How do you install the openssh-server package on Ubuntu?",
    "answer": "Run `sudo apt install openssh-server -y`."
  },
  {
    "question": "How can you connect to Ubuntu from Windows after installing openssh-server?",
    "answer": "You can connect using `ssh localhost`."
  },
  {
    "question": "Describe the SSH connection path in this configuration.",
    "answer": "The connection path is `[ssh client] ----> [ssh relay server] ----> [ssh target server]`, specifically `your Windows machine (smart) ----> in your Ubuntu VM (ubuntu) ----> using cedar for this exercise (Cedar)`."
  },
  {
    "question": "What is the custom configuration for the SSH daemon (`sshd`) on Ubuntu?",
    "answer": "The `sshd_config` specifies `Port 2222`, custom `HostKey` paths, `AuthorizedKeysFile` at `/home/jaime/custom_ssh/authorized_keys`, `ChallengeResponseAuthentication no`, `UsePAM no`, `Subsystem sftp /usr/lib/openssh/sftp-server`, and `PidFile /home/jaime/custom_ssh/sshd.pid`."
  },
  {
    "question": "How do you copy `ssh_host_ed25519_key` to the `custom_ssh` directory?",
    "answer": "Use the command `sudo cp /etc/ssh/ssh_host_ed25519_key /home/jaime/custom_ssh/`."
  },
  {
    "question": "What is the content of the `~/.ssh/config` file on Ubuntu for the `cedar` host?",
    "answer": "It includes `ControlPath ~/.ssh/cm-%r@%h:%p`, `ControlMaster auto`, `ControlPersist 10m`, `HostName cedar.alliancecan.ca`, and `User pinto`."
  },
  {
    "question": "What is the specified hostname for Cedar in the Ubuntu SSH config?",
    "answer": "The hostname is `cedar.alliancecan.ca`."
  },
  {
    "question": "What user is specified for connecting to Cedar from Ubuntu?",
    "answer": "The user `pinto` is specified for connecting to Cedar."
  },
  {
    "question": "What should be used as the public SSH key in `authorized_keys`?",
    "answer": "The public SSH key that you have downloaded from CCDB should be used."
  },
  {
    "question": "How do you start the SSH daemon (`sshd`) server on Ubuntu with the custom configuration?",
    "answer": "Run `/usr/sbin/sshd -f ${HOME}/custom_ssh/sshd_config`."
  },
  {
    "question": "With which profile should the sshd server be launched?",
    "answer": "The server should be launched with your user profile, not the root profile."
  },
  {
    "question": "When is it necessary to relaunch the sshd server?",
    "answer": "You need to relaunch the sshd server every time you restart your computer or when WSL is closed or relaunched."
  },
  {
    "question": "What is the content of the `~/.ssh/config` file on the Windows system (`smart`) for the `ubuntu` host?",
    "answer": "It specifies `Hostname localhost` and `RemoteCommand ssh cedar`."
  },
  {
    "question": "How do you connect to Cedar from the Windows system using the `ubuntu` host configuration?",
    "answer": "Use the command `ssh -t ubuntu -p 2222`."
  },
  {
    "question": "What is an alternative configuration for `authorized_keys` on Ubuntu that allows graphical applications like WinSCP to work without `RemoteCommand`?",
    "answer": "The `authorized_keys` entry should be `command=\"ssh cedar\" ssh-ed25519 AAAZDINzaC1lZDI1NTE5AAC1lZDIvqzlffkzcjRAaMQoTBrPe5FxlSAjRAaMQyVzN+A+`."
  },
  {
    "question": "How does the Windows `~/.ssh/config` file change with this alternative configuration?",
    "answer": "The `RemoteCommand ssh cedar` line for the `ubuntu` host should be commented out or removed."
  },
  {
    "question": "Can `ssh ubuntu -p 2222` still be used from a Windows shell with the alternative configuration?",
    "answer": "Yes, `ssh ubuntu -p 2222` can still be used from a Windows shell."
  }
]