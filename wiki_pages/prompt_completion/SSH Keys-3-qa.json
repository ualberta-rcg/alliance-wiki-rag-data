[
  {
    "question": "What is an alternative method to install an SSH key if I only want it on a specific system rather than all HPC systems?",
    "answer": "You can install a key on a specific system by adding it to the `~/.ssh/authorized_keys` file in your `/home` directory on that system."
  },
  {
    "question": "How do you install an SSH public key on a specific system like 'Fir' using the `authorized_keys` method?",
    "answer": "Copy your public key into the file `~/.ssh/authorized_keys` on Fir. The `ssh-copy-id` command, like `ssh-copy-id -i alliance-key username@fir.alliancecan.ca`, is the most convenient way to do this on OpenSSH systems."
  },
  {
    "question": "What is a known fragility of the `authorized_keys` mechanism for SSH?",
    "answer": "SSH is quite picky about the permissions on the `authorized_keys` file, as well as your `/home` directory and the `.ssh` subdirectory."
  },
  {
    "question": "Is the `authorized_keys` method of installing SSH keys permanently supported?",
    "answer": "Support for this method might eventually be withdrawn."
  },
  {
    "question": "Why is it recommended to use an SSH key agent?",
    "answer": "An SSH key agent is recommended because it avoids the inconvenience of entering your passphrase every time you use the key and prevents storing the unencrypted private key on permanent storage, making it less vulnerable."
  },
  {
    "question": "How does an SSH key agent function?",
    "answer": "You type the passphrase when starting up the agent, after which the agent supplies the private key for new connections, eliminating the need to re-enter the passphrase."
  },
  {
    "question": "Where should the operation of generating an SSH key be performed?",
    "answer": "This operation should be performed on your own computer, not on a shared computer, such as a cluster."
  },
  {
    "question": "How can you specify a comment for an SSH key when generating it?",
    "answer": "You can specify a comment using the `ssh-keygen -C 'Alliance systems'` command."
  },
  {
    "question": "How can you choose a custom name for your SSH key file during generation?",
    "answer": "You can choose the name of the key file using the `ssh-keygen -f alliance-key` command."
  },
  {
    "question": "What do you need to do if you use a custom name for your SSH key files when logging in?",
    "answer": "If you name a key, you must use the `-i` option to specify the key name when logging in, for example: `ssh -i alliance-key user@host`."
  },
  {
    "question": "How can you generate an SSH key with a different key type than the default?",
    "answer": "You can choose a different key type using `ssh-keygen -t ed25519`."
  },
  {
    "question": "How can you strengthen an RSA SSH key by setting a longer key length?",
    "answer": "You can strengthen certain key types, such as RSA, by setting a longer key length, for example: `ssh-keygen -t rsa-sha2-512 -b 4096`."
  },
  {
    "question": "What is the primary function of SSH key constraints?",
    "answer": "SSH key constraints permit you to limit what a public key is allowed to do, as by default, a public key installed without constraints can do anything."
  },
  {
    "question": "Provide an example of an SSH key constraint that limits the command a key can execute.",
    "answer": "The constraint `restrict,command=\"squeue --me\"` can limit the key to only perform the simple operation of showing whether you have any jobs in Slurm."
  },
  {
    "question": "How can an SSH key be constrained to only allow SFTP access?",
    "answer": "An SSH key can be constrained for SFTP access using `restrict,command=\"/usr/libexec/openssh/sftp-server\"`."
  },
  {
    "question": "How can you limit which hosts can connect using an SSH key?",
    "answer": "The key constraint `restrict,from=\"d24-141-114-17.home.cgocable.net\"` can limit which hosts can connect using the key."
  },
  {
    "question": "What happens to `pty allocation` by default when a key constraint uses the `restrict` keyword for source-constrained sessions?",
    "answer": "The `restrict` keyword turns off `pty allocation`, which makes an interactive session behave peculiarly."
  },
  {
    "question": "How can `pty allocation` be enabled for a source-constrained interactive session using an SSH key?",
    "answer": "To allow `pty allocation` for a source-constrained interactive session, add `pty` to the constraint, for example: `restrict,from=\"d24-141-114-17.home.cgocable.net\",pty`."
  },
  {
    "question": "Where can one find detailed documentation on SSH key constraints?",
    "answer": "A large number of these key constraints are documented in the `sshd` man page (`man sshd` on a Linux system)."
  },
  {
    "question": "What is a best practice regarding the uniqueness of SSH keys?",
    "answer": "Keys should be unique to a given user account and should not be used by multiple people."
  },
  {
    "question": "What should be done if you must store your private key on a shared computer?",
    "answer": "Store your private key where only you are allowed access, or use an external storage device like a USB key if secure storage is not available."
  },
  {
    "question": "What is the recommended minimum length for an SSH private key passphrase?",
    "answer": "A strong passphrase of 15 characters or more is recommended."
  },
  {
    "question": "Should you share your private SSH key?",
    "answer": "No, you should not share your private key."
  },
  {
    "question": "Where should your private SSH key ideally be kept?",
    "answer": "Your private key should not leave your workstation and should not be copied to a remote system."
  },
  {
    "question": "What is recommended if you use multiple laptops for SSH access?",
    "answer": "If you have several laptops, you can create dedicated SSH key pairs for each of them."
  },
  {
    "question": "What tool helps make encrypted SSH keys more convenient to use?",
    "answer": "Using `ssh-agent` is recommended to make encrypted keys convenient."
  },
  {
    "question": "What tool should be used if agent forwarding is enabled?",
    "answer": "If you use agent forwarding, you should also use `ssh-askpass`."
  },
  {
    "question": "What security measure is recommended for public keys to limit their capabilities?",
    "answer": "Apply constraints to your public key to limit its scope."
  },
  {
    "question": "What are some common reasons for an SSH key to be revoked?",
    "answer": "An SSH key may be revoked due to identified SSH key sharing, or if the private component of the SSH key is believed to have become compromised through improper key management, theft, or a security breach."
  },
  {
    "question": "What security risk does a compromised SSH key pose?",
    "answer": "A compromised SSH key poses a significant security risk, as a malicious actor may use the key to gain unauthorized access to systems and sensitive data."
  },
  {
    "question": "What system does the Digital Research Alliance of Canada use to manage compromised SSH keys?",
    "answer": "The Digital Research Alliance of Canada maintains a Key Revocation List (KRL) to mitigate risks associated with compromised SSH keys."
  },
  {
    "question": "What is the Key Revocation List (KRL)?",
    "answer": "The Key Revocation List is a registry of SSH keys that are no longer trusted or are otherwise considered invalid, preventing any key on the list from being used to access Alliance services."
  },
  {
    "question": "What immediate actions should be taken if an SSH key is discovered to be revoked?",
    "answer": "If an SSH key has been revoked, it is imperative to replace it with a new one and remove the revoked key from all services (Alliance or other) to prevent unauthorized access or data breaches."
  },
  {
    "question": "Who should be contacted if there are concerns or questions regarding SSH key revocation?",
    "answer": "If you believe your SSH key has been listed on the Key Revocation List in error, or if you have concerns or questions, contact Technical Support for assistance."
  }
]