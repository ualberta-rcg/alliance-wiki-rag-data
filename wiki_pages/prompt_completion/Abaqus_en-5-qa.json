[
  {
    "question": "How do you specify in an Abaqus input file to write restart data for a total of 12 time increments in an Explicit analysis temporary directory script?",
    "answer": "You need to include the line `*RESTART, WRITE, OVERLAY, NUMBER INTERVAL=12, TIME MARKS=NO` in your Abaqus input file."
  },
  {
    "question": "How can you check for completed restart information for an Explicit analysis temporary directory job?",
    "answer": "You can check by running the command `egrep -i \"step|restart\" testet*.com testet*.msg testet*.sta`."
  },
  {
    "question": "What Abaqus modules need to be loaded for an Explicit analysis temporary directory restart script?",
    "answer": "The modules `StdEnv/2020` and `abaqus/2021` must be loaded."
  },
  {
    "question": "Are input file modifications required to restart an Explicit analysis using a temporary directory restart script?",
    "answer": "No, input file modifications are not required to restart the analysis."
  },
  {
    "question": "Which environment variable is explicitly unset in the Slurm scripts for Abaqus Explicit analysis?",
    "answer": "`SLURM_GTIDS` is explicitly unset in the Slurm scripts."
  },
  {
    "question": "What is the purpose of `export MPI_IC_ORDER='tcp'` in the Abaqus Explicit analysis scripts?",
    "answer": "It exports the `MPI_IC_ORDER` environment variable with the value 'tcp'."
  },
  {
    "question": "What Slurm directive is used to specify the number of cores for a multi-node Abaqus Explicit analysis?",
    "answer": "`#SBATCH --ntasks=8` is used to specify 8 cores."
  },
  {
    "question": "What is the recommended memory per core for a multi-node Abaqus Explicit analysis, as specified in the script?",
    "answer": "The script recommends `16000M` (16GB) per core using `#SBATCH --mem-per-cpu=16000M`."
  },
  {
    "question": "Which Slurm directive for CPU tasks should not be changed in a multi-node Abaqus Explicit analysis script?",
    "answer": "`#SBATCH --cpus-per-task=1` should not be changed."
  },
  {
    "question": "What additional export is needed for `abaqus/2021` when performing multi-node Explicit analysis?",
    "answer": "The line `export I_MPI_HYDRA_TOPOLIB=ipl` should be uncommented when using `abaqus/2021`."
  },
  {
    "question": "How is the `mp_host_list` generated dynamically in the multi-node Abaqus Explicit analysis script?",
    "answer": "It is generated using the `slurm_hl2hl.py` utility to format the host list from Slurm and then processed in a loop."
  },
  {
    "question": "How can you obtain an estimate for the total Slurm node memory required for an Abaqus simulation to run fully in RAM?",
    "answer": "You can examine the Abaqus output `test.dat` file, which includes a 'MEMORY ESTIMATE' section showing 'MINIMUM MEMORY REQUIRED' and 'MEMORY TO MINIMIZE I/O'."
  },
  {
    "question": "What is an alternative method to estimate memory consumption for a single node threaded Abaqus process besides checking the `test.dat` file?",
    "answer": "You can run the simulation interactively on a compute node and monitor memory consumption using `ps` or `top` commands."
  },
  {
    "question": "What are the steps to interactively monitor memory consumption of an Abaqus job on a cluster?",
    "answer": "First, obtain an allocation on a compute node using `salloc`, load the necessary modules, and start your Abaqus simulation. Then, `ssh` into the reserved compute node and run `top -u $USER`, watching the VIRT and RES columns for steady peak memory values."
  },
  {
    "question": "What does MRMIO stand for in the context of Abaqus memory estimates?",
    "answer": "MRMIO stands for 'MEMORY TO OPERATIONS REQUIRED MINIMIZE I/O'."
  },
  {
    "question": "Why is it necessary to slightly over-allocate the requested Slurm node memory (`--mem=`) for Abaqus jobs?",
    "answer": "It is necessary because the Resident Set Size (RES) will generally be less than the Virtual Memory (VIRT), and a conservative over-allocation (e.g., 3072MB) helps ensure sufficient non-swapped physical memory is available."
  },
  {
    "question": "What is the consequence if the Resident Set Size (RES) memory dips below the Minimum Memory Required (MMR) during an Abaqus simulation?",
    "answer": "Abaqus will exit due to an Out of Memory (OOM) error."
  },
  {
    "question": "How can you investigate the performance impact of reducing available RES memory for an Abaqus simulation with a large MRMIO?",
    "answer": "You can lower the `#SBATCH --mem=` value in your Slurm script and run a series of short test jobs (e.g., with 8G, 16G, 32G, 64G) to find an acceptable minimal performance impact, noting that smaller values increase scratch space usage."
  },
  {
    "question": "Where are memory estimates (per compute process) for multi-node Slurm scripts found?",
    "answer": "They are given in the output `.dat` file of completed jobs."
  },
  {
    "question": "How is `mem-per-cpu` roughly determined for multi-node Slurm scripts if `mp_host_split` is not specified or set to 1?",
    "answer": "It's determined by multiplying the largest memory estimate by the number of nodes and then dividing by the number of `ntasks`."
  },
  {
    "question": "What is the formula for calculating `mem-per-cpu` if `mp_host_split` is specified and greater than 1?",
    "answer": "The `mem-per-cpu` value can be roughly determined from the largest memory estimate times the number of nodes times the value of `mp_host_split` divided by the number of tasks."
  },
  {
    "question": "What is the condition `mp_host_split` must satisfy regarding the number of cores per node?",
    "answer": "`mp_host_split` must be less than or equal to the number of cores per node assigned by Slurm at runtime, otherwise Abaqus will terminate."
  },
  {
    "question": "How do you run Abaqus in graphical mode on a cluster?",
    "answer": "First, connect to a compute node using TigerVNC. Then, open a terminal, load modules `StdEnv/2020` and `abaqus/2021`, and start the application with `abaqus cae -mesa`."
  },
  {
    "question": "What is the time limit for an `salloc` session when connecting to a compute node for graphical Abaqus use?",
    "answer": "The `salloc` time limit is 3 hours."
  },
  {
    "question": "How do you start Abaqus in graphical mode on `gra-vdi`?",
    "answer": "Connect to `gra-vdi` with TigerVNC, open a terminal, load the appropriate Abaqus module (e.g., `module load CcEnv StdEnv/2020 abaqus/2021`), and then run `abaqus cae`."
  },
  {
    "question": "What is a prerequisite for Abaqus to start in GUI mode?",
    "answer": "There must be at least one free `cae` license available."
  },
  {
    "question": "What is the error message if all `cae` licenses are in use when trying to start Abaqus CAE?",
    "answer": "An error message indicating 'No socket connection to license server manager' and 'FLEXnet Licensing error:-7,96' will occur, showing that 'Total of X licenses in use' equals 'Total of X licenses issued'."
  },
  {
    "question": "How many `cae` and `execute` tokens does the SHARCNET license provide?",
    "answer": "The SHARCNET license provides 2 `cae` tokens and 35 `execute` tokens."
  },
  {
    "question": "What are the usage limits for free Abaqus tokens on SHARCNET?",
    "answer": "Usage limits are 10 tokens per user and 15 tokens per group."
  },
  {
    "question": "What is the purpose of the free Abaqus tokens provided by SHARCNET?",
    "answer": "The free tokens are available on a first-come, first-serve basis, mainly intended for testing and light usage before users decide to purchase dedicated tokens."
  },
  {
    "question": "On which hardware can the SHARCNET Abaqus license be used?",
    "answer": "The SHARCNET license can only be used on SHARCNET hardware, including Graham, gra-vdi, and Dusky clusters."
  },
  {
    "question": "What must a user do to gain access to the SHARCNET Abaqus license?",
    "answer": "Users must contact technical support and request access, including a copy-pasted 'License Agreement' statement with their full name and username."
  },
  {
    "question": "Where should the Abaqus license file for SHARCNET systems be configured?",
    "answer": "The license file `~/.licenses/abaqus.lic` should be configured in the user's home directory."
  },
  {
    "question": "What should the contents of the `abaqus.lic` file be for SHARCNET systems?",
    "answer": "It should contain:\n`prepend_path(\"LM_LICENSE_FILE\",\"27050@license3.sharcnet.ca\")`\n`prepend_path(\"ABAQUSLM_LICENSE_FILE\",\"27050@license3.sharcnet.ca\")`"
  },
  {
    "question": "What error message might indicate an issue with the `ABAQUSLM_LICENSE_FILE` setting for Abaqus/2020?",
    "answer": "The error message `[*** ABAQUS/eliT_CheckLicense rank 0 terminated by signal 11 (Segmentation fault)]` in the Slurm output file suggests this issue."
  },
  {
    "question": "What error message might indicate an issue with the `LM_LICENSE_FILE` setting for Abaqus/6.14.1?",
    "answer": "An error message starting with `[License server machine is down or not responding, etc.]` in the output file might indicate this."
  },
  {
    "question": "How do you check the SHARCNET license server for started and queued jobs, including reservations?",
    "answer": "After logging into Graham and loading the Abaqus module, run: `abaqus licensing lmstat -c $LM_LICENSE_FILE -a | egrep \"Users|start|queued|RESERVATION\"`."
  },
  {
    "question": "What does it mean if the Abaqus license query output indicates a job is 'queued'?",
    "answer": "It means the job has entered the Slurm 'Running' state but is idle on a compute node, waiting for a license, which consumes account priority."
  },
  {
    "question": "What methods are recommended to avoid license shortage problems when submitting multiple Abaqus jobs?",
    "answer": "It's recommended to use a job dependency, a job array, or at least set up Slurm email notifications to know when a job completes before submitting another."
  },
  {
    "question": "How can you check the memory and CPU utilization of a *completed* Abaqus job?",
    "answer": "For completed jobs, use `seff JobNumber` to show 'Memory Utilized', 'Memory Efficiency', 'CPU (time) Utilized', and 'CPU Efficiency'."
  },
  {
    "question": "What should you do if the Memory Efficiency of a completed Abaqus job is less than ~90%?",
    "answer": "You should decrease the value of the `#SBATCH --mem=` setting in your Slurm script."
  },
  {
    "question": "What should you do if the CPU Efficiency of a completed Abaqus job is less than ~90%?",
    "answer": "You should perform scaling tests to determine the optimal number of CPUs for performance and then update the `#SBATCH --cpus-per-task=` value in your Slurm script."
  },
  {
    "question": "How can you monitor the %CPU, %MEM, and RES for each Abaqus parent process of a *running* job on a compute node?",
    "answer": "Use the command `srun --jobid=29821580 --pty top -d 5 -u $USER` to watch these metrics."
  },
  {
    "question": "What is the formula used to map cores to Abaqus tokens?",
    "answer": "TOKENS = floor[5 X CORES^0.422]"
  },
  {
    "question": "How many additional tokens are required for each GPU used in an Abaqus job?",
    "answer": "Each GPU used requires 1 additional TOKEN."
  },
  {
    "question": "Which researchers can use the Western Abaqus site license?",
    "answer": "Only Western researchers on hardware located at Western's campus (currently the Dusky cluster)."
  },
  {
    "question": "Who should be contacted to inquire about using the Western Abaqus license?",
    "answer": "The Western Abaqus license server administrator, `jmilner@robarts.ca`, should be contacted."
  },
  {
    "question": "What should the contents of the `abaqus.lic` file be to use the Western Abaqus license on Dusky?",
    "answer": "It should contain:\n`prepend_path(\"LM_LICENSE_FILE\",\"27000@license4.sharcnet.ca\")`\n`prepend_path(\"ABAQUSLM_LICENSE_FILE\",\"27000@license4.sharcnet.ca\")`"
  },
  {
    "question": "What is the first step to access the full Abaqus documentation on gra-vdi?",
    "answer": "Connect to `gra-vdi.computecanada.ca` using TigerVNC."
  },
  {
    "question": "What browser configuration change is needed on gra-vdi to view Abaqus online documentation?",
    "answer": "You need to open Firefox, go to `about:config`, search for `unique`, and double-click `privacy.file_unique_origin` to change its value from true to false."
  },
  {
    "question": "What is the file path for the Abaqus 2021 online documentation on gra-vdi?",
    "answer": "The path is `file:///opt/sharcnet/abaqus/2021/doc/English/DSSIMULIA_Established.htm`."
  }
]