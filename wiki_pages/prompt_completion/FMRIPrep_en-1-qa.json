[
  {
    "question": "What is fMRIPrep?",
    "answer": "fMRIPrep is a NiPreps app designed for preprocessing MRI data in BIDS format."
  },
  {
    "question": "What is fMRIPrep used for?",
    "answer": "It is used for preprocessing MRI data."
  },
  {
    "question": "What data format does fMRIPrep use?",
    "answer": "fMRIPrep processes MRI data in BIDS format."
  },
  {
    "question": "How do you load fMRIPrep on Alliance resources?",
    "answer": "First, you need to load the apptainer and fmriprep modules by running 'module load apptainer fmriprep'."
  },
  {
    "question": "How does fMRIPrep execute on the command line?",
    "answer": "When fMRIPrep is used on the command line, it utilizes Apptainer under the hood to invoke a container with fMRIPrep set up inside it."
  },
  {
    "question": "How can you affect the Apptainer context when running fMRIPrep?",
    "answer": "To affect the Apptainer context, you need to use Apptainer environment variables."
  },
  {
    "question": "Why does fMRIPrep fail to download TemplateFlow templates within its container?",
    "answer": "fMRIPrep within the container will try to download TemplateFlow templates but will fail, requiring users to download this data themselves in advance."
  },
  {
    "question": "What modules need to be loaded to set up TemplateFlow?",
    "answer": "You need to load 'python' and 'git-annex'."
  },
  {
    "question": "How do you install DataLad?",
    "answer": "You can install DataLad by running 'pip3 install datalad'."
  },
  {
    "question": "How do you install the TemplateFlow metadataset using DataLad?",
    "answer": "After loading necessary modules and installing DataLad, run 'datalad install -r ///templateflow'."
  },
  {
    "question": "Where is the TemplateFlow data downloaded by default?",
    "answer": "The TemplateFlow data will be downloaded into a shared directory of your default project, typically looking like '/lustre03/project/GROUPNAME/shared/templateflow'."
  },
  {
    "question": "How do you download specific TemplateFlow template subsets?",
    "answer": "After navigating to the TemplateFlow directory (e.g., 'cd /lustre03/project/GROUPNAME/shared/templateflow'), use 'datalad get -r <template_name>' like 'datalad get -r tpl-MNI152NLin2009cAsym tpl-OASIS30ANTs'."
  },
  {
    "question": "How often do you need to perform the DataLad steps for TemplateFlow?",
    "answer": "You only have to do these DataLad steps once, and the templates will be available to you and your project group until deleted."
  },
  {
    "question": "How do you tell the fMRIPrep app where to find the TemplateFlow templates?",
    "answer": "You set the Apptainer environment variable 'APPTAINERENV_TEMPLATEFLOW_HOME' to the path of the TemplateFlow templates, for example: 'export APPTAINERENV_TEMPLATEFLOW_HOME=/lustre03/project/GROUPNAME/shared/templateflow'."
  },
  {
    "question": "What is the purpose of the APPTAINER_BIND environment variable?",
    "answer": "APPTAINER_BIND tells Apptainer where the input, output, and log directories are so it can mount them and make them accessible to the fMRIPrep app within the container."
  },
  {
    "question": "How do you set the APPTAINER_BIND variable?",
    "answer": "You set it by exporting a comma-separated list of paths, such as 'export APPTAINER_BIND=/path/to/input,/path/to/output,/path/to/output/logs,$APPTAINERENV_TEMPLATEFLOW_HOME'."
  },
  {
    "question": "What is a consideration for directory and filenames when using fMRIPrep with Apptainer?",
    "answer": "fMRIPrep does not accept very long paths, so it's important to keep directory and filenames short."
  },
  {
    "question": "What is the basic command to run fMRIPrep?",
    "answer": "You can run fMRIPrep using a command like 'fmriprep /path/to/input /path/to/output participant --work-dir /path/to/output'."
  },
  {
    "question": "What is required to run fMRIPrep with FreeSurfer?",
    "answer": "You'll need to register with FreeSurfer, download the license file, copy it to one of the directories specified in APPTAINER_BIND, and use the '--fs-license-file' option."
  },
  {
    "question": "Which fMRIPrep option is used to specify the FreeSurfer license file?",
    "answer": "The '--fs-license-file' option is used to specify the FreeSurfer license file."
  }
]