[
  {
    "question": "When should you start a VNC server on a compute node?",
    "answer": "You can start a VNC server on a compute node when VDI login nodes are unavailable."
  },
  {
    "question": "What are the limitations of using a VNC server on a compute node?",
    "answer": "Using a VNC server on a compute node does not provide a full graphical desktop or hardware-accelerated OpenGL."
  },
  {
    "question": "What is the first step to starting a VNC server on a compute node?",
    "answer": "Before starting your VNC server, you must log into a cluster (such as nibi) and create a compute node allocation using the `salloc` command."
  },
  {
    "question": "What is the time limit for a compute node allocation created with `salloc`?",
    "answer": "A 24-hour time limit applies to compute node allocations created with `salloc`."
  },
  {
    "question": "How do you request an interactive job with specific resources using `salloc`?",
    "answer": "To request an interactive job, you can use a command like `salloc --time=1:00:00 --cpus-per-task=4 --mem=16000 --account=def-piusername`."
  },
  {
    "question": "What environment variable needs to be set after an interactive job starts on a compute node to avoid desktop errors?",
    "answer": "You should set the `XDG_RUNTIME_DIR` environment variable to `${SLURM_TMPDIR}` to avoid repetitive desktop errors."
  },
  {
    "question": "What command is used to start the VNC server itself on a compute node?",
    "answer": "You use the `vncserver` command to start the VNC server on a compute node."
  },
  {
    "question": "What happens the first time you start a VNC server, and what is an important security consideration?",
    "answer": "The first time you start a VNC server, you will be prompted to set a password. It is crucial NOT to leave this blank, as doing so would allow anyone to connect and access your account files."
  },
  {
    "question": "How can you change the VNC server password after it has been set?",
    "answer": "You may change the password later using the `vncpasswd` command."
  },
  {
    "question": "How do you determine which port your VNC server is listening on?",
    "answer": "You can determine the port your VNC server is listening on by running the `grep` command on the log file, for example: `grep -iE \"\\sport|kill\" /home/yourusername/.vnc/c48.nibi.sharcnet:1.log`."
  },
  {
    "question": "What is the purpose of setting up an SSH tunnel to the VNC server?",
    "answer": "Setting up an SSH tunnel creates a secure \"bridge\" from your laptop to the compute node where your vncserver is running."
  },
  {
    "question": "What is the recommended SSH tunnel command for clusters other than `nibi`?",
    "answer": "For all clusters except `nibi`, the recommended SSH tunnel command is `ssh username@clustername -L localforwardedport:computnode:remotelisteningport`."
  },
  {
    "question": "Provide an example of an SSH tunnel command for a `rorqual` compute node.",
    "answer": "An example SSH tunnel command for a `rorqual` compute node is `ssh username@rorqual.alliancecan.ca -L 5905:rc12509:5901`."
  },
  {
    "question": "What is the new form of the SSH tunnel command required for the `nibi` cluster?",
    "answer": "For `nibi`, the new form of the tunnel command is `ssh -J username@clustername -L localforwardedport:localhost:remotelisteningport computenode`."
  },
  {
    "question": "What additional setup is required on your laptop for the `nibi` specific SSH tunnel command?",
    "answer": "An SSH key pair must be created on your laptop, and the contents of the public key must be entered into your `~/.ssh/authorized_keys` file on `nibi`."
  },
  {
    "question": "Can the `nibi`-specific SSH tunnel command (`ssh -J`) be used on other clusters?",
    "answer": "Yes, the `nibi`-specific SSH tunnel approach (`ssh -J`) will also work on any other cluster."
  },
  {
    "question": "Provide an example of an SSH tunnel command for the `nibi` cluster, assuming `c48` is the compute node and `5905` is the local port.",
    "answer": "The tunnel command for `nibi` would be `ssh -J username@nibi.alliancecan.ca -L 5905:localhost:5901 c48`."
  }
]