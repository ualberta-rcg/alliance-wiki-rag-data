<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>MPI - Alliance Doc</title>
<script>(function(){var className="client-js";var cookie=document.cookie.match(/(?:^|; )ccwikimwclientpreferences=([^;]+)/);if(cookie){cookie[1].split('%2C').forEach(function(pref){className=className.replace(new RegExp('(^| )'+pref.replace(/-clientpref-\w+$|[^\w-]+/g,'')+'-clientpref-\\w+( |$)'),'$1'+pref+'$2');});}document.documentElement.className=className;}());RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":[",\t.","Â \t,"],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","janvier","fÃ©vrier","mars","avril","mai","juin","juillet","aoÃ»t","septembre","octobre","novembre","dÃ©cembre"],"wgRequestId":"aDpEnDv@Jr5vJi8BNccnjwAAA8c","wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"MPI/fr","wgTitle":"MPI/fr","wgCurRevisionId":163979,"wgRevisionId":163979,"wgArticleId":1941,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[
"Pages using deprecated source tags","Software"],"wgPageViewLanguage":"fr","wgPageContentLanguage":"fr","wgPageContentModel":"wikitext","wgRelevantPageName":"MPI/fr","wgRelevantArticleId":1941,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgULSAcceptLanguageList":[],"wgMFDisplayWikibaseDescriptions":{"search":false,"watchlist":false,"tagline":false},"wgCiteReferencePreviewsActive":true,"wgTranslatePageTranslation":"translation","wgULSPosition":"personal","wgULSisCompactLinksEnabled":true,"wgVector2022LanguageInHeader":false,"wgULSisLanguageSelectorEmpty":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.translate.tag.languages":"ready","ext.pygments":"ready","skins.vector.styles.legacy":"ready","ext.translate":"ready","codex-search-styles":"ready","ext.uls.pt":"ready"};RLPAGEMODULES=["ext.tabs","ext.pygments.view","site","mediawiki.page.ready","mediawiki.toc",
"skins.vector.legacy.js","ext.languageSelector","ext.translate.pagetranslation.uls","ext.uls.compactlinks","ext.uls.geoclient","ext.uls.interface","ext.moderation.notify","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.impl(function(){return["user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
}];});});</script>
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=codex-search-styles%7Cext.pygments%2Ctranslate%7Cext.translate.tag.languages%7Cext.uls.pt%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector">
<script async="" src="/mediawiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content="">
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=1120">
<link rel="icon" href="/mediawiki/resources/assets/Alliance_favicon.png">
<link rel="search" type="application/opensearchdescription+xml" href="/mediawiki/rest.php/v1/search" title="Alliance Doc (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://docs.alliancecan.ca/mediawiki/api.php?action=rsd">
<link rel="alternate" type="application/atom+xml" title="Alliance Doc Atom feed" href="/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom">
<style type="text/css" id="tabs-dynamic-styles">/*<![CDATA[*/
/* Dynamically generated tabs styles */
.tabs-input-1:checked ~ .tabs-container .tabs-content-1,
.tabs-input-2:checked ~ .tabs-container .tabs-content-2,
.tabs-input-3:checked ~ .tabs-container .tabs-content-3,
.tabs-input-4:checked ~ .tabs-container .tabs-content-4,
.tabs-input-5:checked ~ .tabs-container .tabs-content-5,
.tabs-input-0:checked ~ .tabs-container .tabs-content-1 {display:inline-block;}
.tabs-input-1:checked ~ .tabs-container .tabs-inline.tabs-content-1,
.tabs-input-2:checked ~ .tabs-container .tabs-inline.tabs-content-2,
.tabs-input-3:checked ~ .tabs-container .tabs-inline.tabs-content-3,
.tabs-input-4:checked ~ .tabs-container .tabs-inline.tabs-content-4,
.tabs-input-5:checked ~ .tabs-container .tabs-inline.tabs-content-5,
.tabs-input-0:checked ~ .tabs-container .tabs-inline.tabs-content-1 {display:inline;}
.tabs-input-1:checked ~ .tabs-container .tabs-block.tabs-content-1,
.tabs-input-2:checked ~ .tabs-container .tabs-block.tabs-content-2,
.tabs-input-3:checked ~ .tabs-container .tabs-block.tabs-content-3,
.tabs-input-4:checked ~ .tabs-container .tabs-block.tabs-content-4,
.tabs-input-5:checked ~ .tabs-container .tabs-block.tabs-content-5,
.tabs-input-0:checked ~ .tabs-container .tabs-block.tabs-content-1 {display:block;}
/* The same styles, but with .checked instead of :checked, for browsers that rely on the JavaScript fallback */
.tabs-input-1.checked ~ .tabs-container .tabs-content-1,
.tabs-input-2.checked ~ .tabs-container .tabs-content-2,
.tabs-input-3.checked ~ .tabs-container .tabs-content-3,
.tabs-input-4.checked ~ .tabs-container .tabs-content-4,
.tabs-input-5.checked ~ .tabs-container .tabs-content-5,
.tabs-input-0.checked ~ .tabs-container .tabs-content-1 {display:inline-block;}
.tabs-input-1.checked ~ .tabs-container .tabs-inline.tabs-content-1,
.tabs-input-2.checked ~ .tabs-container .tabs-inline.tabs-content-2,
.tabs-input-3.checked ~ .tabs-container .tabs-inline.tabs-content-3,
.tabs-input-4.checked ~ .tabs-container .tabs-inline.tabs-content-4,
.tabs-input-5.checked ~ .tabs-container .tabs-inline.tabs-content-5,
.tabs-input-0.checked ~ .tabs-container .tabs-inline.tabs-content-1 {display:inline;}
.tabs-input-1.checked ~ .tabs-container .tabs-block.tabs-content-1,
.tabs-input-2.checked ~ .tabs-container .tabs-block.tabs-content-2,
.tabs-input-3.checked ~ .tabs-container .tabs-block.tabs-content-3,
.tabs-input-4.checked ~ .tabs-container .tabs-block.tabs-content-4,
.tabs-input-5.checked ~ .tabs-container .tabs-block.tabs-content-5,
.tabs-input-0.checked ~ .tabs-container .tabs-block.tabs-content-1 {display:block;}
.tabs-dropdown .tabs-content,.tabs-dropdown .tabs-container,.tabs-dropdown li,.tabs-dropdown ul,.tabs-dropdown ol {background-color: white /* Malicious data in tabs-dropdown-bgcolor */}
/*]]>*/</style>
</head>
<body class="skin-vector-legacy mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-MPI_fr rootpage-MPI_fr skin-vector action-view"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	<div id="mw-indicator-languageselector" class="mw-indicator"><span id="languageselector-box-1" class="languageselector " style=""><form name="languageselector-form-1" id="languageselector-form-1" method="get" action="/mediawiki/index.php" style="display:inline;"><input type="hidden" value="MPI/fr" name="title"><select name="setlang" id="languageselector-select-1" style=""><option value="aae">ArbÃ«risht</option><option value="ab">Ğ°Ô¥ÑÑˆÓ™Ğ°</option><option value="abs">bahasa ambon</option><option value="ace">AcÃ¨h</option><option value="acf">KwÃ©yÃ²l Sent Lisi</option><option value="acm">Ø¹Ø±Ø§Ù‚ÙŠ</option><option value="ady">Ğ°Ğ´Ñ‹Ğ³Ğ°Ğ±Ğ·Ñ</option><option value="ady-cyrl">Ğ°Ğ´Ñ‹Ğ³Ğ°Ğ±Ğ·Ñ</option><option value="aeb">ØªÙˆÙ†Ø³ÙŠ / TÃ»nsÃ®</option><option value="aeb-arab">ØªÙˆÙ†Ø³ÙŠ</option><option value="aeb-latn">TÃ»nsÃ®</option><option value="af">Afrikaans</option><option value="aln">GegÃ«</option><option value="alt">Ğ°Ğ»Ñ‚Ğ°Ğ¹ Ñ‚Ğ¸Ğ»</option><option value="am">áŠ áˆ›áˆ­áŠ›</option><option value="ami">Pangcah</option><option value="an">aragonÃ©s</option><option value="ang">Ã†nglisc</option><option value="ann">Obolo</option><option value="anp">à¤…à¤‚à¤—à¤¿à¤•à¤¾</option><option value="apc">Ø´Ø§Ù…ÙŠ</option><option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option><option value="arc">ÜÜªÜ¡ÜÜ</option><option value="arn">mapudungun</option><option value="arq">Ø¬Ø§Ø²Ø§ÙŠØ±ÙŠØ©</option><option value="ary">Ø§Ù„Ø¯Ø§Ø±Ø¬Ø©</option><option value="arz">Ù…ØµØ±Ù‰</option><option value="as">à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾</option><option value="ase">American sign language</option><option value="ast">asturianu</option><option value="atj">Atikamekw</option><option value="av">Ğ°Ğ²Ğ°Ñ€</option><option value="avk">Kotava</option><option value="awa">à¤…à¤µà¤§à¥€</option><option value="ay">Aymar aru</option><option value="az">azÉ™rbaycanca</option><option value="azb">ØªÛ†Ø±Ú©Ø¬Ù‡</option><option value="ba">Ğ±Ğ°ÑˆÒ¡Ğ¾Ñ€Ñ‚ÑĞ°</option><option value="ban">Basa Bali</option><option value="ban-bali">á¬©á¬²á¬©á¬®á¬¶</option><option value="bar">Boarisch</option><option value="bbc">Batak Toba</option><option value="bbc-latn">Batak Toba</option><option value="bcc">Ø¬Ù‡Ù„Ø³Ø±ÛŒ Ø¨Ù„ÙˆÚ†ÛŒ</option><option value="bci">wawle</option><option value="bcl">Bikol Central</option><option value="bdr">Bajau Sama</option><option value="be">Ğ±ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ</option><option value="be-tarask">Ğ±ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ (Ñ‚Ğ°Ñ€Ğ°ÑˆĞºĞµĞ²Ñ–Ñ†Ğ°)</option><option value="bew">Betawi</option><option value="bg">Ğ±ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸</option><option value="bgc">à¤¹à¤°à¤¿à¤¯à¤¾à¤£à¤µà¥€</option><option value="bgn">Ø±ÙˆÚ† Ú©Ù¾ØªÛŒÙ† Ø¨Ù„ÙˆÚ†ÛŒ</option><option value="bh">à¤­à¥‹à¤œà¤ªà¥à¤°à¥€</option><option value="bho">à¤­à¥‹à¤œà¤ªà¥à¤°à¥€</option><option value="bi">Bislama</option><option value="bjn">Banjar</option><option value="blk">á€•á€¡á€­á€¯á€á€ºá‚á€˜á€¬á‚á€á€¬á‚</option><option value="bm">bamanankan</option><option value="bn">à¦¬à¦¾à¦‚à¦²à¦¾</option><option value="bo">à½–à½¼à½‘à¼‹à½¡à½²à½‚</option><option value="bpy">à¦¬à¦¿à¦·à§à¦£à§à¦ªà§à¦°à¦¿à¦¯à¦¼à¦¾ à¦®à¦£à¦¿à¦ªà§à¦°à§€</option><option value="bqi">Ø¨Ø®ØªÛŒØ§Ø±ÛŒ</option><option value="br">brezhoneg</option><option value="brh">BrÃ¡huÃ­</option><option value="bs">bosanski</option><option value="btm">Batak Mandailing</option><option value="bto">Iriga Bicolano</option><option value="bug">Basa Ugi</option><option value="bxr">Ğ±ÑƒÑ€ÑĞ°Ğ´</option><option value="ca">catalÃ </option><option value="cbk-zam">Chavacano de Zamboanga</option><option value="ccp">ğ‘„Œğ‘„‹ğ‘„´ğ‘„Ÿğ‘„³ğ‘„¦</option><option value="cdo">é–©æ±èª / MÃ¬ng-dÄ•Ì¤ng-ngá¹³Ì„</option><option value="ce">Ğ½Ğ¾Ñ…Ñ‡Ğ¸Ğ¹Ğ½</option><option value="ceb">Cebuano</option><option value="ch">Chamoru</option><option value="chn">chinuk wawa</option><option value="chr">á£á³á©</option><option value="chy">TsetsÃªhestÃ¢hese</option><option value="ckb">Ú©ÙˆØ±Ø¯ÛŒ</option><option value="co">corsu</option><option value="cps">CapiceÃ±o</option><option value="cpx">è†ä»™èª / PÃ³-sing-gá¹³Ì‚</option><option value="cpx-hans">è†ä»™è¯­ï¼ˆç®€ä½“ï¼‰</option><option value="cpx-hant">è†ä»™èªï¼ˆç¹é«”ï¼‰</option><option value="cr">NÄ“hiyawÄ“win / á“€á¦áƒá”­ááá£</option><option value="crh">qÄ±rÄ±mtatarca</option><option value="crh-cyrl">ĞºÑŠÑ‹Ñ€Ñ‹Ğ¼Ñ‚Ğ°Ñ‚Ğ°Ñ€Ğ´Ğ¶Ğ° (ĞšĞ¸Ñ€Ğ¸Ğ»Ğ»)</option><option value="crh-latn">qÄ±rÄ±mtatarca (Latin)</option><option value="crh-ro">tatarÅŸa</option><option value="cs">ÄeÅ¡tina</option><option value="csb">kaszÃ«bsczi</option><option value="cu">ÑĞ»Ğ¾Ğ²Ñ£Ğ½ÑŒÑĞºÑŠ / â°”â°â°‘â°‚â°¡â°â° â°”â°â°Ÿ</option><option value="cv">Ñ‡Ó‘Ğ²Ğ°ÑˆĞ»Ğ°</option><option value="cy">Cymraeg</option><option value="da">dansk</option><option value="dag">dagbanli</option><option value="de">Deutsch</option><option value="de-at">Ã–sterreichisches Deutsch</option><option value="de-ch">Schweizer Hochdeutsch</option><option value="de-formal">Deutsch (Sie-Form)</option><option value="dga">Dagaare</option><option value="din">ThuÉ”Å‹jÃ¤Å‹</option><option value="diq">Zazaki</option><option value="dsb">dolnoserbski</option><option value="dtp">Kadazandusun</option><option value="dty">à¤¡à¥‹à¤Ÿà¥‡à¤²à¥€</option><option value="dua">DuÃ¡lÃ¡</option><option value="dv">Ş‹Ş¨ŞˆŞ¬Ş€Ş¨Ş„Ş¦ŞŞ°</option><option value="dz">à½‡à½¼à½„à¼‹à½</option><option value="ee">eÊ‹egbe</option><option value="efi">Efá»‹k</option><option value="egl">emiliÃ n e rumagnÃ²l</option><option value="el">Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option><option value="eml">emiliÃ n e rumagnÃ²l</option><option value="en" selected="">English</option><option value="en-ca">Canadian English</option><option value="en-gb">British English</option><option value="eo">Esperanto</option><option value="es">espaÃ±ol</option><option value="es-formal">espaÃ±ol (formal)</option><option value="et">eesti</option><option value="eu">euskara</option><option value="ext">estremeÃ±u</option><option value="fa">ÙØ§Ø±Ø³ÛŒ</option><option value="fat">mfantse</option><option value="ff">Fulfulde</option><option value="fi">suomi</option><option value="fit">meÃ¤nkieli</option><option value="fj">Na Vosa Vakaviti</option><option value="fo">fÃ¸royskt</option><option value="fon">fÉ”Ì€ngbÃ¨</option><option value="fr">franÃ§ais</option><option value="frc">franÃ§ais cadien</option><option value="frp">arpetan</option><option value="frr">Nordfriisk</option><option value="fur">furlan</option><option value="fy">Frysk</option><option value="ga">Gaeilge</option><option value="gaa">Ga</option><option value="gag">Gagauz</option><option value="gan">è´›èª</option><option value="gan-hans">èµ£è¯­ï¼ˆç®€ä½“ï¼‰</option><option value="gan-hant">è´›èªï¼ˆç¹é«”ï¼‰</option><option value="gcf">krÃ©yÃ²l Gwadloup</option><option value="gcr">kriyÃ²l gwiyannen</option><option value="gd">GÃ idhlig</option><option value="gl">galego</option><option value="gld">Ğ½Ğ°Ì„Ğ½Ğ¸</option><option value="glk">Ú¯ÛŒÙ„Ú©ÛŒ</option><option value="gn">AvaÃ±e'áº½</option><option value="gom">à¤—à¥‹à¤‚à¤¯à¤šà¥€ à¤•à¥‹à¤‚à¤•à¤£à¥€ / GÃµychi Konknni</option><option value="gom-deva">à¤—à¥‹à¤‚à¤¯à¤šà¥€ à¤•à¥‹à¤‚à¤•à¤£à¥€</option><option value="gom-latn">GÃµychi Konknni</option><option value="gor">Bahasa Hulontalo</option><option value="got">ğŒ²ğŒ¿ğ„ğŒ¹ğƒğŒº</option><option value="gpe">Ghanaian Pidgin</option><option value="grc">á¼ˆÏÏ‡Î±Î¯Î± á¼‘Î»Î»Î·Î½Î¹Îºá½´</option><option value="gsw">Alemannisch</option><option value="gu">àª—à«àªœàª°àª¾àª¤à«€</option><option value="guc">wayuunaiki</option><option value="gur">farefare</option><option value="guw">gungbe</option><option value="gv">Gaelg</option><option value="ha">Hausa</option><option value="hak">å®¢å®¶èª / Hak-kÃ¢-ngÃ®</option><option value="haw">HawaiÊ»i</option><option value="he">×¢×‘×¨×™×ª</option><option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option><option value="hif">Fiji Hindi</option><option value="hif-latn">Fiji Hindi</option><option value="hil">Ilonggo</option><option value="hno">ÛÙ†Ø¯Ú©Ùˆ</option><option value="hr">hrvatski</option><option value="hrx">Hunsrik</option><option value="hsb">hornjoserbsce</option><option value="hsn">æ¹˜èª</option><option value="ht">KreyÃ²l ayisyen</option><option value="hu">magyar</option><option value="hu-formal">magyar (formal)</option><option value="hy">Õ°Õ¡ÕµÕ¥Ö€Õ¥Õ¶</option><option value="hyw">Ô±Ö€Õ¥Ö‚Õ´Õ¿Õ¡Õ°Õ¡ÕµÕ¥Ö€Õ§Õ¶</option><option value="ia">interlingua</option><option value="iba">Jaku Iban</option><option value="ibb">ibibio</option><option value="id">Bahasa Indonesia</option><option value="ie">Interlingue</option><option value="ig">Igbo</option><option value="igl">Igala</option><option value="ii">ê†‡ê‰™</option><option value="ik">IÃ±upiatun</option><option value="ike-cans">áƒá“„á’ƒá‘á‘á‘¦</option><option value="ike-latn">inuktitut</option><option value="ilo">Ilokano</option><option value="inh">Ğ³Ó€Ğ°Ğ»Ğ³Ó€Ğ°Ğ¹</option><option value="io">Ido</option><option value="is">Ã­slenska</option><option value="isv-cyrl">Ğ¼ĞµĞ´Ğ¶ÑƒÑĞ»Ğ¾Ğ²Ñ˜Ğ°Ğ½ÑĞºÑ‹</option><option value="isv-latn">medÅ¾uslovjansky</option><option value="it">italiano</option><option value="iu">áƒá“„á’ƒá‘á‘á‘¦ / inuktitut</option><option value="ja">æ—¥æœ¬èª</option><option value="jam">Patois</option><option value="jbo">la .lojban.</option><option value="jut">jysk</option><option value="jv">Jawa</option><option value="ka">áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜</option><option value="kaa">Qaraqalpaqsha</option><option value="kab">Taqbaylit</option><option value="kai">Karai-karai</option><option value="kbd">Ğ°Ğ´Ñ‹Ğ³ÑĞ±Ğ·Ñ</option><option value="kbd-cyrl">Ğ°Ğ´Ñ‹Ğ³ÑĞ±Ğ·Ñ</option><option value="kbp">KabÉ©yÉ›</option><option value="kcg">Tyap</option><option value="kea">kabuverdianu</option><option value="kg">Kongo</option><option value="kge">Kumoring</option><option value="khw">Ú©Ú¾ÙˆØ§Ø±</option><option value="ki">GÄ©kÅ©yÅ©</option><option value="kiu">KÄ±rmancki</option><option value="kjh">Ñ…Ğ°ĞºĞ°Ñ</option><option value="kjp">á€–á á€¯á€¶á€œá€­á€€á€º</option><option value="kk">Ò›Ğ°Ğ·Ğ°Ò›ÑˆĞ°</option><option value="kk-arab">Ù‚Ø§Ø²Ø§Ù‚Ø´Ø§ (ØªÙ´ÙˆØªÛ•)</option><option value="kk-cn">Ù‚Ø§Ø²Ø§Ù‚Ø´Ø§ (Ø¬Û‡Ù†Ú¯Ùˆ)</option><option value="kk-cyrl">Ò›Ğ°Ğ·Ğ°Ò›ÑˆĞ° (ĞºĞ¸Ñ€Ğ¸Ğ»)</option><option value="kk-kz">Ò›Ğ°Ğ·Ğ°Ò›ÑˆĞ° (ÒšĞ°Ğ·Ğ°Ò›ÑÑ‚Ğ°Ğ½)</option><option value="kk-latn">qazaqÅŸa (latÄ±n)</option><option value="kk-tr">qazaqÅŸa (TÃ¼rkÃ¯ya)</option><option value="kl">kalaallisut</option><option value="km">á—á¶áŸá¶ááŸ’á˜áŸ‚áš</option><option value="kn">à²•à²¨à³à²¨à²¡</option><option value="knc">Yerwa Kanuri</option><option value="ko">í•œêµ­ì–´</option><option value="ko-kp">ì¡°ì„ ë§</option><option value="koi">Ğ¿ĞµÑ€ĞµĞ¼ ĞºĞ¾Ğ¼Ğ¸</option><option value="kr">kanuri</option><option value="krc">ĞºÑŠĞ°Ñ€Ğ°Ñ‡Ğ°Ğ¹-Ğ¼Ğ°Ğ»ĞºÑŠĞ°Ñ€</option><option value="kri">Krio</option><option value="krj">Kinaray-a</option><option value="krl">karjal</option><option value="ks">à¤•à¥‰à¤¶à¥à¤° / Ú©Ù²Ø´ÙØ±</option><option value="ks-arab">Ú©Ù²Ø´ÙØ±</option><option value="ks-deva">à¤•à¥‰à¤¶à¥à¤°</option><option value="ksh">Ripoarisch</option><option value="ksw">á€…á€¾á€®á¤</option><option value="ku">kurdÃ®</option><option value="ku-arab">Ú©ÙˆØ±Ø¯ÛŒ (Ø¹Û•Ø±Û•Ø¨ÛŒ)</option><option value="ku-latn">kurdÃ® (latÃ®nÃ®)</option><option value="kum">ĞºÑŠÑƒĞ¼ÑƒĞºÑŠ</option><option value="kus">KÊ‹saal</option><option value="kv">ĞºĞ¾Ğ¼Ğ¸</option><option value="kw">kernowek</option><option value="ky">ĞºÑ‹Ñ€Ğ³Ñ‹Ğ·Ñ‡Ğ°</option><option value="la">Latina</option><option value="lad">Ladino</option><option value="lb">LÃ«tzebuergesch</option><option value="lbe">Ğ»Ğ°ĞºĞºÑƒ</option><option value="lez">Ğ»ĞµĞ·Ğ³Ğ¸</option><option value="lfn">Lingua Franca Nova</option><option value="lg">Luganda</option><option value="li">Limburgs</option><option value="lij">Ligure</option><option value="liv">LÄ«vÃµ kÄ“Ä¼</option><option value="lki">Ù„Û•Ú©ÛŒ</option><option value="lld">Ladin</option><option value="lmo">lombard</option><option value="ln">lingÃ¡la</option><option value="lo">àº¥àº²àº§</option><option value="loz">Silozi</option><option value="lrc">Ù„ÛŠØ±ÛŒ Ø´ÙˆÙ…Ø§Ù„ÛŒ</option><option value="lt">lietuviÅ³</option><option value="ltg">latgaÄ¼u</option><option value="lua">ciluba</option><option value="lus">Mizo Å£awng</option><option value="luz">Ù„Ø¦Ø±ÛŒ Ø¯ÙˆÙ™Ù…ÛŒÙ†ÛŒ</option><option value="lv">latvieÅ¡u</option><option value="lzh">æ–‡è¨€</option><option value="lzz">Lazuri</option><option value="mad">MadhurÃ¢</option><option value="mag">à¤®à¤—à¤¹à¥€</option><option value="mai">à¤®à¥ˆà¤¥à¤¿à¤²à¥€</option><option value="map-bms">Basa Banyumasan</option><option value="mdf">Ğ¼Ğ¾ĞºÑˆĞµĞ½ÑŒ</option><option value="mg">Malagasy</option><option value="mhr">Ğ¾Ğ»Ñ‹Ğº Ğ¼Ğ°Ñ€Ğ¸Ğ¹</option><option value="mi">MÄori</option><option value="min">Minangkabau</option><option value="mk">Ğ¼Ğ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸</option><option value="ml">à´®à´²à´¯à´¾à´³à´‚</option><option value="mn">Ğ¼Ğ¾Ğ½Ğ³Ğ¾Ğ»</option><option value="mnc">manju gisun</option><option value="mnc-latn">manju gisun</option><option value="mnc-mong">á ®á  á ¨á µá¡  á¡¤á¡³á °á¡ á ¨</option><option value="mni">ê¯ƒê¯¤ê¯‡ê¯© ê¯‚ê¯£ê¯Ÿ</option><option value="mnw">á€˜á€¬á€á€¬á€™á€”á€º</option><option value="mo">Ğ¼Ğ¾Ğ»Ğ´Ğ¾Ğ²ĞµĞ½ÑÑĞºÑ</option><option value="mos">moore</option><option value="mr">à¤®à¤°à¤¾à¤ à¥€</option><option value="mrh">Mara</option><option value="mrj">ĞºÑ‹Ñ€Ñ‹Ğº Ğ¼Ğ°Ñ€Ñ‹</option><option value="ms">Bahasa Melayu</option><option value="ms-arab">Ø¨Ù‡Ø§Ø³ Ù…Ù„Ø§ÙŠÙˆ</option><option value="mt">Malti</option><option value="mui">Baso Palembang</option><option value="mwl">MirandÃ©s</option><option value="my">á€™á€¼á€”á€ºá€™á€¬á€˜á€¬á€á€¬</option><option value="myv">ÑÑ€Ğ·ÑĞ½ÑŒ</option><option value="mzn">Ù…Ø§Ø²ÙØ±ÙˆÙ†ÛŒ</option><option value="na">Dorerin Naoero</option><option value="nah">NÄhuatl</option><option value="nan">é–©å—èª / BÃ¢n-lÃ¢m-gÃº</option><option value="nan-hant">é–©å—èªï¼ˆå‚³çµ±æ¼¢å­—ï¼‰</option><option value="nan-latn-pehoeji">BÃ¢n-lÃ¢m-gÃº (PeÌh-Åe-jÄ«)</option><option value="nan-latn-tailo">BÃ¢n-lÃ¢m-gÃº (TÃ¢i-lÃ´)</option><option value="nap">Napulitano</option><option value="nb">norsk bokmÃ¥l</option><option value="nds">PlattdÃ¼Ã¼tsch</option><option value="nds-nl">Nedersaksies</option><option value="ne">à¤¨à¥‡à¤ªà¤¾à¤²à¥€</option><option value="new">à¤¨à¥‡à¤ªà¤¾à¤² à¤­à¤¾à¤·à¤¾</option><option value="nia">Li Niha</option><option value="nit">à°•à±Šà°²à°¾à°®à°¿</option><option value="niu">NiuÄ“</option><option value="nl">Nederlands</option><option value="nl-informal">Nederlands (informeel)</option><option value="nmz">nawdm</option><option value="nn">norsk nynorsk</option><option value="nod">á¨£á©¤á©´á¨¾á©®á©¬á©¥á¨¦</option><option value="nog">Ğ½Ğ¾Ğ³Ğ°Ğ¹ÑˆĞ°</option><option value="nov">Novial</option><option value="nqo">ß’ßß</option><option value="nr">isiNdebele seSewula</option><option value="nrm">Nouormand</option><option value="nso">Sesotho sa Leboa</option><option value="nup">Nupe</option><option value="nv">DinÃ© bizaad</option><option value="ny">Chi-Chewa</option><option value="nyn">runyankore</option><option value="nyo">Orunyoro</option><option value="nys">Nyunga</option><option value="oc">occitan</option><option value="ojb">Ojibwemowin</option><option value="olo">livvinkarjala</option><option value="om">Oromoo</option><option value="or">à¬“à¬¡à¬¼à¬¿à¬†</option><option value="os">Ğ¸Ñ€Ğ¾Ğ½</option><option value="pa">à¨ªà©°à¨œà¨¾à¨¬à©€</option><option value="pag">Pangasinan</option><option value="pam">Kapampangan</option><option value="pap">Papiamentu</option><option value="pcd">Picard</option><option value="pcm">NaijÃ¡</option><option value="pdc">Deitsch</option><option value="pdt">Plautdietsch</option><option value="pfl">PÃ¤lzisch</option><option value="pi">à¤ªà¤¾à¤²à¤¿</option><option value="pih">Norfuk / Pitkern</option><option value="pl">polski</option><option value="pms">PiemontÃ¨is</option><option value="pnb">Ù¾Ù†Ø¬Ø§Ø¨ÛŒ</option><option value="pnt">Î Î¿Î½Ï„Î¹Î±ÎºÎ¬</option><option value="prg">prÅ«siskan</option><option value="ps">Ù¾ÚšØªÙˆ</option><option value="pt">portuguÃªs</option><option value="pt-br">portuguÃªs do Brasil</option><option value="pwn">pinayuanan</option><option value="qqq">Message documentation</option><option value="qu">Runa Simi</option><option value="qug">Runa shimi</option><option value="rgn">RumagnÃ´l</option><option value="rif">Tarifit</option><option value="rki">á€›á€á€­á€¯á€„á€º</option><option value="rm">rumantsch</option><option value="rmc">romaÅˆi Ähib</option><option value="rmy">romani Ähib</option><option value="rn">ikirundi</option><option value="ro">romÃ¢nÄƒ</option><option value="roa-tara">tarandÃ­ne</option><option value="rsk">Ñ€ÑƒÑĞºĞ¸</option><option value="ru">Ñ€ÑƒÑÑĞºĞ¸Ğ¹</option><option value="rue">Ñ€ÑƒÑĞ¸Ğ½ÑŒÑĞºÑ‹Ğ¹</option><option value="rup">armÃ£neashti</option><option value="ruq">VlÄƒheÅŸte</option><option value="ruq-cyrl">Ğ’Ğ»Ğ°Ñ…ĞµÑÑ‚Ğµ</option><option value="ruq-latn">VlÄƒheÅŸte</option><option value="rut">Ğ¼Ñ‹Ñ…Ğ°Ó€Ğ±Ğ¸ÑˆĞ´Ñ‹</option><option value="rw">Ikinyarwanda</option><option value="ryu">ã†ã¡ãªãƒ¼ãã¡</option><option value="sa">à¤¸à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤®à¥</option><option value="sah">ÑĞ°Ñ…Ğ° Ñ‚Ñ‹Ğ»Ğ°</option><option value="sat">á±¥á±Ÿá±±á±›á±Ÿá±²á±¤</option><option value="sc">sardu</option><option value="scn">sicilianu</option><option value="sco">Scots</option><option value="sd">Ø³Ù†ÚŒÙŠ</option><option value="sdc">Sassaresu</option><option value="sdh">Ú©ÙˆØ±Ø¯ÛŒ Ø®ÙˆØ§Ø±Ú¯</option><option value="se">davvisÃ¡megiella</option><option value="se-fi">davvisÃ¡megiella (Suoma bealde)</option><option value="se-no">davvisÃ¡megiella (Norgga bealde)</option><option value="se-se">davvisÃ¡megiella (RuoÅ§a bealde)</option><option value="sei">Cmique Itom</option><option value="ses">Koyraboro Senni</option><option value="sg">SÃ¤ngÃ¶</option><option value="sgs">Å¾emaitÄ—Å¡ka</option><option value="sh">srpskohrvatski / ÑÑ€Ğ¿ÑĞºĞ¾Ñ…Ñ€Ğ²Ğ°Ñ‚ÑĞºĞ¸</option><option value="sh-cyrl">ÑÑ€Ğ¿ÑĞºĞ¾Ñ…Ñ€Ğ²Ğ°Ñ‚ÑĞºĞ¸ (Ñ›Ğ¸Ñ€Ğ¸Ğ»Ğ¸Ñ†Ğ°)</option><option value="sh-latn">srpskohrvatski (latinica)</option><option value="shi">Taclá¸¥it</option><option value="shn">á½á‚ƒá‚‡á€á‚ƒá‚‡á€á‚†á€¸ </option><option value="shy">tacawit</option><option value="shy-latn">tacawit</option><option value="si">à·ƒà·’à¶‚à·„à¶½</option><option value="sjd">ĞºÓ£Ğ»Ğ»Ñ‚ ÑĞ°Ì„Ğ¼ÑŒ ĞºÓ£Ğ»Ğ»</option><option value="sje">bidumsÃ¡megiella</option><option value="sk">slovenÄina</option><option value="skr">Ø³Ø±Ø§Ø¦ÛŒÚ©ÛŒ</option><option value="skr-arab">Ø³Ø±Ø§Ø¦ÛŒÚ©ÛŒ</option><option value="sl">slovenÅ¡Äina</option><option value="sli">SchlÃ¤sch</option><option value="sm">Gagana Samoa</option><option value="sma">Ã¥arjelsaemien</option><option value="smn">anarÃ¢Å¡kielÃ¢</option><option value="sms">nuÃµrttsÃ¤Ã¤Ê¹mÇ©iÃµll</option><option value="sn">chiShona</option><option value="so">Soomaaliga</option><option value="sq">shqip</option><option value="sr">ÑÑ€Ğ¿ÑĞºĞ¸ / srpski</option><option value="sr-ec">ÑÑ€Ğ¿ÑĞºĞ¸ (Ñ›Ğ¸Ñ€Ğ¸Ğ»Ğ¸Ñ†Ğ°)</option><option value="sr-el">srpski (latinica)</option><option value="srn">Sranantongo</option><option value="sro">sardu campidanesu</option><option value="ss">SiSwati</option><option value="st">Sesotho</option><option value="stq">Seeltersk</option><option value="sty">ÑĞµĞ±ĞµÑ€Ñ‚Ğ°Ñ‚Ğ°Ñ€</option><option value="su">Sunda</option><option value="sv">svenska</option><option value="sw">Kiswahili</option><option value="syl">ê ê ¤ê Ÿê ê ¤</option><option value="szl">Å›lÅ¯nski</option><option value="szy">Sakizaya</option><option value="ta">à®¤à®®à®¿à®´à¯</option><option value="tay">Tayal</option><option value="tcy">à²¤à³à²³à³</option><option value="tdd">á¥–á¥­á¥° á¥–á¥¬á¥² á¥‘á¥¨á¥’á¥°</option><option value="te">à°¤à±†à°²à±à°—à±</option><option value="tet">tetun</option><option value="tg">Ñ‚Ğ¾Ò·Ğ¸ĞºÓ£</option><option value="tg-cyrl">Ñ‚Ğ¾Ò·Ğ¸ĞºÓ£</option><option value="tg-latn">tojikÄ«</option><option value="th">à¹„à¸—à¸¢</option><option value="ti">á‰µáŒáˆ­áŠ›</option><option value="tig">á‰µáŒáˆ¬</option><option value="tk">TÃ¼rkmenÃ§e</option><option value="tl">Tagalog</option><option value="tly">tolÄ±ÅŸi</option><option value="tn">Setswana</option><option value="to">lea faka-Tonga</option><option value="tok">toki pona</option><option value="tpi">Tok Pisin</option><option value="tr">TÃ¼rkÃ§e</option><option value="tru">á¹ªuroyo</option><option value="trv">Seediq</option><option value="ts">Xitsonga</option><option value="tt">Ñ‚Ğ°Ñ‚Ğ°Ñ€Ñ‡Ğ° / tatarÃ§a</option><option value="tt-cyrl">Ñ‚Ğ°Ñ‚Ğ°Ñ€Ñ‡Ğ°</option><option value="tt-latn">tatarÃ§a</option><option value="ttj">Orutooro</option><option value="tum">chiTumbuka</option><option value="tw">Twi</option><option value="ty">reo tahiti</option><option value="tyv">Ñ‚Ñ‹Ğ²Ğ° Ğ´Ñ‹Ğ»</option><option value="tzm">âµœâ´°âµâ´°âµ£âµ‰âµ–âµœ</option><option value="udm">ÑƒĞ´Ğ¼ÑƒÑ€Ñ‚</option><option value="ug">Ø¦Û‡ÙŠØºÛ‡Ø±Ú†Û• / Uyghurche</option><option value="ug-arab">Ø¦Û‡ÙŠØºÛ‡Ø±Ú†Û•</option><option value="ug-latn">Uyghurche</option><option value="uk">ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option><option value="ur">Ø§Ø±Ø¯Ùˆ</option><option value="uz">oÊ»zbekcha / ÑĞ·Ğ±ĞµĞºÑ‡Ğ°</option><option value="ve">Tshivenda</option><option value="vec">vÃ¨neto</option><option value="vep">vepsÃ¤n kelâ€™</option><option value="vi">Tiáº¿ng Viá»‡t</option><option value="vls">West-Vlams</option><option value="vmf">MainfrÃ¤nkisch</option><option value="vmw">emakhuwa</option><option value="vo">VolapÃ¼k</option><option value="vot">VaÄÄa</option><option value="vro">vÃµro</option><option value="wa">walon</option><option value="wal">wolaytta</option><option value="war">Winaray</option><option value="wls">FakaÊ»uvea</option><option value="wo">Wolof</option><option value="wuu">å´è¯­</option><option value="wuu-hans">å´è¯­ï¼ˆç®€ä½“ï¼‰</option><option value="wuu-hant">å³èªï¼ˆæ­£é«”ï¼‰</option><option value="xal">Ñ…Ğ°Ğ»ÑŒĞ¼Ğ³</option><option value="xh">isiXhosa</option><option value="xmf">áƒ›áƒáƒ áƒ’áƒáƒšáƒ£áƒ áƒ˜</option><option value="xsy">saisiyat</option><option value="yi">×™×™Ö´×“×™×©</option><option value="yo">YorÃ¹bÃ¡</option><option value="yrl">Nháº½áº½gatÃº</option><option value="yue">ç²µèª</option><option value="yue-hans">ç²µè¯­ï¼ˆç®€ä½“ï¼‰</option><option value="yue-hant">ç²µèªï¼ˆç¹é«”ï¼‰</option><option value="za">Vahcuengh</option><option value="zea">ZeÃªuws</option><option value="zgh">âµœâ´°âµâ´°âµ£âµ‰âµ–âµœ âµœâ´°âµâ´°âµ¡â´°âµ¢âµœ</option><option value="zh">ä¸­æ–‡</option><option value="zh-cn">ä¸­æ–‡ï¼ˆä¸­å›½å¤§é™†ï¼‰</option><option value="zh-hans">ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰</option><option value="zh-hant">ä¸­æ–‡ï¼ˆç¹é«”ï¼‰</option><option value="zh-hk">ä¸­æ–‡ï¼ˆé¦™æ¸¯ï¼‰</option><option value="zh-mo">ä¸­æ–‡ï¼ˆæ¾³é–€ï¼‰</option><option value="zh-my">ä¸­æ–‡ï¼ˆé©¬æ¥è¥¿äºšï¼‰</option><option value="zh-sg">ä¸­æ–‡ï¼ˆæ–°åŠ å¡ï¼‰</option><option value="zh-tw">ä¸­æ–‡ï¼ˆè‡ºç£ï¼‰</option><option value="zu">isiZulu</option></select><input id="languageselector-commit-1" style="" type="submit" value="set"></form></span></div>
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">MPI</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Alliance Doc</div>
		<div id="contentSub"><div id="mw-content-subtitle"></div></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="https://docs.alliancecan.ca/mediawiki/index.php?title=Special:Translate&amp;group=page-MPI&amp;action=page&amp;filter=&amp;language=fr">translated version</a></span> of the page <a href="/wiki/MPI" title="MPI">MPI</a> and the translation is 100% complete.</div><div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="/wiki/MPI" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="MPI (100% translated)" lang="en" dir="ltr">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="fr" dir="ltr">franÃ§ais</span></li></ul></div>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction_Ã _la_programmation_parallÃ¨le"><span class="tocnumber">1</span> <span class="toctext">Introduction Ã  la programmation parallÃ¨le</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Qu&#39;est-ce_que_MPI?"><span class="tocnumber">2</span> <span class="toctext">Qu'est-ce que MPI?</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Principes_de_base"><span class="tocnumber">3</span> <span class="toctext">Principes de base</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#ModÃ¨le_SPMD"><span class="tocnumber">3.1</span> <span class="toctext">ModÃ¨le SPMD</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Cadre_d&#39;exÃ©cution"><span class="tocnumber">3.2</span> <span class="toctext">Cadre d'exÃ©cution</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Fonctions_rank_et_size"><span class="tocnumber">3.3</span> <span class="toctext">Fonctions <i>rank</i> et <i>size</i></span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Communication"><span class="tocnumber">3.4</span> <span class="toctext">Communication</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Ã‰viter_les_impasses"><span class="tocnumber">3.5</span> <span class="toctext">Ã‰viter les impasses</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Interblocage"><span class="tocnumber">3.5.1</span> <span class="toctext">Interblocage</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Situation_Ã _risque"><span class="tocnumber">3.5.2</span> <span class="toctext">Situation Ã  risque</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Code_fiable"><span class="tocnumber">3.5.3</span> <span class="toctext">Code fiable</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Enveloppes_de_compilateurs"><span class="tocnumber">4</span> <span class="toctext">Enveloppes de compilateurs</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Autres_considÃ©rations"><span class="tocnumber">5</span> <span class="toctext">Autres considÃ©rations</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Lectures_recommandÃ©es"><span class="tocnumber">6</span> <span class="toctext">Lectures recommandÃ©es</span></a></li>
</ul>
</div>

<h2><span id="Introduction_.C3.A0_la_programmation_parall.C3.A8le"></span><span class="mw-headline" id="Introduction_Ã _la_programmation_parallÃ¨le">Introduction Ã  la programmation parallÃ¨le</span></h2>
<blockquote class="templatequote"><p>To pull a bigger wagon it is easier to add more oxen than to find (or build) a bigger ox. [traduction libre, <i>Pour tirer une plus grosse charrette, il est plus facile d'ajouter des bÅ“ufs que de trouver un plus gros bÅ“uf.</i>]</p><div class="templatequotecite">&#8212;Gropp, Lusk &amp; Skjellum,&#160;<cite>Using MPI</cite></div></blockquote>
<p>Pour construire une maison le plus rapidement possible, on n'engage pas la personne qui peut faire tout le travail plus rapidement que les autres. On distribue plutÃ´t le travail parmi autant de personnes qu'il faut pour que les tÃ¢ches se fassent en mÃªme temps, d'une maniÃ¨re <i>parallÃ¨le</i>.  Cette solution est valide aussi pour les problÃ¨mes numÃ©riques. Comme il y a une limite Ã  vitesse d'exÃ©cution d'un processeur, la fragmentation du problÃ¨me permet d'assigner des tÃ¢ches Ã  exÃ©cuter en parallÃ¨le par plusieurs processeurs. Cette approche sert autant la vitesse du calcul que les exigences Ã©levÃ©es en mÃ©moire.
</p><p>L'aspect le plus important dans la conception et le dÃ©veloppement de programmes parallÃ¨les est la communication. Ce sont les exigences de la communication qui crÃ©ent la complexitÃ©. Pour que plusieurs travailleurs accomplissent une tÃ¢che en parallÃ¨le, ils doivent pouvoir communiquer. De la mÃªme maniÃ¨re, plusieurs processus logiciels qui travaillent chacun sur une partie d'un problÃ¨me ont besoin de valeurs qui sont ou seront calculÃ©es par d'autres processus.
</p><p>Il y a deux modÃ¨les principaux en programmation parallÃ¨le&#160;: les programmes Ã  mÃ©moire partagÃ©e et les programmes Ã  mÃ©moire distribuÃ©e.
</p><p>Dans le cas d'une parallÃ©lisation avec mÃ©moire partagÃ©e (SMP pour <i>shared memory parallelism</i>), les processeurs voient tous la mÃªme image mÃ©moire, c'est-Ã -dire que la mÃ©moire peut Ãªtre adressÃ©e globalement et tous les processeurs y ont accÃ¨s. Sur une machine SMP, les processeurs communiquent de faÃ§on implicite; chacun des processeurs peut lire et Ã©crire en mÃ©moire et les autres processeurs peuvent y accÃ©der et les utiliser. Le dÃ©fi ici est la cohÃ©rence des donnÃ©es puisqu'il faut veiller Ã  ce que les donnÃ©es ne soient modifiÃ©es que par un seul processus Ã  la fois.
</p><p><br />
</p>
<figure class="mw-halign-center" typeof="mw:File/Frame"><a href="/wiki/File:Smp.png" class="mw-file-description"><img src="/mediawiki/images/5/54/Smp.png" decoding="async" width="188" height="98" class="mw-file-element" /></a><figcaption><b>Figure 1</b>: <i>Architecture Ã  mÃ©moire partagÃ©e</i></figcaption></figure>
<p>Pour sa part, la parallÃ©lisation avec mÃ©moire distribuÃ©e s'apparente Ã  une grappe, un ensemble d'ordinateurs reliÃ©s par un rÃ©seau de communication dÃ©diÃ©.  Dans ce modÃ¨le, les processus possÃ¨dent chacun leur propre mÃ©moire et ils peuvent Ãªtre exÃ©cutÃ©s sur plusieurs ordinateurs distincts. Les processus communiquent par messages&#160;:  un processus utilise une fonction pour envoyer un message et l'autre processus utilise une autre fonction pour recevoir le message. Le principal dÃ©fi ici est d'avoir le moins de communications possible.  MÃªme les rÃ©seaux avec les connexions physiques les plus rapides transmettent les donnÃ©es beaucoup plus lentement qu'un simple ordinateur&#160;: l'accÃ¨s mÃ©moire se mesure habituellement en centiÃ¨mes de nanosecondes alors que les rÃ©seaux y accÃ¨dent gÃ©nÃ©ralement en microsecondes.
</p>
<figure class="mw-halign-center" typeof="mw:File/Frame"><a href="/wiki/File:Cluster.png" class="mw-file-description"><img src="/mediawiki/images/7/7d/Cluster.png" decoding="async" width="440" height="234" class="mw-file-element" /></a><figcaption><b>Figure 2</b>: <i>Architecture Ã  grappes, mÃ©moire distribuÃ©e</i></figcaption></figure>
<p>Nous discuterons ici uniquement de la programmation avec mÃ©moire distribuÃ©e sur grappe, avec MPI.
</p>
<h2><span id="Qu.27est-ce_que_MPI.3F"></span><span class="mw-headline" id="Qu'est-ce_que_MPI?">Qu'est-ce que MPI?</span></h2>
<p>MPI (<i>message passing interface</i>) est en rÃ©alitÃ© une norme avec des sous-routines, fonctions, objets et autres Ã©lÃ©ments pour dÃ©velopper des programmes parallÃ¨les dans un environnement Ã  mÃ©moire distribuÃ©e. MPI est implÃ©mentÃ©e dans plusieurs bibliothÃ¨ques, notamment Open MPI, Intel MPI, MPICH et MVAPICH. La norme dÃ©crit comment MPI est appelÃ© par Fortran, C et C++, mais il existe aussi des interfaces pour plusieurs autres langages (Boost.MPI, mpi4py, Rmpi, etc.). La version MPI 3.0 ne prend plus en charge les interfaces C++, mais vous pouvez utiliser les interfaces C de C++ ou <a rel="nofollow" class="external text" href="https://www.boost.org/doc/libs/1_71_0/doc/html/mpi.html">Boost MPI</a>. Les exemples avec Python utilisent le MPI du paquet Python <a href="/wiki/MPI4py/fr" title="MPI4py/fr">MPI4py</a>.
</p><p>Puisque MPI est une norme ouverte sans droits exclusifs, un programme MPI peut facilement Ãªtre portÃ© sur plusieurs ordinateurs diffÃ©rents. Les programmes MPI peuvent Ãªtre exÃ©cutÃ©s concurremment sur plusieurs cÅ“urs Ã  la fois et offrent une parallÃ©lisation efficace, permettant une bonne <a href="/wiki/Scalability/fr" title="Scalability/fr">scalabilitÃ©</a>. Puisque chaque processus possÃ¨de sa propre plage mÃ©moire, certaines opÃ©rations de dÃ©bogage s'en trouvent simplifiÃ© es; en ayant des plages mÃ©moire distinctes, les processus nâ€™auront aucun conflit dâ€™accÃ¨s Ã  la mÃ©moire comme c'est le cas en mÃ©moire partagÃ©e. Aussi, en prÃ©sence d'une erreur de segmentation, le fichier <i>core</i> rÃ©sultant peut Ãªtre traitÃ© par des outils standards de dÃ©bogage sÃ©rie. Le besoin de gÃ©rer la communication et la synchronisation de faÃ§on explicite donne par contre l'impression qu'un programme MPI est plus complexe qu'un autre programme oÃ¹ la gestion de la communication serait implicite. Il est cependant recommandÃ© de restreindre les communications entre processus pour favoriser la vitesse de calcul d'un programme MPI.
</p><p>Nous verrons plus loin quelques-uns de ces points et proposerons des stratÃ©gies de solution; les rÃ©fÃ©rences mentionnÃ©es au bas de cette page sont aussi Ã  consulter.
</p>
<h2><span class="mw-headline" id="Principes_de_base">Principes de base</span></h2>
<p>Dans ce tutoriel, nous prÃ©senterons le dÃ©veloppement d'un code MPI en C, C++, Fortran et Python, mais les diffÃ©rents principes de communication s'appliquent Ã  tout langage qui possÃ¨de une interface avec MPI. Notre but ici est de parallÃ©liser le programme simple "Hello World" utilisÃ© dans les exemples.
</p>
<form id="tabs-inputform" class="tabs tabs-inputform" action="#"></form><div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-1-0" name="tabs-1" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-1-1" name="tabs-1" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-1-1" data-tabpos="1">C</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-1-2" name="tabs-1" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-1-2" data-tabpos="2">C++</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-1-3" name="tabs-1" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-1-3" data-tabpos="3">Fortran</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-1-4" name="tabs-1" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-1-4" data-tabpos="4">Python</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> hello.c</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23include+%3Cstdio.h%3E%0A+%0A+int+main%28%29%0A+%7B%0A+++++printf%28%22Hello%2C+world%21%5Cn%22%29%3B%0A+%0A+++++return%280%29%3B%0A+%7D" />
<input type="hidden" name="filename" value="hello.c" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="w"> </span>
<span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello, world!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> hello.cpp</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23include+%3Ciostream%3E%0Ausing+namespace+std%3B%0A%0Aint+main%28%29%0A%7B%0A++++cout+%3C%3C+%22Hello%2C+world%21%22+%3C%3C+endl%3B%0A++++return+0%3B%0A%7D" />
<input type="hidden" name="filename" value="hello.cpp" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Hello, world!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-3">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> hello.f90</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="program+hello%0A+%0A+++++print+%2A%2C+%27Hello%2C+world%21%27%0A+%0A+end+program+hello" />
<input type="hidden" name="filename" value="hello.f90" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="k">program </span><span class="n">hello</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Hello, world!&#39;</span>
<span class="w"> </span>
<span class="w"> </span><span class="k">end program </span><span class="n">hello</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-4">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> hello.py</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="print%28%27Hello%2C+world%21%27%29" />
<input type="hidden" name="filename" value="hello.py" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello, world!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<p>Pour compiler et exÃ©cuter le programme&#160;:
</p>
<pre>[~]$ vi hello.c
[~]$ cc -Wall hello.c -o hello
[~]$ ./hello 
Hello, world!
</pre>
<h3><span id="Mod.C3.A8le_SPMD"></span><span class="mw-headline" id="ModÃ¨le_SPMD">ModÃ¨le SPMD</span></h3>
<p>La parallÃ©lisation MPI utilise le modÃ¨le d'exÃ©cution SPMD (<i>single program multiple data</i>), oÃ¹ plusieurs instances s'exÃ©cutent en mÃªme temps. Chacune des instances est un processus auquel est assignÃ© un numÃ©ro unique qui reprÃ©sente son rang; l'instance peut obtenir son rang lorsqu'elle est lancÃ©e. Afin d'attribuer un comportement diffÃ©rent Ã  chaque instance, on utilisera habituellement un Ã©noncÃ© conditionnel <i>if</i>.
</p>
<figure class="mw-halign-center" typeof="mw:File/Frame"><a href="/wiki/File:SPMD_model.png" class="mw-file-description"><img src="/mediawiki/images/8/8a/SPMD_model.png" decoding="async" width="626" height="171" class="mw-file-element" /></a><figcaption><b>Figure 3</b>: <i>ContrÃ´le de comportements divergents</i></figcaption></figure>
<h3><span id="Cadre_d.27ex.C3.A9cution"></span><span class="mw-headline" id="Cadre_d'exÃ©cution">Cadre d'exÃ©cution</span></h3>
<p>Un programme MPI doit comprendre le fichier d'en-tÃªte appropriÃ© ou utiliser le modÃ¨le appropriÃ© (<tt>mpi.h</tt> pour C/C++, <tt>mpif.h</tt>, <tt>use mpi</tt>, ou <tt>use mpi_f08</tt> pour Fortran, sachant que <tt>mpif.h</tt> est fortement dÃ©conseillÃ© et <tt>mpi_f08</tt> recommandÃ© pour Fortran 2008). Il peut donc Ãªtre compilÃ© puis reliÃ© Ã  l'implÃ©mentation MPI de votre choix. Dans la plupart des cas, l'implÃ©mentation possÃ¨de un script pratique qui enveloppe l'appel au compilateur (<i>compiler wrapper</i>) et qui configure adÃ©quatement <code>include</code> et <code>lib</code>, entre autres pour relier les indicateurs. Nos exemples utilisent les scripts de compilation suivants&#160;: 
</p>
<ul><li>pour le C, <tt>mpicc</tt></li>
<li>pour le Fortran, <tt>mpifort</tt> (recommandÃ©) ou <tt>mpif90</tt></li>
<li>pour le C++, <tt>mpiCC</tt> ou <tt>mpicxx</tt></li></ul>
<p>Une fois les instances lancÃ©es, elles doivent se coordonner, ce qui se fait en tout premier lieu par l'appel d'une fonction d'initialisation&#160;:
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-2-0" name="tabs-2" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-2-1" name="tabs-2" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-2-1" data-tabpos="1">C</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-2-2" name="tabs-2" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-2-2" data-tabpos="2">Boost (C++)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-2-3" name="tabs-2" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-2-3" data-tabpos="3">Fortran</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-2-4" name="tabs-2" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-2-4" data-tabpos="4">Fortran 2008</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-2-5" name="tabs-2" class="tabs-input tabs-input-5" /><label class="tabs-label" for="tabs-input-2-5" data-tabpos="5">Python (mpi4py)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">MPI_Init</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">[]);</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-2">
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="n">boost</span><span class="o">::</span><span class="n">mpi</span><span class="o">::</span><span class="n">environment</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**&amp;</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-3">
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="n">MPI_INIT</span><span class="p">(</span><span class="n">IERR</span><span class="p">)</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">IERR</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-4">
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="n">MPI_Init</span><span class="p">(</span><span class="n">ierr</span><span class="p">)</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">OPTIONAL</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">OUT</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ierr</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-5">
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># importing automatically initializes MPI with mpi4py</span>
<span class="n">MPI</span><span class="o">.</span><span class="n">Init</span><span class="p">()</span>
</pre></div>
</div>
</div></div>
<p>En C, les arguments de <code>MPI_Init</code>  pointent vers les variables  <code>argc</code> et <code>argv</code> qui sont les arguments en ligne de commande. Comme pour toutes les fonctions MPI en C, la valeur retournÃ©e reprÃ©sente l'erreur de la fonction. En Fortran, les routines MPI retournent l'erreur dans l'argument <code>IERR</code>, ce qui est optionnel avec  <tt>use mpi_f08</tt>.
</p><p>On doit aussi appeler la fonction <code>MPI_Finalize</code> pour faire un nettoyage avant la fin du programme, le cas Ã©chÃ©ant&#160;:
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-3-0" name="tabs-3" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-3-1" name="tabs-3" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-3-1" data-tabpos="1">C</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-3-2" name="tabs-3" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-3-2" data-tabpos="2">Boost (C++)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-3-3" name="tabs-3" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-3-3" data-tabpos="3">Fortran</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-3-4" name="tabs-3" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-3-4" data-tabpos="4">Fortran 2008</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-3-5" name="tabs-3" class="tabs-input tabs-input-5" /><label class="tabs-label" for="tabs-input-3-5" data-tabpos="5">Python (mpi4py)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">MPI_Finalize</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-2">
<p>Nothing needed
</p>
</div>
<div class="tabs-content tabs-content-3">
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="n">MPI_FINALIZE</span><span class="p">(</span><span class="n">IERR</span><span class="p">)</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">IERR</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-4">
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="n">MPI_Finalize</span><span class="p">(</span><span class="n">ierr</span><span class="p">)</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">OPTIONAL</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">OUT</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ierr</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-5">
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># mpi4py installs a termination hook so there is no need to explicitly call MPI.Finalize.</span>
<span class="n">MPI</span><span class="o">.</span><span class="n">Finalize</span><span class="p">()</span>
</pre></div>
</div>
</div></div>
<p>RÃ¨gle gÃ©nÃ©rale, il est recommandÃ© d'appeler <code>MPI_Init</code> au tout dÃ©but du programme et <code>MPI_Finalize</code> Ã  la toute fin.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-4-0" name="tabs-4" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-4-1" name="tabs-4" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-4-1" data-tabpos="1">C</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-4-2" name="tabs-4" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-4-2" data-tabpos="2">Boost (C++)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-4-3" name="tabs-4" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-4-3" data-tabpos="3">Fortran</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-4-4" name="tabs-4" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-4-4" data-tabpos="4">Fortran 2008</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-4-5" name="tabs-4" class="tabs-input tabs-input-5" /><label class="tabs-label" for="tabs-input-4-5" data-tabpos="5">Python (mpi4py)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello0.c</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23include+%3Cstdio.h%3E%0A%23include+%3Cmpi.h%3E%0A+%0Aint+main%28int+argc%2C+char+%2Aargv%5B%5D%29%0A%7B%0A++++MPI_Init%28%26argc%2C+%26argv%29%3B%0A+%0A++++printf%28%22Hello%2C+world%21%5Cn%22%29%3B%0A+%0A++++MPI_Finalize%28%29%3B%0A++++return%280%29%3B%0A%7D" />
<input type="hidden" name="filename" value="phello0.c" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mpi.h&gt;</span>
<span class="w"> </span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello, world!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">    </span><span class="n">MPI_Finalize</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello0.cpp</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23include+%3Ciostream%3E%0A%23include+%3Cboost%2Fmpi.hpp%3E%0Ausing+namespace+std%3B%0Ausing+namespace+boost%3B%0A%0Aint+main%28int+argc%2C+char+%2Aargv%5B%5D%29%0A%7B%0A++++mpi%3A%3Aenvironment+env%28argc%2C+argv%29%3B%0A++++cout+%3C%3C+%22Hello%2C+world%21%22+%3C%3C+endl%3B%0A++++return+0%3B%0A%7D" />
<input type="hidden" name="filename" value="phello0.cpp" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;boost/mpi.hpp&gt;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">boost</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">mpi</span><span class="o">::</span><span class="n">environment</span><span class="w"> </span><span class="n">env</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span>
<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Hello, world!&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-3">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello0.f90</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="program+phello0%0A+%0A+++++use+mpi%0A+++++implicit+none%0A+%0A+++++integer+%3A%3A+ierror%0A+%0A+++++call+MPI_INIT%28ierror%29%0A+++++print+%2A%2C+%27Hello%2C+world%21%27%0A+++++call+MPI_FINALIZE%28ierror%29%0A%0A+end+program+phello0" />
<input type="hidden" name="filename" value="phello0.f90" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="k">program </span><span class="n">phello0</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">use </span><span class="n">mpi</span>
<span class="w">     </span><span class="k">implicit none</span>
<span class="k"> </span>
<span class="k">     </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ierror</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_INIT</span><span class="p">(</span><span class="n">ierror</span><span class="p">)</span>
<span class="w">     </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Hello, world!&#39;</span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_FINALIZE</span><span class="p">(</span><span class="n">ierror</span><span class="p">)</span>

<span class="w"> </span><span class="k">end program </span><span class="n">phello0</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-4">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello0.f90</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="program+phello0%0A+%0A+++++use+mpi_f08%0A+++++implicit+none%0A+%0A+++++call+MPI_Init%28%29%0A+++++print+%2A%2C+%27Hello%2C+world%21%27%0A+++++call+MPI_Finalize%28%29%0A%0A+end+program+phello0" />
<input type="hidden" name="filename" value="phello0.f90" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="k">program </span><span class="n">phello0</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">use </span><span class="n">mpi_f08</span>
<span class="w">     </span><span class="k">implicit none</span>
<span class="k"> </span>
<span class="k">     call </span><span class="n">MPI_Init</span><span class="p">()</span>
<span class="w">     </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Hello, world!&#39;</span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_Finalize</span><span class="p">()</span>

<span class="w"> </span><span class="k">end program </span><span class="n">phello0</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-5">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello0.py</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="from+mpi4py+import+MPI%0Aprint%28%27Hello%2C+world%21%27%29" />
<input type="hidden" name="filename" value="phello0.py" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">from</span> <span class="nn">mpi4py</span> <span class="kn">import</span> <span class="n">MPI</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello, world!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<h3><span class="mw-headline" id="Fonctions_rank_et_size">Fonctions <i>rank</i> et <i>size</i></span></h3>
<p>Le programme pourrait Ãªtre exÃ©cutÃ© tel quel, mais le rÃ©sultat ne serait pas trÃ¨s convaincant puisque chacun des processus produirait le mÃªme message. Nous allons plutÃ´t faire en sorte que chaque processus fasse afficher la valeur de son rang et le nombre total de processus en opÃ©ration.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-5-0" name="tabs-5" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-5-1" name="tabs-5" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-5-1" data-tabpos="1">C</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-5-2" name="tabs-5" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-5-2" data-tabpos="2">Boost (C++)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-5-3" name="tabs-5" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-5-3" data-tabpos="3">Fortran</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-5-4" name="tabs-5" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-5-4" data-tabpos="4">Fortran 2008</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-5-5" name="tabs-5" class="tabs-input tabs-input-5" /><label class="tabs-label" for="tabs-input-5-5" data-tabpos="5">Python (mpi4py)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_Comm</span><span class="w"> </span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">nproc</span><span class="p">);</span>
<span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_Comm</span><span class="w"> </span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">myrank</span><span class="p">);</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-2">
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">mpi::communicator::size</span><span class="p">();</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">mpi::communicator::rank</span><span class="p">();</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-3">
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="n">MPI_COMM_SIZE</span><span class="p">(</span><span class="n">COMM</span><span class="p">,</span><span class="w"> </span><span class="n">NPROC</span><span class="p">,</span><span class="w"> </span><span class="n">IERR</span><span class="p">)</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">COMM</span><span class="p">,</span><span class="w"> </span><span class="n">NPROC</span><span class="p">,</span><span class="w"> </span><span class="n">IERR</span>
<span class="w"> </span>
<span class="w"> </span><span class="n">MPI_COMM_RANK</span><span class="p">(</span><span class="n">COMM</span><span class="p">,</span><span class="w"> </span><span class="n">RANK</span><span class="p">,</span><span class="w"> </span><span class="n">IERR</span><span class="p">)</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">COMM</span><span class="p">,</span><span class="w"> </span><span class="n">RANK</span><span class="p">,</span><span class="w"> </span><span class="n">IERR</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-4">
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w"> </span><span class="k">TYPE</span><span class="p">(</span><span class="n">MPI_Comm</span><span class="p">),</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">comm</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">OUT</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">size</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">OPTIONAL</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">OUT</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ierr</span>

<span class="w"> </span><span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w"> </span><span class="k">TYPE</span><span class="p">(</span><span class="n">MPI_Comm</span><span class="p">),</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">comm</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">OUT</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">rank</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">OPTIONAL</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">OUT</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ierr</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-5">
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span> <span class="n">MPI</span><span class="o">.</span><span class="n">Intracomm</span><span class="o">.</span><span class="n">Get_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

 <span class="n">MPI</span><span class="o">.</span><span class="n">Intracomm</span><span class="o">.</span><span class="n">Get_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>Le paramÃ¨tre  de sortie <tt>nproc</tt> est donnÃ© Ã  la fonction <tt>MPI_Comm_size</tt> afin d'obtenir le nombre de processus en opÃ©ration. De mÃªme, le paramÃ¨tre de sortie <tt>myrank</tt> est donnÃ© Ã  la fonction <tt>MPI_Comm_rank</tt> afin d'obtenir la valeur du rang du processus actuel. Le rang du premier processus a la valeur de 0 au lieu de 1; pour N processus, les valeurs de rang vont donc de 0 Ã  (N-1) inclusivement. L'argument  <tt>comm</tt> est un <i>communicateur</i>, soit un ensemble de processus pouvant s'envoyer entre eux des messages. Dans nos exemples, nous utilisons la valeur de <tt>MPI_COMM_WORLD</tt>, soit un communicateur prÃ©dÃ©fini par MPI et qui reprÃ©sente l'ensemble des processus lancÃ©s par la tÃ¢che. Nous n'abordons pas ici le sujet des communicateurs crÃ©Ã©s par programmation;  voyez plutÃ´t la liste des autres sujets en bas de page.
</p><p>Utilisons maintenant ces fonctions pour que chaque processus produise le rÃ©sultat voulu. Notez que, puisque les processus effectuent tous le mÃªme appel de fonction, il n'est pas nÃ©cessaire d'introduire des Ã©noncÃ©s conditionnels.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-6-0" name="tabs-6" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-6-1" name="tabs-6" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-6-1" data-tabpos="1">C</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-6-2" name="tabs-6" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-6-2" data-tabpos="2">Boost (C++)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-6-3" name="tabs-6" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-6-3" data-tabpos="3">Fortran</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-6-4" name="tabs-6" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-6-4" data-tabpos="4">Fortran 2008</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-6-5" name="tabs-6" class="tabs-input tabs-input-5" /><label class="tabs-label" for="tabs-input-6-5" data-tabpos="5">Python (mpi4py)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello1.c</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23include+%3Cstdio.h%3E%0A+%23include+%3Cmpi.h%3E%0A+%0A+int+main%28int+argc%2C+char+%2Aargv%5B%5D%29%0A+%7B%0A+++++int+rank%2C+size%3B%0A+%0A+++++MPI_Init%28%26argc%2C+%26argv%29%3B%0A+++++MPI_Comm_rank%28MPI_COMM_WORLD%2C+%26rank%29%3B%0A+++++MPI_Comm_size%28MPI_COMM_WORLD%2C+%26size%29%3B%0A+%0A+++++printf%28%22Hello%2C+world%21+%22%0A+++++++++++++%22from+process+%25d+of+%25d%5Cn%22%2C+rank%2C+size%29%3B%0A+%0A+++++MPI_Finalize%28%29%3B%0A+++++return%280%29%3B%0A+%7D" />
<input type="hidden" name="filename" value="phello1.c" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="w"> </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mpi.h&gt;</span>
<span class="w"> </span>
<span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
<span class="w">     </span><span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rank</span><span class="p">);</span>
<span class="w">     </span><span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">size</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello, world! &quot;</span>
<span class="w">             </span><span class="s">&quot;from process %d of %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">MPI_Finalize</span><span class="p">();</span>
<span class="w">     </span><span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello1.cpp</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23include+%3Ciostream%3E%0A%23include+%3Cboost%2Fmpi.hpp%3E%0Ausing+namespace+std%3B%0Ausing+namespace+boost%3B%0A%0Aint+main%28int+argc%2C+char+%2Aargv%5B%5D%29%0A%7B%0A++++mpi%3A%3Aenvironment+env%28argc%2C+argv%29%3B%0A++++mpi%3A%3Acommunicator+world%3B%0A%0A++++cout+%3C%3C+%22Hello%2C+world%21+from+process+%22+%3C%3C+world.rank%28%29+%3C%3C+%22+of+%22+%3C%3C+world.size%28%29+%3C%3C+endl%3B%0A++++return+0%3B%0A%7D" />
<input type="hidden" name="filename" value="phello1.cpp" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;boost/mpi.hpp&gt;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">boost</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">mpi</span><span class="o">::</span><span class="n">environment</span><span class="w"> </span><span class="n">env</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span>
<span class="w">    </span><span class="n">mpi</span><span class="o">::</span><span class="n">communicator</span><span class="w"> </span><span class="n">world</span><span class="p">;</span>

<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Hello, world! from process &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">world</span><span class="p">.</span><span class="n">rank</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; of &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">world</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-3">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello1.f90</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="program+phello1%0A+%0A++++use+mpi%0A++++implicit+none%0A%0A++++integer+%3A%3A+rank%2C+size%2C+ierror%0A+%0A++++call+MPI_INIT%28ierror%29%0A++++call+MPI_COMM_SIZE%28MPI_COMM_WORLD%2C+size%2C+ierror%29%0A++++call+MPI_COMM_RANK%28MPI_COMM_WORLD%2C+rank%2C+ierror%29%0A+%0A++++print+%2A%2C+%27Hello+from+process+%27%2C+rank%2C+%27+of+%27%2C+size%0A+%0A++++call+MPI_FINALIZE%28ierror%29%0A+%0A+end+program+phello1" />
<input type="hidden" name="filename" value="phello1.f90" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="k">program </span><span class="n">phello1</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">use </span><span class="n">mpi</span>
<span class="w">    </span><span class="k">implicit none</span>

<span class="k">    </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">ierror</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_INIT</span><span class="p">(</span><span class="n">ierror</span><span class="p">)</span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_COMM_SIZE</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">ierror</span><span class="p">)</span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_COMM_RANK</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">ierror</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Hello from process &#39;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; of &#39;</span><span class="p">,</span><span class="w"> </span><span class="n">size</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_FINALIZE</span><span class="p">(</span><span class="n">ierror</span><span class="p">)</span>
<span class="w"> </span>
<span class="w"> </span><span class="k">end program </span><span class="n">phello1</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-4">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello1.f90</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="program+phello1%0A+%0A++++use+mpi_f08%0A++++implicit+none%0A+%0A++++integer+%3A%3A+rank%2C+size%0A+%0A++++call+MPI_Init%28%29%0A++++call+MPI_Comm_size%28MPI_COMM_WORLD%2C+size%29%0A++++call+MPI_Comm_rank%28MPI_COMM_WORLD%2C+rank%29%0A+%0A++++print+%2A%2C+%27Hello+from+process+%27%2C+rank%2C+%27+of+%27%2C+size%0A+%0A++++call+MPI_Finalize%28ierror%29%0A+%0A+end+program+phello1" />
<input type="hidden" name="filename" value="phello1.f90" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="k">program </span><span class="n">phello1</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">use </span><span class="n">mpi_f08</span>
<span class="w">    </span><span class="k">implicit none</span>
<span class="k"> </span>
<span class="k">    </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">size</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_Init</span><span class="p">()</span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">)</span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Hello from process &#39;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; of &#39;</span><span class="p">,</span><span class="w"> </span><span class="n">size</span>
<span class="w"> </span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_Finalize</span><span class="p">(</span><span class="n">ierror</span><span class="p">)</span>
<span class="w"> </span>
<span class="w"> </span><span class="k">end program </span><span class="n">phello1</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-5">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello1.py</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="from+mpi4py+import+MPI%0A+%0Acomm+%3D+MPI.COMM_WORLD%0Asize+%3D+comm.Get_size%28%29%0Arank+%3D+comm.Get_rank%28%29+%0A%0Aprint%28%27Hello+from+process+%25d+of+%25d%27%25%28rank%2C+size%29%29" />
<input type="hidden" name="filename" value="phello1.py" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">from</span> <span class="nn">mpi4py</span> <span class="kn">import</span> <span class="n">MPI</span>
 
<span class="n">comm</span> <span class="o">=</span> <span class="n">MPI</span><span class="o">.</span><span class="n">COMM_WORLD</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">Get_size</span><span class="p">()</span>
<span class="n">rank</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">Get_rank</span><span class="p">()</span> 

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello from process </span><span class="si">%d</span><span class="s1"> of </span><span class="si">%d</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">size</span><span class="p">))</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<p>Compilez maintenant ce programme et faites-le exÃ©cuter avec 2, 4 et 8 processus. Vous remarquerez que le rÃ©sultat produit par chacun des processus dÃ©pend de la valeur de ses variables locales et que le rÃ©sultat final est la concatÃ©nation de la sortie standard (<i>stdout</i>) de tous les processus. Vous constaterez sans doute que les sorties produites par les processus ne sont pas nÃ©cessairement ordonnÃ©es selon leur rang&#160;: il n'est pas possible de prÃ©voir l'ordre en sortie. 
[~]$ vi phello1.c 
[~]$ mpicc -Wall phello1.c -o phello1
[~]$ mpirun -np 4 ./phello1
Hello, world! from process 0 of 4
Hello, world! from process 2 of 4
Hello, world! from process 1 of 4
Hello, world! from process 3 of 4
</p><p><br />
Pour compiler avec Boost&#160;: 
</p>
<pre>[~]$ mpic++ --std=c++11 phello1.cpp -lboost_mpi-mt -lboost_serialization-mt -o phello1
</pre>
<p>Avec la version Python, vous n'avez pas besoin de compiler, mais vous pouvez exÃ©cuter avec
</p>
<pre>[~]$ mpirun -np 4 python phello1.py
</pre>
<h3><span class="mw-headline" id="Communication">Communication</span></h3>
<p>Nous avons maintenant une version parallÃ¨le de <i>Hello World</i>, mais sans communication entre les processus. Voyons ensuite cet aspect.
</p><p>Nous demandons Ã  chaque processus de transmettre au processus suivant le mot <i>hello</i>. Le processus de rang <tt>i</tt> envoie son message au processus de rang <tt>i+1</tt> et le dernier processus de rang <tt>N-1</tt> envoie son message au processus de rang  <tt>0</tt> pour boucler la boucle. ExprimÃ© concisÃ©ment, <i>le processus <tt>i</tt> envoie au processus <tt>(i+1)%N</tt></i> oÃ¹ il y a <tt>N</tt>  processus et oÃ¹ <tt>%</tt> est l'opÃ©rateur modulo.
</p><p>MPI offre plusieurs fonctions pour Ã©changer des donnÃ©es dans un grand nombre de relations entre processus (1,1; 1,n; n,1; n,n). Les fonctions les plus simples sont cependant celles qui Ã©changent une ou plusieurs instances de donnÃ©es du mÃªme type de base, soit les fonctions <tt>MPI_Send</tt> et <tt>MPI_Recv</tt>.
</p><p>Un processus envoie des donnÃ©es par la fonction <tt>MPI_Send</tt>. Examinons notre exemple&#160;: 
</p>
<ul><li><tt>message</tt> est un pointeur vers un vecteur de donnÃ©es Ã  envoyer;</li>
<li><tt>count</tt> reprÃ©sente le nombre d'instances contiguÃ«s de type <tt>datatype</tt> est le type des donnÃ©es;</li>
<li><tt>dest</tt> est le rang du processus cible;</li>
<li><tt>tag</tt> est un identifiant entier dÃ©fini par le programmeur et associÃ© au type de message Ã  envoyer, ce qui est utile pour distinguer les diffÃ©rentes communications entre les processus. Cependant, puisque cet identifiant n'est toujours pas utile Ã  notre exemple, nous choisissons la valeur arbitraire 0;</li>
<li><tt>MPI_COMM_WORLD</tt>  est le communicateur reprÃ©sentant tous les processus lancÃ©s par <tt>mpirun</tt>.</li></ul>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-7-0" name="tabs-7" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-7-1" name="tabs-7" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-7-1" data-tabpos="1">C</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-7-2" name="tabs-7" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-7-2" data-tabpos="2">Boost (C++)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-7-3" name="tabs-7" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-7-3" data-tabpos="3">Fortran</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-7-4" name="tabs-7" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-7-4" data-tabpos="4">Fortran 2008</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-7-5" name="tabs-7" class="tabs-input tabs-input-5" /><label class="tabs-label" for="tabs-input-7-5" data-tabpos="5">Python (mpi4py)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">MPI_Send</span>
<span class="w"> </span><span class="p">(</span>
<span class="w">     </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">,</span><span class="w">           </span><span class="cm">/* reference to data to be sent */</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w">               </span><span class="cm">/* number of items in message */</span>
<span class="w">     </span><span class="n">MPI_Datatype</span><span class="w"> </span><span class="n">datatype</span><span class="p">,</span><span class="w">   </span><span class="cm">/* type of item in message */</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">dest</span><span class="p">,</span><span class="w">                </span><span class="cm">/* rank of process to receive message */</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w">                 </span><span class="cm">/* programmer specified identifier */</span>
<span class="w">     </span><span class="n">MPI_Comm</span><span class="w"> </span><span class="n">comm</span><span class="w">            </span><span class="cm">/* communicator */</span>
<span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-2">
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">mpi</span><span class="o">::</span><span class="n">communicator</span><span class="o">::</span><span class="n">send</span><span class="p">(</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">dest</span><span class="p">,</span><span class="w">                  </span><span class="cm">/* rank of process to receive message */</span><span class="w"> </span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w">                          </span><span class="cm">/* programmer specified identified */</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">value</span><span class="w">              </span><span class="cm">/* message */</span>
<span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-3">
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="n">MPI_SEND</span><span class="p">(</span><span class="n">MESSAGE</span><span class="p">,</span><span class="w"> </span><span class="nb">COUNT</span><span class="p">,</span><span class="w"> </span><span class="n">DATATYPE</span><span class="p">,</span><span class="w"> </span><span class="n">DEST</span><span class="p">,</span><span class="w"> </span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="n">COMM</span><span class="p">,</span><span class="w"> </span><span class="n">IERR</span><span class="p">)</span>
<span class="w"> </span><span class="o">&lt;</span><span class="k">type</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MESSAGE</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="nb">COUNT</span><span class="p">,</span><span class="w"> </span><span class="n">DATATYPE</span><span class="p">,</span><span class="w"> </span><span class="n">DEST</span><span class="p">,</span><span class="w"> </span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="n">COMM</span><span class="p">,</span><span class="w"> </span><span class="n">IERR</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-4">
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="nb">count</span><span class="p">,</span><span class="w"> </span><span class="n">datatype</span><span class="p">,</span><span class="w"> </span><span class="n">dest</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w"> </span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w"> </span><span class="k">TYPE</span><span class="p">(</span><span class="o">*</span><span class="p">),</span><span class="w"> </span><span class="k">DIMENSION</span><span class="p">(..),</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">message</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="nb">count</span><span class="p">,</span><span class="w"> </span><span class="n">dest</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span>
<span class="w"> </span><span class="k">TYPE</span><span class="p">(</span><span class="n">MPI_Datatype</span><span class="p">),</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">datatype</span>
<span class="w"> </span><span class="k">TYPE</span><span class="p">(</span><span class="n">MPI_Comm</span><span class="p">),</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">comm</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">OPTIONAL</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">OUT</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ierr</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-5">
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># For general Python objects (pickled)</span>
<span class="n">MPI</span><span class="o">.</span><span class="n">Intracomm</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="nb">int</span> <span class="n">dest</span><span class="p">,</span> <span class="nb">int</span> <span class="n">tag</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># For numpy arrays (fast)</span>
<span class="n">MPI</span><span class="o">.</span><span class="n">Intracomm</span><span class="o">.</span><span class="n">Send</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buf</span><span class="p">,</span> <span class="nb">int</span> <span class="n">dest</span><span class="p">,</span> <span class="nb">int</span> <span class="n">tag</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>Remarquez que l'argument <tt>datatype</tt> qui identifie le type des donnÃ©es contenues dans le <i>buffer</i> <tt>message</tt> est une variable dÃ©finie par la norme MPI. Ceci assure une couche de compatibilitÃ© entre les processus opÃ©rant sur des architectures oÃ¹ le format natif des donnÃ©es serait diffÃ©rent. Il est possible d'utiliser de nouveaux types de donnÃ©es, mais nous nous limitons ici aux types dÃ©finis nativement par MPI. En langage C&#160;: <tt>MPI_CHAR</tt>, <tt>MPI_FLOAT</tt>, <tt>MPI_SHORT</tt>, <tt>MPI_INT</tt>, etc.
En Fortran&#160;:<tt>MPI_CHARACTER</tt>, <tt>MPI_INTEGER</tt>, <tt>MPI_REAL</tt>, etc. Pour la liste complÃ¨te des types de donnÃ©es, consultez la section RÃ©fÃ©rences en bas de page.
</p><p>Ã€ la fonction de rÃ©ception <tt>MPI_Recv</tt>, on ajoute l'argument  <tt>status</tt>&#160;:  en C, l'argument rÃ©fÃ¨re Ã  une structure allouÃ©e <tt>MPI_Status</tt> et en Fortran, l'argument contient une matrice <tt>MPI_STATUS_SIZE</tt> de nombres entiers ou, pour <tt>mpi_f08</tt>, une variable dÃ©rivÃ©e <tt>TYPE(MPI_Status)</tt>. Ã€ son retour, <tt>MPI_Recv</tt>  contiendra de l'information sur le message reÃ§u. Nos exemples ne montrent pas cet argument, mais il doit faire partie des instructions.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-8-0" name="tabs-8" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-8-1" name="tabs-8" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-8-1" data-tabpos="1">C</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-8-2" name="tabs-8" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-8-2" data-tabpos="2">Boost (C++)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-8-3" name="tabs-8" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-8-3" data-tabpos="3">Fortran</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-8-4" name="tabs-8" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-8-4" data-tabpos="4">Fortran 2008</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-8-5" name="tabs-8" class="tabs-input tabs-input-5" /><label class="tabs-label" for="tabs-input-8-5" data-tabpos="5">Python (mpi4py)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">MPI_Recv</span>
<span class="w"> </span><span class="p">(</span>
<span class="w">     </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">message</span><span class="p">,</span><span class="w">           </span><span class="cm">/* reference to buffer for received data */</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w">               </span><span class="cm">/* number of items to be received */</span>
<span class="w">     </span><span class="n">MPI_Datatype</span><span class="w"> </span><span class="n">datatype</span><span class="p">,</span><span class="w">   </span><span class="cm">/* type of item to be received */</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w">              </span><span class="cm">/* rank of process from which to receive */</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w">                 </span><span class="cm">/* programmer specified identifier */</span>
<span class="w">     </span><span class="n">MPI_Comm</span><span class="w"> </span><span class="n">comm</span><span class="w">            </span><span class="cm">/* communicator */</span>
<span class="w">     </span><span class="n">MPI_Status</span><span class="w"> </span><span class="o">*</span><span class="n">status</span><span class="w">       </span><span class="cm">/* stores info. about received message */</span>
<span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-2">
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">mpi</span><span class="o">::</span><span class="n">communicator</span><span class="o">::</span><span class="n">recv</span><span class="p">(</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w">                  </span><span class="cm">/* rank of process from which to receive */</span><span class="w"> </span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w">                          </span><span class="cm">/* programmer specified identified */</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">value</span><span class="w">               </span><span class="cm">/* message */</span>
<span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-3">
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="n">MPI_RECV</span><span class="p">(</span><span class="n">MESSAGE</span><span class="p">,</span><span class="w"> </span><span class="nb">COUNT</span><span class="p">,</span><span class="w"> </span><span class="n">DATATYPE</span><span class="p">,</span><span class="w"> </span><span class="n">SOURCE</span><span class="p">,</span><span class="w"> </span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="n">COMM</span><span class="p">,</span><span class="w"> </span><span class="n">STATUS</span><span class="p">,</span><span class="w"> </span><span class="n">IERR</span><span class="p">)</span>
<span class="w"> </span><span class="o">&lt;</span><span class="k">type</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">MESSAGE</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="nb">COUNT</span><span class="p">,</span><span class="w"> </span><span class="n">DATATYPE</span><span class="p">,</span><span class="w"> </span><span class="n">SOURCE</span><span class="p">,</span><span class="w"> </span><span class="n">TAG</span><span class="p">,</span><span class="w"> </span><span class="n">COMM</span><span class="p">,</span><span class="w"> </span><span class="n">STATUS</span><span class="p">(</span><span class="n">MPI_STATUS_SIZE</span><span class="p">),</span><span class="w"> </span><span class="n">IERR</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-4">
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="nb">count</span><span class="p">,</span><span class="w"> </span><span class="n">datatype</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span><span class="p">,</span><span class="w"> </span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w"> </span><span class="k">TYPE</span><span class="p">(</span><span class="o">*</span><span class="p">),</span><span class="w"> </span><span class="k">DIMENSION</span><span class="p">(..)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">message</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="nb">count</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">tag</span>
<span class="w"> </span><span class="k">TYPE</span><span class="p">(</span><span class="n">MPI_Datatype</span><span class="p">),</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">datatype</span>
<span class="w"> </span><span class="k">TYPE</span><span class="p">(</span><span class="n">MPI_Comm</span><span class="p">),</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">comm</span>
<span class="w"> </span><span class="k">TYPE</span><span class="p">(</span><span class="n">MPI_Status</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">status</span>
<span class="w"> </span><span class="kt">INTEGER</span><span class="p">,</span><span class="w"> </span><span class="k">OPTIONAL</span><span class="p">,</span><span class="w"> </span><span class="k">INTENT</span><span class="p">(</span><span class="n">OUT</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ierr</span>
</pre></div>
</div>
<div class="tabs-content tabs-content-5">
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="c1"># For general Python objects (pickled)</span>
<span class="n">MPI</span><span class="o">.</span><span class="n">Intracomm</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buf</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">int</span> <span class="n">source</span><span class="o">=</span><span class="n">ANY_SOURCE</span><span class="p">,</span> <span class="nb">int</span> <span class="n">tag</span><span class="o">=</span><span class="n">ANY_TAG</span><span class="p">,</span> <span class="n">Status</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># For numpy arrays (fast)</span>
<span class="n">MPI</span><span class="o">.</span><span class="n">Intracomm</span><span class="o">.</span><span class="n">Recv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">buf</span><span class="p">,</span> <span class="nb">int</span> <span class="n">source</span><span class="o">=</span><span class="n">ANY_SOURCE</span><span class="p">,</span> <span class="nb">int</span> <span class="n">tag</span><span class="o">=</span><span class="n">ANY_TAG</span><span class="p">,</span> <span class="n">Status</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
<p>Dans notre cas simple avec <tt>MPI_Send</tt> et <tt>MPI_Recv</tt>, le processus qui envoie doit connaitre le rang du processus qui reÃ§oit et vice versa. Rappelons-nous des rÃ¨gles mathÃ©matiques suivantes&#160;:
</p>
<ul><li><tt>(rank + 1)&#160;% size</tt> est le processus auquel on envoie</li>
<li><tt>(rank + 1)&#160;% size</tt> est le processus duquel on reÃ§oit</li></ul>
<p>Modifions maintenant notre programme parallÃ¨le. 
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-9-0" name="tabs-9" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-9-1" name="tabs-9" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-9-1" data-tabpos="1">C</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-9-2" name="tabs-9" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-9-2" data-tabpos="2">Boost (C++)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-9-3" name="tabs-9" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-9-3" data-tabpos="3">Fortran</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-9-4" name="tabs-9" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-9-4" data-tabpos="4">Fortran 2008</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-9-5" name="tabs-9" class="tabs-input tabs-input-5" /><label class="tabs-label" for="tabs-input-9-5" data-tabpos="5">Python (mpi4py)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello2.c</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23include+%3Cstdio.h%3E%0A%23include+%3Cmpi.h%3E%0A+%0A%23define+BUFMAX+81%0A+%0Aint+main%28int+argc%2C+char+%2Aargv%5B%5D%29%0A%7B%0A+++++char+outbuf%5BBUFMAX%5D%2C+inbuf%5BBUFMAX%5D%3B%0A+++++int+rank%2C+size%3B%0A+++++int+sendto%2C+recvfrom%3B%0A+++++MPI_Status+status%3B%0A+%0A+++++MPI_Init%28%26argc%2C+%26argv%29%3B%0A+++++MPI_Comm_rank%28MPI_COMM_WORLD%2C+%26rank%29%3B%0A+++++MPI_Comm_size%28MPI_COMM_WORLD%2C+%26size%29%3B%0A+%0A+++++sprintf%28outbuf%2C+%22Hello%2C+world%21+from+process+%25d+of+%25d%22%2C+rank%2C+size%29%3B%0A+%0A+++++sendto+%3D+%28rank+%2B+1%29+%25+size%3B%0A+++++recvfrom+%3D+%28rank+%2B+size+-+1%29+%25+size%3B%0A+%0A+++++MPI_Send%28outbuf%2C+BUFMAX%2C+MPI_CHAR%2C+sendto%2C+0%2C+MPI_COMM_WORLD%29%3B%0A+++++MPI_Recv%28inbuf%2C+BUFMAX%2C+MPI_CHAR%2C+recvfrom%2C+0%2C+MPI_COMM_WORLD%2C+%26status%29%3B%0A+%09%0A+++++printf%28%22%5BP_%25d%5D+process+%25d+said%3A+%5C%22%25s%5C%22%5D%5Cn%22%2C+rank%2C+recvfrom%2C+inbuf%29%3B%0A+%0A+++++MPI_Finalize%28%29%3B%0A+++++return%280%29%3B%0A%7D" />
<input type="hidden" name="filename" value="phello2.c" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mpi.h&gt;</span>
<span class="w"> </span>
<span class="cp">#define BUFMAX 81</span>
<span class="w"> </span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">     </span><span class="kt">char</span><span class="w"> </span><span class="n">outbuf</span><span class="p">[</span><span class="n">BUFMAX</span><span class="p">],</span><span class="w"> </span><span class="n">inbuf</span><span class="p">[</span><span class="n">BUFMAX</span><span class="p">];</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w">     </span><span class="kt">int</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">;</span>
<span class="w">     </span><span class="n">MPI_Status</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
<span class="w">     </span><span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rank</span><span class="p">);</span>
<span class="w">     </span><span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">size</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">sprintf</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, world! from process %d of %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">sendto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w">     </span><span class="n">recvfrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHAR</span><span class="p">,</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">);</span>
<span class="w">     </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHAR</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">status</span><span class="p">);</span>
<span class="w"> 	</span>
<span class="w">     </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;[P_%d] process %d said: </span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;</span><span class="s">]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span><span class="p">);</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">MPI_Finalize</span><span class="p">();</span>
<span class="w">     </span><span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello.cpp</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23include+%3Ciostream%3E%0A%23include+%3Cstring%3E%0A%23include+%3Cboost%2Fmpi.hpp%3E%0A%0Ausing+namespace+std%3B%0Ausing+namespace+boost%3B%0A%0Aint+main%28int+argc%2C+char+%2Aargv%5B%5D%29%0A%7B%0A++++mpi%3A%3Aenvironment+env%28argc%2C+argv%29%3B%0A++++mpi%3A%3Acommunicator+world%3B%0A++++int+rank+%3D+world.rank%28%29%3B%0A++++int+size+%3D+world.size%28%29%3B%0A%0A++++string+outmessage+%3D+%22Hello%2C+world%21+from+process+%22+%2B+to_string%28rank%29+%2B+%22+of+%22+%2B+to_string%28size%29%3B%0A++++string+inmessage%3B%0A++++int+sendto+%3D+%28rank+%2B+1%29+%25+size%3B%0A++++int+recvfrom+%3D+%28rank+%2B+size+-+1%29+%25+size%3B%0A%0A++++cout+%3C%3C+outmessage+%3C%3C+endl%3B%0A%0A++++world.send%28sendto%2C0%2Coutmessage%29%3B%0A++++world.recv%28recvfrom%2C0%2Cinmessage%29%3B%0A%0A++++cout+%3C%3C+%22%5BP_%22+%3C%3C+rank+%3C%3C+%22%5D+process+%22+%3C%3C+recvfrom+%3C%3C+%22+said%3A+%5C%22%22+%3C%3C+inmessage+%3C%3C+%22%5C%22%22+%3C%3C+endl%3B%0A++++return+0%3B%0A%7D" />
<input type="hidden" name="filename" value="phello.cpp" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;boost/mpi.hpp&gt;</span>

<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">boost</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">mpi</span><span class="o">::</span><span class="n">environment</span><span class="w"> </span><span class="n">env</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span>
<span class="w">    </span><span class="n">mpi</span><span class="o">::</span><span class="n">communicator</span><span class="w"> </span><span class="n">world</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rank</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">world</span><span class="p">.</span><span class="n">rank</span><span class="p">();</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">world</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>

<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">outmessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello, world! from process &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">to_string</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; of &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">to_string</span><span class="p">(</span><span class="n">size</span><span class="p">);</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">inmessage</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">sendto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">recvfrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>

<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">outmessage</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="n">world</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">sendto</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">outmessage</span><span class="p">);</span>
<span class="w">    </span><span class="n">world</span><span class="p">.</span><span class="n">recv</span><span class="p">(</span><span class="n">recvfrom</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">inmessage</span><span class="p">);</span>

<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;[P_&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rank</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;] process &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">recvfrom</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; said: </span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">inmessage</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-3">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello2.f90</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="program+phello2%0A%0A+++++implicit+none%0A+++++use+mpi%0A+++++integer%2C+parameter+%3A%3A+BUFMAX%3D81%0A+++++character%28len%3DBUFMAX%29+%3A%3A+outbuf%2C+inbuf%2C+tmp%0A+++++integer+%3A%3A+rank%2C+num_procs%2C+ierr%0A+++++integer+%3A%3A+sendto%2C+recvfrom%0A+++++integer+%3A%3A+status%28MPI_STATUS_SIZE%29%0A+%0A+++++call+MPI_INIT%28ierr%29%0A+++++call+MPI_COMM_RANK%28MPI_COMM_WORLD%2C+rank%2C+ierr%29%0A+++++call+MPI_COMM_SIZE%28MPI_COMM_WORLD%2C+num_procs%2C+ierr%29%0A+%0A+++++outbuf+%3D+%27Hello%2C+world%21+from+process+%27+%0A+++++write%28tmp%2C%27%28i2%29%27%29+rank%0A+++++outbuf+%3D+outbuf%281%3Alen_trim%28outbuf%29%29+%2F%2F+tmp%281%3Alen_trim%28tmp%29%29%0A+++++write%28tmp%2C%27%28i2%29%27%29+num_procs%0A+++++outbuf+%3D+outbuf%281%3Alen_trim%28outbuf%29%29+%2F%2F+%27+of+%27+%2F%2F+tmp%281%3Alen_trim%28tmp%29%29%0A+%0A+++++sendto+%3D+mod%28%28rank+%2B+1%29%2C+num_procs%29%0A+++++recvfrom+%3D+mod%28%28rank+%2B+num_procs+-+1%29%2C+num_procs%29%0A+%0A+++++call+MPI_SEND%28outbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+sendto%2C+0%2C+MPI_COMM_WORLD%2C+ierr%29%0A+++++call+MPI_RECV%28inbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+recvfrom%2C+0%2C+MPI_COMM_WORLD%2C+status%2C+ierr%29%0A+%0A+++++print+%2A%2C+%27Process%27%2C+rank%2C+%27%3A+Process%27%2C+recvfrom%2C+%27+said%3A%27%2C+inbuf%0A+%0A+++++call+MPI_FINALIZE%28ierr%29%0A+%0Aend+program+phello2" />
<input type="hidden" name="filename" value="phello2.f90" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="k">program </span><span class="n">phello2</span>

<span class="w">     </span><span class="k">implicit none</span>
<span class="k">     use </span><span class="n">mpi</span>
<span class="w">     </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">BUFMAX</span><span class="o">=</span><span class="mi">81</span>
<span class="w">     </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">BUFMAX</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">tmp</span>
<span class="w">     </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">num_procs</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span>
<span class="w">     </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span>
<span class="w">     </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">status</span><span class="p">(</span><span class="n">MPI_STATUS_SIZE</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_INIT</span><span class="p">(</span><span class="n">ierr</span><span class="p">)</span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_COMM_RANK</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_COMM_SIZE</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">num_procs</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello, world! from process &#39;</span><span class="w"> </span>
<span class="w">     </span><span class="k">write</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="s1">&#39;(i2)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">rank</span>
<span class="w">     </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outbuf</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">outbuf</span><span class="p">))</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">tmp</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span>
<span class="w">     </span><span class="k">write</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="s1">&#39;(i2)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">num_procs</span>
<span class="w">     </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outbuf</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">outbuf</span><span class="p">))</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="s1">&#39; of &#39;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">tmp</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">sendto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">mod</span><span class="p">((</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span>
<span class="w">     </span><span class="n">recvfrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">mod</span><span class="p">((</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num_procs</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_SEND</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_RECV</span><span class="p">(</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Process&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;: Process&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; said:&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_FINALIZE</span><span class="p">(</span><span class="n">ierr</span><span class="p">)</span>
<span class="w"> </span>
<span class="k">end program </span><span class="n">phello2</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-4">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello2.f90</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="program+phello2%0A%0A+++++implicit+none%0A+++++use+mpi_f08%0A+++++integer%2C+parameter+%3A%3A+BUFMAX%3D81%0A+++++character%28len%3DBUFMAX%29+%3A%3A+outbuf%2C+inbuf%2C+tmp%0A+++++integer+%3A%3A+rank%2C+num_procs%0A+++++integer+%3A%3A+sendto%2C+recvfrom%0A+++++type%28MPI_Status%29+%3A%3A+status%0A+%0A+++++call+MPI_Init%28%29%0A+++++call+MPI_Comm_rank%28MPI_COMM_WORLD%2C+rank%29%0A+++++call+MPI_Comm_size%28MPI_COMM_WORLD%2C+num_procs%29%0A+%0A+++++outbuf+%3D+%27Hello%2C+world%21+from+process+%27+%0A+++++write%28tmp%2C%27%28i2%29%27%29+rank%0A+++++outbuf+%3D+outbuf%281%3Alen_trim%28outbuf%29%29+%2F%2F+tmp%281%3Alen_trim%28tmp%29%29%0A+++++write%28tmp%2C%27%28i2%29%27%29+num_procs%0A+++++outbuf+%3D+outbuf%281%3Alen_trim%28outbuf%29%29+%2F%2F+%27+of+%27+%2F%2F+tmp%281%3Alen_trim%28tmp%29%29%0A+%0A+++++sendto+%3D+mod%28%28rank+%2B+1%29%2C+num_procs%29%0A+++++recvfrom+%3D+mod%28%28rank+%2B+num_procs+-+1%29%2C+num_procs%29%0A+%0A+++++call+MPI_Send%28outbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+sendto%2C+0%2C+MPI_COMM_WORLD%29%0A+++++call+MPI_Recv%28inbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+recvfrom%2C+0%2C+MPI_COMM_WORLD%2C+status%29%0A+%0A+++++print+%2A%2C+%27Process%27%2C+rank%2C+%27%3A+Process%27%2C+recvfrom%2C+%27+said%3A%27%2C+inbuf%0A+%0A+++++call+MPI_Finalize%28%29%0A+%0Aend+program+phello2" />
<input type="hidden" name="filename" value="phello2.f90" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="k">program </span><span class="n">phello2</span>

<span class="w">     </span><span class="k">implicit none</span>
<span class="k">     use </span><span class="n">mpi_f08</span>
<span class="w">     </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">BUFMAX</span><span class="o">=</span><span class="mi">81</span>
<span class="w">     </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">BUFMAX</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">tmp</span>
<span class="w">     </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">num_procs</span>
<span class="w">     </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span>
<span class="w">     </span><span class="k">type</span><span class="p">(</span><span class="n">MPI_Status</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">status</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_Init</span><span class="p">()</span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">)</span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello, world! from process &#39;</span><span class="w"> </span>
<span class="w">     </span><span class="k">write</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="s1">&#39;(i2)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">rank</span>
<span class="w">     </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outbuf</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">outbuf</span><span class="p">))</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">tmp</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span>
<span class="w">     </span><span class="k">write</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="s1">&#39;(i2)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">num_procs</span>
<span class="w">     </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outbuf</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">outbuf</span><span class="p">))</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="s1">&#39; of &#39;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">tmp</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span>
<span class="w"> </span>
<span class="w">     </span><span class="n">sendto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">mod</span><span class="p">((</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span>
<span class="w">     </span><span class="n">recvfrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">mod</span><span class="p">((</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num_procs</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">)</span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">)</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Process&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;: Process&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; said:&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span>
<span class="w"> </span>
<span class="w">     </span><span class="k">call </span><span class="n">MPI_Finalize</span><span class="p">()</span>
<span class="w"> </span>
<span class="k">end program </span><span class="n">phello2</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-5">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello2.py</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="from+mpi4py+import+MPI%0A%0Acomm+%3D+MPI.COMM_WORLD%0Arank+%3D+comm.Get_rank%28%29%0Asize+%3D+comm.Get_size%28%29%0A%0Aoutbuf+%3D+%22Hello%2C+world%21+from+process+%25d+of+%25d%22+%25+%28rank%2C+size%29%0A+%0Asendto+%3D+%28rank+%2B+1%29+%25+size%3B%0Arecvfrom+%3D+%28rank+%2B+size+-+1%29+%25+size%3B%0A+%0Acomm.send%28outbuf%2C+dest%3Dsendto%2C+tag%3D0%29%0Ainbuf+%3D+comm.recv%28source%3Drecvfrom%2C+tag%3D0%29%0A+%09%0Aprint%28%27%5BP_%25d%5D+process+%25d+said%3A+%22%25s%22%5D%27+%25+%28rank%2C+recvfrom%2C+inbuf%29%29" />
<input type="hidden" name="filename" value="phello2.py" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">from</span> <span class="nn">mpi4py</span> <span class="kn">import</span> <span class="n">MPI</span>

<span class="n">comm</span> <span class="o">=</span> <span class="n">MPI</span><span class="o">.</span><span class="n">COMM_WORLD</span>
<span class="n">rank</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">Get_rank</span><span class="p">()</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">Get_size</span><span class="p">()</span>

<span class="n">outbuf</span> <span class="o">=</span> <span class="s2">&quot;Hello, world! from process </span><span class="si">%d</span><span class="s2"> of </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
 
<span class="n">sendto</span> <span class="o">=</span> <span class="p">(</span><span class="n">rank</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">size</span><span class="p">;</span>
<span class="n">recvfrom</span> <span class="o">=</span> <span class="p">(</span><span class="n">rank</span> <span class="o">+</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">size</span><span class="p">;</span>
 
<span class="n">comm</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="n">sendto</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">inbuf</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">recvfrom</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
 	
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;[P_</span><span class="si">%d</span><span class="s1">] process </span><span class="si">%d</span><span class="s1"> said: &quot;</span><span class="si">%s</span><span class="s1">&quot;]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">recvfrom</span><span class="p">,</span> <span class="n">inbuf</span><span class="p">))</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<p>Compilez ce programme et faites-le exÃ©cuter avec 2, 4 et 8 processus. Le fonctionnement semble appropriÃ©, mais il y a cependant un problÃ¨me cachÃ©. En effet, la norme MPI n'offre aucune garantie que <tt>MPI_Send</tt> retournera avant que le message ait Ã©tÃ© livrÃ©. Dans la plupart des implÃ©mentations, les donnÃ©es sont mises en mÃ©moire temporaire par <tt>MPI_Send</tt> et retournent sans attendre d'Ãªtre livrÃ©es. Par contre, si la mÃ©moire tampon n'Ã©tait pas utilisÃ©e, notre code bloquerait. Chaque processus appellerait <tt>MPI_Send</tt> et attendrait que le processus voisin appelle <tt>MPI_Recv</tt>. Puisque le processus voisin serait aussi en attente d'une rÃ©ponse de <tt>MPI_Send</tt>, tous les processus seraient indÃ©finiment en attente. Les bibliothÃ¨ques des systÃ¨mes de Calcul Canada utilisent les <i>buffers</i> puisque notre code n'a pas bloquÃ©; ce modÃ¨le de conception n'est toutefois pas fiable. Sans mÃ©moire tampon offerte par la bibliothÃ¨que, le programme pourrait faire dÃ©faut, et malgrÃ© la mÃ©moire tampon, un appel pourrait Ãªtre bloquÃ© si celle-ci est saturÃ©e.
</p>
<pre>[~]$ mpicc -Wall phello2.c -o phello2
[~]$ mpirun -np 4 ./phello2
[P_0] process 3 said: "Hello, world! from process 3 of 4"]
[P_1] process 0 said: "Hello, world! from process 0 of 4"]
[P_2] process 1 said: "Hello, world! from process 1 of 4"]
[P_3] process 2 said: "Hello, world! from process 2 of 4"]
</pre>
<h3><span id=".C3.89viter_les_impasses"></span><span class="mw-headline" id="Ã‰viter_les_impasses">Ã‰viter les impasses</span></h3>
<p>Dans la norme MPI, les appels <tt>MPI_Send</tt> et <tt>MPI_Recv</tt>  sont des appels  bloquants. <tt>MPI_Send</tt> ne retourne pas tant qu'il n'est pas sÃ©curitaire pour le module qui appelle de modifier le contenu de la mÃ©moire tampon. De mÃªme, <tt>MPI_Recv</tt> ne retourne pas tant que tout le contenu du message ne se trouve pas dans la mÃ©moire tampon.
</p><p>Le message est reÃ§u, que la bibliothÃ¨que MPI offre ou non lâ€™accÃ¨s Ã  une mÃ©moire tampon. Ã€ la rÃ©ception des donnÃ©es, le contenu du message est placÃ© dans la mÃ©moire tampon identifiÃ©e par lâ€™appel et ce dernier est bloquÃ© jusquâ€™Ã  ce que <tt>MPI_Recv</tt> retourne. Par contre, <tt>MPI_Send</tt> nâ€™a pas besoin dâ€™Ãªtre bloquÃ© si la bibliothÃ¨que offre une mÃ©moire tampon; dÃ¨s que les donnÃ©es sont copiÃ©es de leur lieu dâ€™origine, ce dernier peut Ãªtre modifiÃ© et lâ€™appel peut retourner. Ceci explique pourquoi notre exemple ne mÃ¨ne pas Ã  une impasse malgrÃ© le fait que chacun des processus appelle <tt>MPI_Send</tt> en premier. Puisque la norme MPI ne requiert pas l'usage de la mÃ©moire tampon et que notre code en dÃ©pend, nous considÃ©rons le programme comme Ã©tant Ã  risque d'une impasse.
</p><p>Un programme qui ne serait pas Ã  risque en serait un dont le bon fonctionnement ne requiert pas lâ€™usage dâ€™une mÃ©moire tampon, comme illustrÃ© ici&#160;:
</p>
<h4><span class="mw-headline" id="Interblocage">Interblocage</span></h4>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="w"> </span><span class="p">...</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">to</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">...</span>
</pre></div>
<p>Dans les deux cas, l'appel de rÃ©ception est lancÃ© avant l'appel d'envoi correspondant&#160;: il y a ainsi interblocage causÃ© par <tt>MPI_Recv</tt>.
</p>
<h4><span id="Situation_.C3.A0_risque"></span><span class="mw-headline" id="Situation_Ã _risque">Situation Ã  risque</span></h4>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="p">...</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">to</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">...</span>
</pre></div>
<p>Dans cet exemple, le programme pourrait fonctionner adÃ©quatement si la bibliothÃ¨que permet l'usage d'une mÃ©moire tampon. Si ce n'est pas le cas, ou si le contenu des messages dÃ©passe la capacitÃ© de la mÃ©moire tampon, <tt>MPI_Send</tt> fera bloquer le code, crÃ©ant ainsi une impasse. L'exemple suivant prÃ©sente une solution.
</p>
<h4><span class="mw-headline" id="Code_fiable">Code fiable</span></h4>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="p">...</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">to</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">from</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">        </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">to</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">...</span>
</pre></div>
<p>Lâ€™envoi est ici couplÃ© avec la rÃ©ception, sans usage d'une mÃ©moire tampon. Le processus pourrait Ãªtre arrÃªtÃ© momentanÃ©ment en attente de lâ€™appel correspondant, mais il nâ€™y aura pas interblocage.
</p><p>Comment peut-on sâ€™assurer que notre code est correct? Une solution commode est d'utiliser des couples pair-impair et de procÃ©der en deux temps. Dans notre exemple, la communication se fait sÃ©quentiellement d'un incrÃ©ment vers la droite; notre code devrait donc Ãªtre juste si tous les processus pairs exÃ©cutent l'envoi suivi de la rÃ©ception et que tous les processus impairs exÃ©cutent la rÃ©ception suivie de l'envoi. Les couples envoi-rÃ©ception sont bien dÃ©finis et la possibilitÃ© d'interblocage est Ã©liminÃ©e.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-10-0" name="tabs-10" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-10-1" name="tabs-10" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-10-1" data-tabpos="1">C</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-10-2" name="tabs-10" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-10-2" data-tabpos="2">Boost (C++)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-10-3" name="tabs-10" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-10-3" data-tabpos="3">Fortran</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-10-4" name="tabs-10" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-10-4" data-tabpos="4">Fortran 2008</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-10-5" name="tabs-10" class="tabs-input tabs-input-5" /><label class="tabs-label" for="tabs-input-10-5" data-tabpos="5">Python (mpi4py)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello3.c</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23include+%3Cstdio.h%3E%0A%23include+%3Cmpi.h%3E%0A%0A%23define+BUFMAX+81%0A%0Aint+main%28int+argc%2C+char+%2Aargv%5B%5D%29%0A%7B%0A++++char+outbuf%5BBUFMAX%5D%2C+inbuf%5BBUFMAX%5D%3B%0A++++int+rank%2C+size%3B%0A++++int+sendto%2C+recvfrom%3B%0A++++MPI_Status+status%3B%0A%0A%0A++++MPI_Init%28%26argc%2C+%26argv%29%3B%0A++++MPI_Comm_rank%28MPI_COMM_WORLD%2C+%26rank%29%3B%0A++++MPI_Comm_size%28MPI_COMM_WORLD%2C+%26size%29%3B%0A%0A++++sprintf%28outbuf%2C+%22Hello%2C+world%21+from+process+%25d+of+%25d%22%2C+rank%2C+size%29%3B%0A%0A++++sendto+%3D+%28rank+%2B+1%29+%25+size%3B%0A++++recvfrom+%3D+%28%28rank+%2B+size%29+-+1%29+%25+size%3B%0A%0A++++if+%28%21%28rank+%25+2%29%29%0A++++%7B%0A++++++++MPI_Send%28outbuf%2C+BUFMAX%2C+MPI_CHAR%2C+sendto%2C+0%2C+MPI_COMM_WORLD%29%3B%0A++++++++MPI_Recv%28inbuf%2C+BUFMAX%2C+MPI_CHAR%2C+recvfrom%2C+0%2C+MPI_COMM_WORLD%2C+%26status%29%3B%0A++++%7D%0A++++else%0A++++%7B%0A++++++++MPI_Recv%28inbuf%2C+BUFMAX%2C+MPI_CHAR%2C+recvfrom%2C+0%2C+MPI_COMM_WORLD%2C+%26status%29%3B%0A++++++++MPI_Send%28outbuf%2C+BUFMAX%2C+MPI_CHAR%2C+sendto%2C+0%2C+MPI_COMM_WORLD%29%3B%0A++++%7D%0A%0A++++printf%28%22%5BP_%25d%5D+process+%25d+said%3A+%5C%22%25s%5C%22%5D%5Cn%22%2C+rank%2C+recvfrom%2C+inbuf%29%3B%0A%0A++++MPI_Finalize%28%29%3B%0A%0A++++return%280%29%3B%0A%7D" />
<input type="hidden" name="filename" value="phello3.c" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mpi.h&gt;</span>

<span class="cp">#define BUFMAX 81</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">outbuf</span><span class="p">[</span><span class="n">BUFMAX</span><span class="p">],</span><span class="w"> </span><span class="n">inbuf</span><span class="p">[</span><span class="n">BUFMAX</span><span class="p">];</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">;</span>
<span class="w">    </span><span class="n">MPI_Status</span><span class="w"> </span><span class="n">status</span><span class="p">;</span>


<span class="w">    </span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
<span class="w">    </span><span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rank</span><span class="p">);</span>
<span class="w">    </span><span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">size</span><span class="p">);</span>

<span class="w">    </span><span class="n">sprintf</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, world! from process %d of %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">);</span>

<span class="w">    </span><span class="n">sendto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w">    </span><span class="n">recvfrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHAR</span><span class="p">,</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">);</span>
<span class="w">        </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHAR</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">status</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHAR</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">status</span><span class="p">);</span>
<span class="w">        </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHAR</span><span class="p">,</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;[P_%d] process %d said: </span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;</span><span class="s">]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span><span class="p">);</span>

<span class="w">    </span><span class="n">MPI_Finalize</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello3.cpp</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23include+%3Ciostream%3E%0A%23include+%3Cstring%3E%0A%23include+%3Cboost%2Fmpi.hpp%3E%0A%0Ausing+namespace+std%3B%0Ausing+namespace+boost%3B%0A%0Aint+main%28int+argc%2C+char+%2Aargv%5B%5D%29%0A%7B%0A++++mpi%3A%3Aenvironment+env%28argc%2C+argv%29%3B%0A++++mpi%3A%3Acommunicator+world%3B%0A++++int+rank+%3D+world.rank%28%29%3B%0A++++int+size+%3D+world.size%28%29%3B%0A%0A++++string+outmessage+%3D+%22Hello%2C+world%21+from+process+%22+%2B+to_string%28rank%29+%2B+%22+of+%22+%2B+to_string%28size%29%3B%0A++++string+inmessage%3B%0A++++int+sendto+%3D+%28rank+%2B+1%29+%25+size%3B%0A++++int+recvfrom+%3D+%28rank+%2B+size+-+1%29+%25+size%3B%0A%0A++++cout+%3C%3C+outmessage+%3C%3C+endl%3B%0A%0A++++if+%28%21%28rank+%25+2%29%29+%7B%0A++++++++world.send%28sendto%2C0%2Coutmessage%29%3B%0A++++++++world.recv%28recvfrom%2C0%2Cinmessage%29%3B%0A++++%7D%0A++++else+%7B%0A++++++++world.recv%28recvfrom%2C0%2Cinmessage%29%3B%0A++++++++world.send%28sendto%2C0%2Coutmessage%29%3B%0A++++%7D%0A%0A++++cout+%3C%3C+%22%5BP_%22+%3C%3C+rank+%3C%3C+%22%5D+process+%22+%3C%3C+recvfrom+%3C%3C+%22+said%3A+%5C%22%22+%3C%3C+inmessage+%3C%3C+%22%5C%22%22+%3C%3C+endl%3B%0A++++return+0%3B%0A%7D" />
<input type="hidden" name="filename" value="phello3.cpp" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" dir="ltr"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;boost/mpi.hpp&gt;</span>

<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">boost</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">mpi</span><span class="o">::</span><span class="n">environment</span><span class="w"> </span><span class="n">env</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span>
<span class="w">    </span><span class="n">mpi</span><span class="o">::</span><span class="n">communicator</span><span class="w"> </span><span class="n">world</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rank</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">world</span><span class="p">.</span><span class="n">rank</span><span class="p">();</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">world</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>

<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">outmessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello, world! from process &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">to_string</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; of &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">to_string</span><span class="p">(</span><span class="n">size</span><span class="p">);</span>
<span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">inmessage</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">sendto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">recvfrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>

<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">outmessage</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">rank</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">world</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">sendto</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">outmessage</span><span class="p">);</span>
<span class="w">        </span><span class="n">world</span><span class="p">.</span><span class="n">recv</span><span class="p">(</span><span class="n">recvfrom</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">inmessage</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">world</span><span class="p">.</span><span class="n">recv</span><span class="p">(</span><span class="n">recvfrom</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">inmessage</span><span class="p">);</span>
<span class="w">        </span><span class="n">world</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">sendto</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">outmessage</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;[P_&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rank</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;] process &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">recvfrom</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; said: </span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">inmessage</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-3">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello3.f90</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="program+phello3%0A%0A%0A++++implicit+none%0A++++use+mpi%0A%0A++++integer%2C+parameter+%3A%3A+BUFMAX%3D81%0A++++character%28len%3DBUFMAX%29+%3A%3A+outbuf%2C+inbuf%2C+tmp%0A++++integer+%3A%3A+rank%2C+num_procs%2C+ierr%0A++++integer+%3A%3A+sendto%2C+recvfrom%0A++++integer+%3A%3A+status%28MPI_STATUS_SIZE%29%0A%0A++++call+MPI_INIT%28ierr%29%0A++++call+MPI_COMM_RANK%28MPI_COMM_WORLD%2C+rank%2C+ierr%29%0A++++call+MPI_COMM_SIZE%28MPI_COMM_WORLD%2C+num_procs%2C+ierr%29%0A%0A++++outbuf+%3D+%27Hello%2C+world%21+from+process+%27%0A++++write%28tmp%2C%27%28i2%29%27%29+rank%0A++++outbuf+%3D+outbuf%281%3Alen_trim%28outbuf%29%29+%2F%2F+tmp%281%3Alen_trim%28tmp%29%29%0A++++write%28tmp%2C%27%28i2%29%27%29+num_procs%0A++++outbuf+%3D+outbuf%281%3Alen_trim%28outbuf%29%29+%2F%2F+%27+of+%27+%2F%2F+tmp%281%3Alen_trim%28tmp%29%29%0A%0A++++sendto+%3D+mod%28%28rank+%2B+1%29%2C+num_procs%29%0A++++recvfrom+%3D+mod%28%28%28rank+%2B+num_procs%29+-+1%29%2C+num_procs%29%0A%0A++++if+%28MOD%28rank%2C2%29+%3D%3D+0%29+then%0A++++++++call+MPI_SEND%28outbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+sendto%2C+0%2C+MPI_COMM_WORLD%2C+ierr%29%0A++++++++call+MPI_RECV%28inbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+recvfrom%2C+0%2C+MPI_COMM_WORLD%2C+status%2C+ierr%29%0A++++else%0A++++++++call+MPI_RECV%28inbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+recvfrom%2C+0%2C+MPI_COMM_WORLD%2C+status%2C+ierr%29%0A++++++++call+MPI_SEND%28outbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+sendto%2C+0%2C+MPI_COMM_WORLD%2C+ierr%29%0A++++endif%0A%0A++++print+%2A%2C+%27Process%27%2C+rank%2C+%27%3A+Process%27%2C+recvfrom%2C+%27+said%3A%27%2C+inbuf%0A%0A++++call+MPI_FINALIZE%28ierr%29%0A%0Aend+program+phello3" />
<input type="hidden" name="filename" value="phello3.f90" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="k">program </span><span class="n">phello3</span>


<span class="w">    </span><span class="k">implicit none</span>
<span class="k">    use </span><span class="n">mpi</span>

<span class="w">    </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">BUFMAX</span><span class="o">=</span><span class="mi">81</span>
<span class="w">    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">BUFMAX</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">tmp</span>
<span class="w">    </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">num_procs</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span>
<span class="w">    </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span>
<span class="w">    </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">status</span><span class="p">(</span><span class="n">MPI_STATUS_SIZE</span><span class="p">)</span>

<span class="w">    </span><span class="k">call </span><span class="n">MPI_INIT</span><span class="p">(</span><span class="n">ierr</span><span class="p">)</span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_COMM_RANK</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_COMM_SIZE</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">num_procs</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>

<span class="w">    </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello, world! from process &#39;</span>
<span class="w">    </span><span class="k">write</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="s1">&#39;(i2)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">rank</span>
<span class="w">    </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outbuf</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">outbuf</span><span class="p">))</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">tmp</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span>
<span class="w">    </span><span class="k">write</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="s1">&#39;(i2)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">num_procs</span>
<span class="w">    </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outbuf</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">outbuf</span><span class="p">))</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="s1">&#39; of &#39;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">tmp</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span>

<span class="w">    </span><span class="n">sendto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">mod</span><span class="p">((</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span>
<span class="w">    </span><span class="n">recvfrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">mod</span><span class="p">(((</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">MOD</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">        call </span><span class="n">MPI_SEND</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w">        </span><span class="k">call </span><span class="n">MPI_RECV</span><span class="p">(</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w">    </span><span class="k">else</span>
<span class="k">        call </span><span class="n">MPI_RECV</span><span class="p">(</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w">        </span><span class="k">call </span><span class="n">MPI_SEND</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">ierr</span><span class="p">)</span>
<span class="w">    </span><span class="k">endif</span>

<span class="k">    print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Process&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;: Process&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; said:&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span>

<span class="w">    </span><span class="k">call </span><span class="n">MPI_FINALIZE</span><span class="p">(</span><span class="n">ierr</span><span class="p">)</span>

<span class="k">end program </span><span class="n">phello3</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-4">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello3.f90</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="program+phello3%0A%0A%0A++++implicit+none%0A++++use+mpi_f08%0A%0A++++integer%2C+parameter+%3A%3A+BUFMAX%3D81%0A++++character%28len%3DBUFMAX%29+%3A%3A+outbuf%2C+inbuf%2C+tmp%0A++++integer+%3A%3A+rank%2C+num_procs%0A++++integer+%3A%3A+sendto%2C+recvfrom%0A++++type%28MPI_Status%29+%3A%3A+status%0A%0A++++call+MPI_Init%28%29%0A++++call+MPI_Comm_rank%28MPI_COMM_WORLD%2C+rank%29%0A++++call+MPI_Comm_size%28MPI_COMM_WORLD%2C+num_procs%29%0A%0A++++outbuf+%3D+%27Hello%2C+world%21+from+process+%27%0A++++write%28tmp%2C%27%28i2%29%27%29+rank%0A++++outbuf+%3D+outbuf%281%3Alen_trim%28outbuf%29%29+%2F%2F+tmp%281%3Alen_trim%28tmp%29%29%0A++++write%28tmp%2C%27%28i2%29%27%29+num_procs%0A++++outbuf+%3D+outbuf%281%3Alen_trim%28outbuf%29%29+%2F%2F+%27+of+%27+%2F%2F+tmp%281%3Alen_trim%28tmp%29%29%0A%0A++++sendto+%3D+mod%28%28rank+%2B+1%29%2C+num_procs%29%0A++++recvfrom+%3D+mod%28%28%28rank+%2B+num_procs%29+-+1%29%2C+num_procs%29%0A%0A++++if+%28MOD%28rank%2C2%29+%3D%3D+0%29+then%0A++++++++call+MPI_Send%28outbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+sendto%2C+0%2C+MPI_COMM_WORLD%29%0A++++++++call+MPI_Recv%28inbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+recvfrom%2C+0%2C+MPI_COMM_WORLD%2C+status%29%0A++++else%0A++++++++call+MPI_RECV%28inbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+recvfrom%2C+0%2C+MPI_COMM_WORLD%2C+status%29%0A++++++++call+MPI_SEND%28outbuf%2C+BUFMAX%2C+MPI_CHARACTER%2C+sendto%2C+0%2C+MPI_COMM_WORLD%29%0A++++endif%0A%0A++++print+%2A%2C+%27Process%27%2C+rank%2C+%27%3A+Process%27%2C+recvfrom%2C+%27+said%3A%27%2C+inbuf%0A%0A++++call+MPI_Finalize%28%29%0A%0Aend+program+phello3" />
<input type="hidden" name="filename" value="phello3.f90" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-fortran mw-content-ltr" dir="ltr"><pre><span></span><span class="k">program </span><span class="n">phello3</span>


<span class="w">    </span><span class="k">implicit none</span>
<span class="k">    use </span><span class="n">mpi_f08</span>

<span class="w">    </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">BUFMAX</span><span class="o">=</span><span class="mi">81</span>
<span class="w">    </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">BUFMAX</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">tmp</span>
<span class="w">    </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="n">num_procs</span>
<span class="w">    </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span>
<span class="w">    </span><span class="k">type</span><span class="p">(</span><span class="n">MPI_Status</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">status</span>

<span class="w">    </span><span class="k">call </span><span class="n">MPI_Init</span><span class="p">()</span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">)</span>
<span class="w">    </span><span class="k">call </span><span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span>

<span class="w">    </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello, world! from process &#39;</span>
<span class="w">    </span><span class="k">write</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="s1">&#39;(i2)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">rank</span>
<span class="w">    </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outbuf</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">outbuf</span><span class="p">))</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">tmp</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span>
<span class="w">    </span><span class="k">write</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="s1">&#39;(i2)&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">num_procs</span>
<span class="w">    </span><span class="n">outbuf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">outbuf</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">outbuf</span><span class="p">))</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="s1">&#39; of &#39;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">tmp</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="nb">len_trim</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span>

<span class="w">    </span><span class="n">sendto</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">mod</span><span class="p">((</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span>
<span class="w">    </span><span class="n">recvfrom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">mod</span><span class="p">(((</span><span class="n">rank</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="n">num_procs</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">MOD</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">        call </span><span class="n">MPI_Send</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">)</span>
<span class="w">        </span><span class="k">call </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">)</span>
<span class="w">    </span><span class="k">else</span>
<span class="k">        call </span><span class="n">MPI_RECV</span><span class="p">(</span><span class="n">inbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">)</span>
<span class="w">        </span><span class="k">call </span><span class="n">MPI_SEND</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span><span class="w"> </span><span class="n">BUFMAX</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_CHARACTER</span><span class="p">,</span><span class="w"> </span><span class="n">sendto</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">)</span>
<span class="w">    </span><span class="k">endif</span>

<span class="k">    print</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Process&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">rank</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;: Process&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">recvfrom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; said:&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">inbuf</span>

<span class="w">    </span><span class="k">call </span><span class="n">MPI_Finalize</span><span class="p">()</span>

<span class="k">end program </span><span class="n">phello3</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-5">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> phello3.py</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="from+mpi4py+import+MPI%0A%0Acomm+%3D+MPI.COMM_WORLD%0Arank+%3D+comm.Get_rank%28%29%0Asize+%3D+comm.Get_size%28%29%0A%0Aoutbuf+%3D+%22Hello%2C+world%21+from+process+%25d+of+%25d%22+%25+%28rank%2C+size%29%0A%0Asendto+%3D+%28rank+%2B+1%29+%25+size%3B%0Arecvfrom+%3D+%28%28rank+%2B+size%29+-+1%29+%25+size%3B%0A%0Aif+rank+%25+2+%3D%3D+0%3A%0A++++comm.send%28outbuf%2C+dest%3Dsendto%2C+tag%3D0%29%0A++++inbuf+%3D+comm.recv%28source%3Drecvfrom%2C+tag%3D0%29%0Aelse%3A%0A++++inbuf+%3D+comm.recv%28source%3Drecvfrom%2C+tag%3D0%29%0A++++comm.send%28outbuf%2C+dest%3Dsendto%2C+tag%3D0%29%0A%0Aprint%28%27%5BP_%25d%5D+process+%25d+said%3A+%22%25s%22%5D%27+%25+%28rank%2C+recvfrom%2C+inbuf%29%29" />
<input type="hidden" name="filename" value="phello3.py" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-python mw-content-ltr" dir="ltr"><pre><span></span><span class="kn">from</span> <span class="nn">mpi4py</span> <span class="kn">import</span> <span class="n">MPI</span>

<span class="n">comm</span> <span class="o">=</span> <span class="n">MPI</span><span class="o">.</span><span class="n">COMM_WORLD</span>
<span class="n">rank</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">Get_rank</span><span class="p">()</span>
<span class="n">size</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">Get_size</span><span class="p">()</span>

<span class="n">outbuf</span> <span class="o">=</span> <span class="s2">&quot;Hello, world! from process </span><span class="si">%d</span><span class="s2"> of </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>

<span class="n">sendto</span> <span class="o">=</span> <span class="p">(</span><span class="n">rank</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">size</span><span class="p">;</span>
<span class="n">recvfrom</span> <span class="o">=</span> <span class="p">((</span><span class="n">rank</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">size</span><span class="p">;</span>

<span class="k">if</span> <span class="n">rank</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">comm</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="n">sendto</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">inbuf</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">recvfrom</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">inbuf</span> <span class="o">=</span> <span class="n">comm</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">recvfrom</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">comm</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">outbuf</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="n">sendto</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;[P_</span><span class="si">%d</span><span class="s1">] process </span><span class="si">%d</span><span class="s1"> said: &quot;</span><span class="si">%s</span><span class="s1">&quot;]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">recvfrom</span><span class="p">,</span> <span class="n">inbuf</span><span class="p">))</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<p>Ã€ premiÃ¨re vue, il semblerait qu'un nombre impair de processus puisse poser un problÃ¨me. En effet, le processus pair 0 lance un envoi alors que l'autre processus pair N-1 tente de lancer une rÃ©ception. Cependant, l'envoi fait par le processus 0 est correctement appariÃ© Ã  la rÃ©ception lancÃ©e par le processus 1; puisque le processus impair 1 commence par une rÃ©ception, la transaction sera sÃ»rement complÃ©tÃ©e. Sur ce, le processus 0 reÃ§oit le message du processus 1; il pourrait y avoir un certain dÃ©lai (minime), mais il n'y a pas de risque d'interblocage.
[~]$ mpicc -Wall phello3.c -o phello3
</p>
<pre>[~]$ mpirun -np 16 ./phello3
[P_1] process 0 said: "Hello, world! from process 0 of 16"]
[P_2] process 1 said: "Hello, world! from process 1 of 16"]
[P_5] process 4 said: "Hello, world! from process 4 of 16"]
[P_3] process 2 said: "Hello, world! from process 2 of 16"]
[P_9] process 8 said: "Hello, world! from process 8 of 16"]
[P_0] process 15 said: "Hello, world! from process 15 of 16"]
[P_12] process 11 said: "Hello, world! from process 11 of 16"]
[P_6] process 5 said: "Hello, world! from process 5 of 16"]
[P_13] process 12 said: "Hello, world! from process 12 of 16"]
[P_8] process 7 said: "Hello, world! from process 7 of 16"]
[P_7] process 6 said: "Hello, world! from process 6 of 16"]
[P_14] process 13 said: "Hello, world! from process 13 of 16"]
[P_10] process 9 said: "Hello, world! from process 9 of 16"]
[P_4] process 3 said: "Hello, world! from process 3 of 16"]
[P_15] process 14 said: "Hello, world! from process 14 of 16"]
[P_11] process 10 said: "Hello, world! from process 10 of 16"]
</pre>
<p>Plusieurs modÃ¨les sont dÃ©crits dans la page Web <a rel="nofollow" class="external text" href="http://www.mcs.anl.gov/research/projects/mpi/mpi-standard/mpi-report-1.1/node64.htm#Node64">Introduction and Overview</a>. Nous vous recommandons d'utiliser la fonction de communication qui s'applique Ã  votre situation, plutÃ´t que de la crÃ©er par vous-mÃªme.
</p>
<h2><span class="mw-headline" id="Enveloppes_de_compilateurs">Enveloppes de compilateurs</span></h2>
<p>Les paquets des bibliothÃ¨ques MPI offrent gÃ©nÃ©ralement des enveloppes (<i>wrappers</i>) pour les compilateurs. Ce ne sont pas des compilateurs, mais ces enveloppes appellent d'autres compilateurs tout en s'assurant que le compilateur reÃ§oive les indicateurs spÃ©cifiques Ã  MPI.
</p><p>Voici une liste partielle&#160;:
</p>
<ul><li><code>mpicc</code> pour C</li>
<li><code>mpicxx</code> pour C++</li>
<li><code>mpifort</code> et/ou <code>mpif77</code> et/ou <code>mpif90</code> pour Fortran</li></ul>
<p>Avec Open&#160;MPI, ces enveloppes ont l'option <code>--showme</code> qui imprime le nom du compilateur qui sera appellÃ© et les options qui y seront ajoutÃ©es.
</p><p><b>Remarque</b>&#160;: Notre pile logicielle contient plusieurs modules du mÃªme paquet Open&#160;MPI (par exemple <code>openmpi/4.0.3</code>) qui ont Ã©tÃ© construits avec des compilateurs diffÃ©rents et qui prennent en charge ou non CUDA. Les enveloppes de compilateurs MPI utiliseront toujours le compilateur et la version du compilateur que vous avez chargÃ©s avec la commande code&gt;module load. 
</p><p>Par exemple, si vous avez chargÃ© les modules <code>intel/2020.1.217</code> et <code>openmpi/4.0.3</code>&#160;:
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=mpicc+-showme" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>mpicc<span class="w"> </span>-showme
icc<span class="w"> </span>-I/cvmfs/â€¦/intel2020/openmpi/4.0.3/include<span class="w"> </span>-L/cvmfs/â€¦/intel2020/openmpi/4.0.3/lib<span class="w"> </span>-lmpi
</pre></div>
</div>
</div>
<p>Si vous avez chargÃ© les modules <code>gcc/9.3.0</code> et <code>openmpi/4.0.3</code>&#160;:
</p>
<div>
<div style="float:right; margin-left:8px">
<p><span typeof="mw:File"><a href="https://explainshell.com/explain?cmd=mpicc+-showme" rel="nofollow"><img src="/mediawiki/images/thumb/3/30/Question.png/40px-Question.png" decoding="async" width="40" height="40" class="mw-file-element" srcset="/mediawiki/images/thumb/3/30/Question.png/60px-Question.png 1.5x, /mediawiki/images/thumb/3/30/Question.png/80px-Question.png 2x" /></a></span>
</p>
</div>
<div class="command">
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>name@server<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>mpicc<span class="w"> </span>-showme
gcc<span class="w"> </span>-I/â€¦/gcc9/openmpi/4.0.3/include<span class="w"> </span>-L/cvmfs/â€¦/gcc9/openmpi/4.0.3/lib<span class="w"> </span>-lmpi
</pre></div>
</div>
</div>
<h2><span id="Autres_consid.C3.A9rations"></span><span class="mw-headline" id="Autres_considÃ©rations">Autres considÃ©rations</span></h2>
<p>Nous avons abordÃ© la conception et la syntaxe de programmes MPI; il y a cependant beaucoup d'autres Ã©lÃ©ments Ã  considÃ©rer dans le dÃ©veloppement d'applications parallÃ¨les robustes avec MPI. Sans Ãªtre exhaustive, la liste suivante en donne un aperÃ§u.
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.mcs.anl.gov/research/projects/mpi/mpi-standard/mpi-report-1.1/node40.htm#Node40">variantes de <tt>MPI_Send</tt>/<tt>MPI_Recv</tt></a></li>
<li><a rel="nofollow" class="external text" href="http://www.mcs.anl.gov/research/projects/mpi/mpi-standard/mpi-report-1.1/node64.htm">communication collective</a></li>
<li><a rel="nofollow" class="external text" href="http://mpitutorial.com/tutorials/introduction-to-groups-and-communicators/">communicateurs</a> et topologies</li>
<li><a rel="nofollow" class="external text" href="http://wgropp.cs.illinois.edu/courses/cs598-s16/lectures/lecture34.pdf">communication unilatÃ©rale</a> et fonctionnalitÃ©s de MPI-2</li>
<li><a rel="nofollow" class="external text" href="http://www.mcs.anl.gov/research/projects/mpi/mpi-standard/mpi-report-1.1/node54.htm#Node54">types de donnÃ©es dÃ©rivÃ©s</a></li>
<li>performance</li>
<li>dÃ©bogage</li>
<li><a rel="nofollow" class="external text" href="https://drive.google.com/file/d/0B4bveu7i2jOyeVR5VGlxV1g1MDQ/view">tutoriel Boost MPI (en franÃ§ais)</a></li></ul>
<h2><span id="Lectures_recommand.C3.A9es"></span><span class="mw-headline" id="Lectures_recommandÃ©es">Lectures recommandÃ©es</span></h2>
<ul><li>GROPP, William, Ewing LUSK et Anthony SKJELLUM. <i>Using MPI: Portable Parallel Programming with the Message-Passing Interface</i>, 2e Ã©d, MIT Press, 1999.
<ul><li>information complÃ¨te sur les interfaces avec Fortran, C et C++</li></ul></li>
<li>PACHECO, Peter S., <i>Parallel Programming with MPI</i>, Morgan Kaufmann, 1997.
<ul><li>tutoriel avec langage C</li></ul></li>
<li>BARNEY, Blaise <a rel="nofollow" class="external text" href="https://computing.llnl.gov/tutorials/mpi/"><i>Message Passing Interface (MPI)</i></a>, Lawrence Livermore National Labs.</li>
<li>KENDALL, Wes, et autres. <a rel="nofollow" class="external text" href="http://mpitutorial.com/tutorials/"><i>mpitutorial.com</i></a></li>
<li>Institut du dÃ©veloppement et des ressources en informatique scientifique,  <a rel="nofollow" class="external text" href="http://www.idris.fr/formations/mpi/"><i>Formation "MPI"</i></a> (en franÃ§ais).</li></ul>
<!-- 
NewPP limit report
Cached time: 20250530235203
Cache expiry: 86400
Reduced expiry: false
Complications: [showâ€toc]
CPU time usage: 0.365 seconds
Real time usage: 6.367 seconds
Preprocessor visited node count: 1720/1000000
Postâ€expand include size: 22712/2097152 bytes
Template argument size: 23359/2097152 bytes
Highest expansion depth: 8/100
Expensive parser function count: 53/100
Unstrip recursion depth: 3/20
Unstrip postâ€expand size: 167648/5000000 bytes
ExtLoops count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00% 6243.964      1 -total
 45.04% 2812.068     24 Template:File
  3.25%  202.748      2 Template:Command
  0.03%    1.955      1 Template:Quote
-->

<!-- Saved in parser cache with key ccwiki:pcache:idhash:1941-0!canonical and timestamp 20250530235203 and revision id 163979. Rendering was triggered because: page-view
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://docs.alliancecan.ca/mediawiki/index.php?title=MPI/fr&amp;oldid=163979">https://docs.alliancecan.ca/mediawiki/index.php?title=MPI/fr&amp;oldid=163979</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/mediawiki/index.php?title=Category:Pages_using_deprecated_source_tags&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using deprecated source tags (page does not exist)">Pages using deprecated source tags</a></li><li><a href="/wiki/Category:Software" title="Category:Software">Software</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="pt-uls" class="mw-list-item active"><a class="uls-trigger" href="#"><span>English</span></a></li><li id="pt-login" class="mw-list-item"><a href="/mediawiki/index.php?title=Special:UserLogin&amp;returnto=MPI%2Ffr" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li>
		</ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-namespaces-label"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-nstab-main" class="selected mw-list-item"><a href="/wiki/MPI/fr" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="/mediawiki/index.php?title=Talk:MPI/fr&amp;action=edit&amp;redlink=1" rel="discussion" class="new" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-variants-label"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	>
	<label
		id="p-variants-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">franÃ§ais</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-views-label"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-view" class="selected mw-list-item"><a href="/wiki/MPI/fr"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="/mediawiki/index.php?title=MPI/fr&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="/mediawiki/index.php?title=MPI/fr&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-cactions-label"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<h3 >Search</h3>
	<form action="/mediawiki/index.php" id="searchform" class="vector-search-box-form">
		<div id="simpleSearch"
			class="vector-search-box-inner"
			 data-search-loc="header-navigation">
			<input class="vector-search-box-input"
				 type="search" name="search" placeholder="Search Alliance Doc" aria-label="Search Alliance Doc" autocapitalize="sentences" title="Search Alliance Doc [f]" accesskey="f" id="searchInput"
			>
			<input type="hidden" name="title" value="Special:Search">
			<input id="mw-searchButton"
				 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
			<input id="searchButton"
				 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel" class="vector-legacy-sidebar">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="/wiki/Technical_documentation"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu-portal portal vector-menu" aria-labelledby="p-navigation-label"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-wiki-main-page" class="mw-list-item"><a href="/wiki/Technical_documentation"><span>Wiki Main Page</span></a></li>
		</ul>
		
	</div>
</nav>

	
<nav id="p-sidebar-support" class="mw-portlet mw-portlet-sidebar-support vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-support-label"  >
	<h3
		id="p-sidebar-support-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Support</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-getting-started" class="mw-list-item"><a href="/wiki/Getting_started"><span>Getting started</span></a></li><li id="n-sidebar-technical-support" class="mw-list-item"><a href="/wiki/Technical_support"><span>Getting help</span></a></li><li id="n-sidebar-running-jobs" class="mw-list-item"><a href="/wiki/Running_jobs"><span>Running jobs</span></a></li><li id="n-sidebar-known-issues" class="mw-list-item"><a href="/wiki/Known_issues"><span>Known issues</span></a></li><li id="n-sidebar-system-status" class="mw-list-item"><a href="http://status.computecanada.ca" rel="nofollow"><span>System status</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-resources" class="mw-portlet mw-portlet-sidebar-resources vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-resources-label"  >
	<h3
		id="p-sidebar-resources-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Resources</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-BÃ©luga" class="mw-list-item"><a href="/wiki/B%C3%A9luga/en"><span>BÃ©luga</span></a></li><li id="n-Cedar" class="mw-list-item"><a href="/wiki/Cedar"><span>Cedar</span></a></li><li id="n-Graham" class="mw-list-item"><a href="/wiki/Graham"><span>Graham</span></a></li><li id="n-Narval" class="mw-list-item"><a href="/wiki/Narval/en"><span>Narval</span></a></li><li id="n-Niagara" class="mw-list-item"><a href="/wiki/Niagara"><span>Niagara</span></a></li><li id="n-sidebar-cloud" class="mw-list-item"><a href="/wiki/CC-Cloud"><span>Cloud</span></a></li><li id="n-tamIA" class="mw-list-item"><a href="/wiki/TamIA/en"><span>tamIA</span></a></li><li id="n-Killarney" class="mw-list-item"><a href="/wiki/Killarney"><span>Killarney</span></a></li><li id="n-sidebar-quantum-computing" class="mw-list-item"><a href="/wiki/Services_d%27informatique_quantique/en"><span>Quantum computing</span></a></li><li id="n-sidebar-available-software" class="mw-list-item"><a href="/wiki/Available_software"><span>Available software</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-alliance" class="mw-portlet mw-portlet-sidebar-alliance vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-alliance-label"  >
	<h3
		id="p-sidebar-alliance-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">The Alliance</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-alliance-main-page" class="mw-list-item"><a href="https://alliancecan.ca/en" rel="nofollow"><span>Alliance main page</span></a></li><li id="n-sidebar-ccdb" class="mw-list-item"><a href="https://ccdb.computecanada.ca/security/login" rel="nofollow"><span>CCDB</span></a></li><li id="n-sidebar-getting-an-account" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/apply-account" rel="nofollow"><span>Getting An Account</span></a></li><li id="n-sidebar-acknowledging-alliance" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/research-portal/acknowledging-alliance" rel="nofollow"><span>Acknowledging the Alliance</span></a></li><li id="n-sidebar-aup" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/policies" rel="nofollow"><span>Acceptable Use Policy</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-authoring" class="mw-portlet mw-portlet-sidebar-authoring vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-authoring-label"  >
	<h3
		id="p-sidebar-authoring-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Authoring</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-guidelines" class="mw-list-item"><a href="/wiki/Authoring_guidelines"><span>Guidelines</span></a></li><li id="n-sidebar-mediawiki-help" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents"><span>MediaWiki Help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu-portal portal vector-menu" aria-labelledby="p-tb-label"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="t-whatlinkshere" class="mw-list-item"><a href="/wiki/Special:WhatLinksHere/MPI/fr" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/wiki/Special:RecentChangesLinked/MPI/fr" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/mediawiki/index.php?title=MPI/fr&amp;oldid=163979" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/mediawiki/index.php?title=MPI/fr&amp;action=info" title="More information about this page"><span>Page information</span></a></li>
		</ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 4 November 2024, at 20:16.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="/wiki/CCWiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/CCWiki:About">About Alliance Doc</a></li>
	<li id="footer-places-disclaimers"><a href="/wiki/CCWiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://docs.alliancecan.ca/mediawiki/index.php?title=MPI/fr&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/mediawiki/resources/assets/poweredby_mediawiki.svg" alt="Powered by MediaWiki" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.log.warn("This page is using the deprecated ResourceLoader module \"codex-search-styles\".\n[1.43] Use a CodexModule with codexComponents to set your specific components used: https://www.mediawiki.org/wiki/Codex#Using_a_limited_subset_of_components");});</script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-TVBPRD78K4" async=""></script><script>
window.dataLayer = window.dataLayer || [];

function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TVBPRD78K4', {});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":6483,"wgPageParseReport":{"limitreport":{"cputime":"0.365","walltime":"6.367","ppvisitednodes":{"value":1720,"limit":1000000},"postexpandincludesize":{"value":22712,"limit":2097152},"templateargumentsize":{"value":23359,"limit":2097152},"expansiondepth":{"value":8,"limit":100},"expensivefunctioncount":{"value":53,"limit":100},"unstrip-depth":{"value":3,"limit":20},"unstrip-size":{"value":167648,"limit":5000000},"timingprofile":["100.00% 6243.964      1 -total"," 45.04% 2812.068     24 Template:File","  3.25%  202.748      2 Template:Command","  0.03%    1.955      1 Template:Quote"]},"loops":{"limitreport-count-limited":{"value":0,"limit":100}},"cachereport":{"timestamp":"20250530235203","ttl":86400,"transientcontent":false}}});});</script>
</body>
</html>