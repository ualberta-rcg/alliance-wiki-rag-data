<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Ansys - Alliance Doc</title>
<script>(function(){var className="client-js";var cookie=document.cookie.match(/(?:^|; )ccwikimwclientpreferences=([^;]+)/);if(cookie){cookie[1].split('%2C').forEach(function(pref){className=className.replace(new RegExp('(^| )'+pref.replace(/-clientpref-\w+$|[^\w-]+/g,'')+'-clientpref-\\w+( |$)'),'$1'+pref+'$2');});}document.documentElement.className=className;}());RLCONF={"wgBreakFrames":false,"wgSeparatorTransformTable":[",\t.","Â \t,"],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","janvier","fÃ©vrier","mars","avril","mai","juin","juillet","aoÃ»t","septembre","octobre","novembre","dÃ©cembre"],"wgRequestId":"aDpFPqdG8FmGoo1wBErE@AAAAww","wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Ansys/fr","wgTitle":"Ansys/fr","wgCurRevisionId":173818,"wgRevisionId":173818,"wgArticleId":4960,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[
"Pages using deprecated source tags","Software"],"wgPageViewLanguage":"fr","wgPageContentLanguage":"fr","wgPageContentModel":"wikitext","wgRelevantPageName":"Ansys/fr","wgRelevantArticleId":4960,"wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgULSAcceptLanguageList":[],"wgMFDisplayWikibaseDescriptions":{"search":false,"watchlist":false,"tagline":false},"wgCiteReferencePreviewsActive":true,"wgTranslatePageTranslation":"translation","wgULSPosition":"personal","wgULSisCompactLinksEnabled":true,"wgVector2022LanguageInHeader":false,"wgULSisLanguageSelectorEmpty":false};RLSTATE={"site.styles":"ready","user.styles":"ready","user":"ready","user.options":"loading","ext.translate.tag.languages":"ready","ext.pygments":"ready","skins.vector.styles.legacy":"ready","ext.translate":"ready","codex-search-styles":"ready","ext.uls.pt":"ready"};RLPAGEMODULES=["ext.pygments.view","ext.tabs","site","mediawiki.page.ready","mediawiki.toc",
"skins.vector.legacy.js","ext.languageSelector","ext.translate.pagetranslation.uls","ext.uls.compactlinks","ext.uls.geoclient","ext.uls.interface","ext.moderation.notify","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.impl(function(){return["user.options@12s5i",function($,jQuery,require,module){mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
}];});});</script>
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=codex-search-styles%7Cext.pygments%2Ctranslate%7Cext.translate.tag.languages%7Cext.uls.pt%7Cskins.vector.styles.legacy&amp;only=styles&amp;skin=vector">
<script async="" src="/mediawiki/load.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content="">
<link rel="stylesheet" href="/mediawiki/load.php?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=1120">
<link rel="icon" href="/mediawiki/resources/assets/Alliance_favicon.png">
<link rel="search" type="application/opensearchdescription+xml" href="/mediawiki/rest.php/v1/search" title="Alliance Doc (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://docs.alliancecan.ca/mediawiki/api.php?action=rsd">
<link rel="alternate" type="application/atom+xml" title="Alliance Doc Atom feed" href="/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom">
<style type="text/css" id="tabs-dynamic-styles">/*<![CDATA[*/
/* Dynamically generated tabs styles */
.tabs-input-1:checked ~ .tabs-container .tabs-content-1,
.tabs-input-2:checked ~ .tabs-container .tabs-content-2,
.tabs-input-3:checked ~ .tabs-container .tabs-content-3,
.tabs-input-4:checked ~ .tabs-container .tabs-content-4,
.tabs-input-5:checked ~ .tabs-container .tabs-content-5,
.tabs-input-0:checked ~ .tabs-container .tabs-content-1 {display:inline-block;}
.tabs-input-1:checked ~ .tabs-container .tabs-inline.tabs-content-1,
.tabs-input-2:checked ~ .tabs-container .tabs-inline.tabs-content-2,
.tabs-input-3:checked ~ .tabs-container .tabs-inline.tabs-content-3,
.tabs-input-4:checked ~ .tabs-container .tabs-inline.tabs-content-4,
.tabs-input-5:checked ~ .tabs-container .tabs-inline.tabs-content-5,
.tabs-input-0:checked ~ .tabs-container .tabs-inline.tabs-content-1 {display:inline;}
.tabs-input-1:checked ~ .tabs-container .tabs-block.tabs-content-1,
.tabs-input-2:checked ~ .tabs-container .tabs-block.tabs-content-2,
.tabs-input-3:checked ~ .tabs-container .tabs-block.tabs-content-3,
.tabs-input-4:checked ~ .tabs-container .tabs-block.tabs-content-4,
.tabs-input-5:checked ~ .tabs-container .tabs-block.tabs-content-5,
.tabs-input-0:checked ~ .tabs-container .tabs-block.tabs-content-1 {display:block;}
/* The same styles, but with .checked instead of :checked, for browsers that rely on the JavaScript fallback */
.tabs-input-1.checked ~ .tabs-container .tabs-content-1,
.tabs-input-2.checked ~ .tabs-container .tabs-content-2,
.tabs-input-3.checked ~ .tabs-container .tabs-content-3,
.tabs-input-4.checked ~ .tabs-container .tabs-content-4,
.tabs-input-5.checked ~ .tabs-container .tabs-content-5,
.tabs-input-0.checked ~ .tabs-container .tabs-content-1 {display:inline-block;}
.tabs-input-1.checked ~ .tabs-container .tabs-inline.tabs-content-1,
.tabs-input-2.checked ~ .tabs-container .tabs-inline.tabs-content-2,
.tabs-input-3.checked ~ .tabs-container .tabs-inline.tabs-content-3,
.tabs-input-4.checked ~ .tabs-container .tabs-inline.tabs-content-4,
.tabs-input-5.checked ~ .tabs-container .tabs-inline.tabs-content-5,
.tabs-input-0.checked ~ .tabs-container .tabs-inline.tabs-content-1 {display:inline;}
.tabs-input-1.checked ~ .tabs-container .tabs-block.tabs-content-1,
.tabs-input-2.checked ~ .tabs-container .tabs-block.tabs-content-2,
.tabs-input-3.checked ~ .tabs-container .tabs-block.tabs-content-3,
.tabs-input-4.checked ~ .tabs-container .tabs-block.tabs-content-4,
.tabs-input-5.checked ~ .tabs-container .tabs-block.tabs-content-5,
.tabs-input-0.checked ~ .tabs-container .tabs-block.tabs-content-1 {display:block;}
.tabs-dropdown .tabs-content,.tabs-dropdown .tabs-container,.tabs-dropdown li,.tabs-dropdown ul,.tabs-dropdown ol {background-color: white /* Malicious data in tabs-dropdown-bgcolor */}
/*]]>*/</style>
</head>
<body class="skin-vector-legacy mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Ansys_fr rootpage-Ansys_fr skin-vector action-view"><div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body" role="main">
	<a id="top"></a>
	<div id="siteNotice"></div>
	<div class="mw-indicators">
	<div id="mw-indicator-languageselector" class="mw-indicator"><span id="languageselector-box-1" class="languageselector " style=""><form name="languageselector-form-1" id="languageselector-form-1" method="get" action="/mediawiki/index.php" style="display:inline;"><input type="hidden" value="Ansys/fr" name="title"><select name="setlang" id="languageselector-select-1" style=""><option value="aae">ArbÃ«risht</option><option value="ab">Ğ°Ô¥ÑÑˆÓ™Ğ°</option><option value="abs">bahasa ambon</option><option value="ace">AcÃ¨h</option><option value="acf">KwÃ©yÃ²l Sent Lisi</option><option value="acm">Ø¹Ø±Ø§Ù‚ÙŠ</option><option value="ady">Ğ°Ğ´Ñ‹Ğ³Ğ°Ğ±Ğ·Ñ</option><option value="ady-cyrl">Ğ°Ğ´Ñ‹Ğ³Ğ°Ğ±Ğ·Ñ</option><option value="aeb">ØªÙˆÙ†Ø³ÙŠ / TÃ»nsÃ®</option><option value="aeb-arab">ØªÙˆÙ†Ø³ÙŠ</option><option value="aeb-latn">TÃ»nsÃ®</option><option value="af">Afrikaans</option><option value="aln">GegÃ«</option><option value="alt">Ğ°Ğ»Ñ‚Ğ°Ğ¹ Ñ‚Ğ¸Ğ»</option><option value="am">áŠ áˆ›áˆ­áŠ›</option><option value="ami">Pangcah</option><option value="an">aragonÃ©s</option><option value="ang">Ã†nglisc</option><option value="ann">Obolo</option><option value="anp">à¤…à¤‚à¤—à¤¿à¤•à¤¾</option><option value="apc">Ø´Ø§Ù…ÙŠ</option><option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option><option value="arc">ÜÜªÜ¡ÜÜ</option><option value="arn">mapudungun</option><option value="arq">Ø¬Ø§Ø²Ø§ÙŠØ±ÙŠØ©</option><option value="ary">Ø§Ù„Ø¯Ø§Ø±Ø¬Ø©</option><option value="arz">Ù…ØµØ±Ù‰</option><option value="as">à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾</option><option value="ase">American sign language</option><option value="ast">asturianu</option><option value="atj">Atikamekw</option><option value="av">Ğ°Ğ²Ğ°Ñ€</option><option value="avk">Kotava</option><option value="awa">à¤…à¤µà¤§à¥€</option><option value="ay">Aymar aru</option><option value="az">azÉ™rbaycanca</option><option value="azb">ØªÛ†Ø±Ú©Ø¬Ù‡</option><option value="ba">Ğ±Ğ°ÑˆÒ¡Ğ¾Ñ€Ñ‚ÑĞ°</option><option value="ban">Basa Bali</option><option value="ban-bali">á¬©á¬²á¬©á¬®á¬¶</option><option value="bar">Boarisch</option><option value="bbc">Batak Toba</option><option value="bbc-latn">Batak Toba</option><option value="bcc">Ø¬Ù‡Ù„Ø³Ø±ÛŒ Ø¨Ù„ÙˆÚ†ÛŒ</option><option value="bci">wawle</option><option value="bcl">Bikol Central</option><option value="bdr">Bajau Sama</option><option value="be">Ğ±ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ</option><option value="be-tarask">Ğ±ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ (Ñ‚Ğ°Ñ€Ğ°ÑˆĞºĞµĞ²Ñ–Ñ†Ğ°)</option><option value="bew">Betawi</option><option value="bg">Ğ±ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸</option><option value="bgc">à¤¹à¤°à¤¿à¤¯à¤¾à¤£à¤µà¥€</option><option value="bgn">Ø±ÙˆÚ† Ú©Ù¾ØªÛŒÙ† Ø¨Ù„ÙˆÚ†ÛŒ</option><option value="bh">à¤­à¥‹à¤œà¤ªà¥à¤°à¥€</option><option value="bho">à¤­à¥‹à¤œà¤ªà¥à¤°à¥€</option><option value="bi">Bislama</option><option value="bjn">Banjar</option><option value="blk">á€•á€¡á€­á€¯á€á€ºá‚á€˜á€¬á‚á€á€¬á‚</option><option value="bm">bamanankan</option><option value="bn">à¦¬à¦¾à¦‚à¦²à¦¾</option><option value="bo">à½–à½¼à½‘à¼‹à½¡à½²à½‚</option><option value="bpy">à¦¬à¦¿à¦·à§à¦£à§à¦ªà§à¦°à¦¿à¦¯à¦¼à¦¾ à¦®à¦£à¦¿à¦ªà§à¦°à§€</option><option value="bqi">Ø¨Ø®ØªÛŒØ§Ø±ÛŒ</option><option value="br">brezhoneg</option><option value="brh">BrÃ¡huÃ­</option><option value="bs">bosanski</option><option value="btm">Batak Mandailing</option><option value="bto">Iriga Bicolano</option><option value="bug">Basa Ugi</option><option value="bxr">Ğ±ÑƒÑ€ÑĞ°Ğ´</option><option value="ca">catalÃ </option><option value="cbk-zam">Chavacano de Zamboanga</option><option value="ccp">ğ‘„Œğ‘„‹ğ‘„´ğ‘„Ÿğ‘„³ğ‘„¦</option><option value="cdo">é–©æ±èª / MÃ¬ng-dÄ•Ì¤ng-ngá¹³Ì„</option><option value="ce">Ğ½Ğ¾Ñ…Ñ‡Ğ¸Ğ¹Ğ½</option><option value="ceb">Cebuano</option><option value="ch">Chamoru</option><option value="chn">chinuk wawa</option><option value="chr">á£á³á©</option><option value="chy">TsetsÃªhestÃ¢hese</option><option value="ckb">Ú©ÙˆØ±Ø¯ÛŒ</option><option value="co">corsu</option><option value="cps">CapiceÃ±o</option><option value="cpx">è†ä»™èª / PÃ³-sing-gá¹³Ì‚</option><option value="cpx-hans">è†ä»™è¯­ï¼ˆç®€ä½“ï¼‰</option><option value="cpx-hant">è†ä»™èªï¼ˆç¹é«”ï¼‰</option><option value="cr">NÄ“hiyawÄ“win / á“€á¦áƒá”­ááá£</option><option value="crh">qÄ±rÄ±mtatarca</option><option value="crh-cyrl">ĞºÑŠÑ‹Ñ€Ñ‹Ğ¼Ñ‚Ğ°Ñ‚Ğ°Ñ€Ğ´Ğ¶Ğ° (ĞšĞ¸Ñ€Ğ¸Ğ»Ğ»)</option><option value="crh-latn">qÄ±rÄ±mtatarca (Latin)</option><option value="crh-ro">tatarÅŸa</option><option value="cs">ÄeÅ¡tina</option><option value="csb">kaszÃ«bsczi</option><option value="cu">ÑĞ»Ğ¾Ğ²Ñ£Ğ½ÑŒÑĞºÑŠ / â°”â°â°‘â°‚â°¡â°â° â°”â°â°Ÿ</option><option value="cv">Ñ‡Ó‘Ğ²Ğ°ÑˆĞ»Ğ°</option><option value="cy">Cymraeg</option><option value="da">dansk</option><option value="dag">dagbanli</option><option value="de">Deutsch</option><option value="de-at">Ã–sterreichisches Deutsch</option><option value="de-ch">Schweizer Hochdeutsch</option><option value="de-formal">Deutsch (Sie-Form)</option><option value="dga">Dagaare</option><option value="din">ThuÉ”Å‹jÃ¤Å‹</option><option value="diq">Zazaki</option><option value="dsb">dolnoserbski</option><option value="dtp">Kadazandusun</option><option value="dty">à¤¡à¥‹à¤Ÿà¥‡à¤²à¥€</option><option value="dua">DuÃ¡lÃ¡</option><option value="dv">Ş‹Ş¨ŞˆŞ¬Ş€Ş¨Ş„Ş¦ŞŞ°</option><option value="dz">à½‡à½¼à½„à¼‹à½</option><option value="ee">eÊ‹egbe</option><option value="efi">Efá»‹k</option><option value="egl">emiliÃ n e rumagnÃ²l</option><option value="el">Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option><option value="eml">emiliÃ n e rumagnÃ²l</option><option value="en" selected="">English</option><option value="en-ca">Canadian English</option><option value="en-gb">British English</option><option value="eo">Esperanto</option><option value="es">espaÃ±ol</option><option value="es-formal">espaÃ±ol (formal)</option><option value="et">eesti</option><option value="eu">euskara</option><option value="ext">estremeÃ±u</option><option value="fa">ÙØ§Ø±Ø³ÛŒ</option><option value="fat">mfantse</option><option value="ff">Fulfulde</option><option value="fi">suomi</option><option value="fit">meÃ¤nkieli</option><option value="fj">Na Vosa Vakaviti</option><option value="fo">fÃ¸royskt</option><option value="fon">fÉ”Ì€ngbÃ¨</option><option value="fr">franÃ§ais</option><option value="frc">franÃ§ais cadien</option><option value="frp">arpetan</option><option value="frr">Nordfriisk</option><option value="fur">furlan</option><option value="fy">Frysk</option><option value="ga">Gaeilge</option><option value="gaa">Ga</option><option value="gag">Gagauz</option><option value="gan">è´›èª</option><option value="gan-hans">èµ£è¯­ï¼ˆç®€ä½“ï¼‰</option><option value="gan-hant">è´›èªï¼ˆç¹é«”ï¼‰</option><option value="gcf">krÃ©yÃ²l Gwadloup</option><option value="gcr">kriyÃ²l gwiyannen</option><option value="gd">GÃ idhlig</option><option value="gl">galego</option><option value="gld">Ğ½Ğ°Ì„Ğ½Ğ¸</option><option value="glk">Ú¯ÛŒÙ„Ú©ÛŒ</option><option value="gn">AvaÃ±e'áº½</option><option value="gom">à¤—à¥‹à¤‚à¤¯à¤šà¥€ à¤•à¥‹à¤‚à¤•à¤£à¥€ / GÃµychi Konknni</option><option value="gom-deva">à¤—à¥‹à¤‚à¤¯à¤šà¥€ à¤•à¥‹à¤‚à¤•à¤£à¥€</option><option value="gom-latn">GÃµychi Konknni</option><option value="gor">Bahasa Hulontalo</option><option value="got">ğŒ²ğŒ¿ğ„ğŒ¹ğƒğŒº</option><option value="gpe">Ghanaian Pidgin</option><option value="grc">á¼ˆÏÏ‡Î±Î¯Î± á¼‘Î»Î»Î·Î½Î¹Îºá½´</option><option value="gsw">Alemannisch</option><option value="gu">àª—à«àªœàª°àª¾àª¤à«€</option><option value="guc">wayuunaiki</option><option value="gur">farefare</option><option value="guw">gungbe</option><option value="gv">Gaelg</option><option value="ha">Hausa</option><option value="hak">å®¢å®¶èª / Hak-kÃ¢-ngÃ®</option><option value="haw">HawaiÊ»i</option><option value="he">×¢×‘×¨×™×ª</option><option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option><option value="hif">Fiji Hindi</option><option value="hif-latn">Fiji Hindi</option><option value="hil">Ilonggo</option><option value="hno">ÛÙ†Ø¯Ú©Ùˆ</option><option value="hr">hrvatski</option><option value="hrx">Hunsrik</option><option value="hsb">hornjoserbsce</option><option value="hsn">æ¹˜èª</option><option value="ht">KreyÃ²l ayisyen</option><option value="hu">magyar</option><option value="hu-formal">magyar (formal)</option><option value="hy">Õ°Õ¡ÕµÕ¥Ö€Õ¥Õ¶</option><option value="hyw">Ô±Ö€Õ¥Ö‚Õ´Õ¿Õ¡Õ°Õ¡ÕµÕ¥Ö€Õ§Õ¶</option><option value="ia">interlingua</option><option value="iba">Jaku Iban</option><option value="ibb">ibibio</option><option value="id">Bahasa Indonesia</option><option value="ie">Interlingue</option><option value="ig">Igbo</option><option value="igl">Igala</option><option value="ii">ê†‡ê‰™</option><option value="ik">IÃ±upiatun</option><option value="ike-cans">áƒá“„á’ƒá‘á‘á‘¦</option><option value="ike-latn">inuktitut</option><option value="ilo">Ilokano</option><option value="inh">Ğ³Ó€Ğ°Ğ»Ğ³Ó€Ğ°Ğ¹</option><option value="io">Ido</option><option value="is">Ã­slenska</option><option value="isv-cyrl">Ğ¼ĞµĞ´Ğ¶ÑƒÑĞ»Ğ¾Ğ²Ñ˜Ğ°Ğ½ÑĞºÑ‹</option><option value="isv-latn">medÅ¾uslovjansky</option><option value="it">italiano</option><option value="iu">áƒá“„á’ƒá‘á‘á‘¦ / inuktitut</option><option value="ja">æ—¥æœ¬èª</option><option value="jam">Patois</option><option value="jbo">la .lojban.</option><option value="jut">jysk</option><option value="jv">Jawa</option><option value="ka">áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜</option><option value="kaa">Qaraqalpaqsha</option><option value="kab">Taqbaylit</option><option value="kai">Karai-karai</option><option value="kbd">Ğ°Ğ´Ñ‹Ğ³ÑĞ±Ğ·Ñ</option><option value="kbd-cyrl">Ğ°Ğ´Ñ‹Ğ³ÑĞ±Ğ·Ñ</option><option value="kbp">KabÉ©yÉ›</option><option value="kcg">Tyap</option><option value="kea">kabuverdianu</option><option value="kg">Kongo</option><option value="kge">Kumoring</option><option value="khw">Ú©Ú¾ÙˆØ§Ø±</option><option value="ki">GÄ©kÅ©yÅ©</option><option value="kiu">KÄ±rmancki</option><option value="kjh">Ñ…Ğ°ĞºĞ°Ñ</option><option value="kjp">á€–á á€¯á€¶á€œá€­á€€á€º</option><option value="kk">Ò›Ğ°Ğ·Ğ°Ò›ÑˆĞ°</option><option value="kk-arab">Ù‚Ø§Ø²Ø§Ù‚Ø´Ø§ (ØªÙ´ÙˆØªÛ•)</option><option value="kk-cn">Ù‚Ø§Ø²Ø§Ù‚Ø´Ø§ (Ø¬Û‡Ù†Ú¯Ùˆ)</option><option value="kk-cyrl">Ò›Ğ°Ğ·Ğ°Ò›ÑˆĞ° (ĞºĞ¸Ñ€Ğ¸Ğ»)</option><option value="kk-kz">Ò›Ğ°Ğ·Ğ°Ò›ÑˆĞ° (ÒšĞ°Ğ·Ğ°Ò›ÑÑ‚Ğ°Ğ½)</option><option value="kk-latn">qazaqÅŸa (latÄ±n)</option><option value="kk-tr">qazaqÅŸa (TÃ¼rkÃ¯ya)</option><option value="kl">kalaallisut</option><option value="km">á—á¶áŸá¶ááŸ’á˜áŸ‚áš</option><option value="kn">à²•à²¨à³à²¨à²¡</option><option value="knc">Yerwa Kanuri</option><option value="ko">í•œêµ­ì–´</option><option value="ko-kp">ì¡°ì„ ë§</option><option value="koi">Ğ¿ĞµÑ€ĞµĞ¼ ĞºĞ¾Ğ¼Ğ¸</option><option value="kr">kanuri</option><option value="krc">ĞºÑŠĞ°Ñ€Ğ°Ñ‡Ğ°Ğ¹-Ğ¼Ğ°Ğ»ĞºÑŠĞ°Ñ€</option><option value="kri">Krio</option><option value="krj">Kinaray-a</option><option value="krl">karjal</option><option value="ks">à¤•à¥‰à¤¶à¥à¤° / Ú©Ù²Ø´ÙØ±</option><option value="ks-arab">Ú©Ù²Ø´ÙØ±</option><option value="ks-deva">à¤•à¥‰à¤¶à¥à¤°</option><option value="ksh">Ripoarisch</option><option value="ksw">á€…á€¾á€®á¤</option><option value="ku">kurdÃ®</option><option value="ku-arab">Ú©ÙˆØ±Ø¯ÛŒ (Ø¹Û•Ø±Û•Ø¨ÛŒ)</option><option value="ku-latn">kurdÃ® (latÃ®nÃ®)</option><option value="kum">ĞºÑŠÑƒĞ¼ÑƒĞºÑŠ</option><option value="kus">KÊ‹saal</option><option value="kv">ĞºĞ¾Ğ¼Ğ¸</option><option value="kw">kernowek</option><option value="ky">ĞºÑ‹Ñ€Ğ³Ñ‹Ğ·Ñ‡Ğ°</option><option value="la">Latina</option><option value="lad">Ladino</option><option value="lb">LÃ«tzebuergesch</option><option value="lbe">Ğ»Ğ°ĞºĞºÑƒ</option><option value="lez">Ğ»ĞµĞ·Ğ³Ğ¸</option><option value="lfn">Lingua Franca Nova</option><option value="lg">Luganda</option><option value="li">Limburgs</option><option value="lij">Ligure</option><option value="liv">LÄ«vÃµ kÄ“Ä¼</option><option value="lki">Ù„Û•Ú©ÛŒ</option><option value="lld">Ladin</option><option value="lmo">lombard</option><option value="ln">lingÃ¡la</option><option value="lo">àº¥àº²àº§</option><option value="loz">Silozi</option><option value="lrc">Ù„ÛŠØ±ÛŒ Ø´ÙˆÙ…Ø§Ù„ÛŒ</option><option value="lt">lietuviÅ³</option><option value="ltg">latgaÄ¼u</option><option value="lua">ciluba</option><option value="lus">Mizo Å£awng</option><option value="luz">Ù„Ø¦Ø±ÛŒ Ø¯ÙˆÙ™Ù…ÛŒÙ†ÛŒ</option><option value="lv">latvieÅ¡u</option><option value="lzh">æ–‡è¨€</option><option value="lzz">Lazuri</option><option value="mad">MadhurÃ¢</option><option value="mag">à¤®à¤—à¤¹à¥€</option><option value="mai">à¤®à¥ˆà¤¥à¤¿à¤²à¥€</option><option value="map-bms">Basa Banyumasan</option><option value="mdf">Ğ¼Ğ¾ĞºÑˆĞµĞ½ÑŒ</option><option value="mg">Malagasy</option><option value="mhr">Ğ¾Ğ»Ñ‹Ğº Ğ¼Ğ°Ñ€Ğ¸Ğ¹</option><option value="mi">MÄori</option><option value="min">Minangkabau</option><option value="mk">Ğ¼Ğ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸</option><option value="ml">à´®à´²à´¯à´¾à´³à´‚</option><option value="mn">Ğ¼Ğ¾Ğ½Ğ³Ğ¾Ğ»</option><option value="mnc">manju gisun</option><option value="mnc-latn">manju gisun</option><option value="mnc-mong">á ®á  á ¨á µá¡  á¡¤á¡³á °á¡ á ¨</option><option value="mni">ê¯ƒê¯¤ê¯‡ê¯© ê¯‚ê¯£ê¯Ÿ</option><option value="mnw">á€˜á€¬á€á€¬á€™á€”á€º</option><option value="mo">Ğ¼Ğ¾Ğ»Ğ´Ğ¾Ğ²ĞµĞ½ÑÑĞºÑ</option><option value="mos">moore</option><option value="mr">à¤®à¤°à¤¾à¤ à¥€</option><option value="mrh">Mara</option><option value="mrj">ĞºÑ‹Ñ€Ñ‹Ğº Ğ¼Ğ°Ñ€Ñ‹</option><option value="ms">Bahasa Melayu</option><option value="ms-arab">Ø¨Ù‡Ø§Ø³ Ù…Ù„Ø§ÙŠÙˆ</option><option value="mt">Malti</option><option value="mui">Baso Palembang</option><option value="mwl">MirandÃ©s</option><option value="my">á€™á€¼á€”á€ºá€™á€¬á€˜á€¬á€á€¬</option><option value="myv">ÑÑ€Ğ·ÑĞ½ÑŒ</option><option value="mzn">Ù…Ø§Ø²ÙØ±ÙˆÙ†ÛŒ</option><option value="na">Dorerin Naoero</option><option value="nah">NÄhuatl</option><option value="nan">é–©å—èª / BÃ¢n-lÃ¢m-gÃº</option><option value="nan-hant">é–©å—èªï¼ˆå‚³çµ±æ¼¢å­—ï¼‰</option><option value="nan-latn-pehoeji">BÃ¢n-lÃ¢m-gÃº (PeÌh-Åe-jÄ«)</option><option value="nan-latn-tailo">BÃ¢n-lÃ¢m-gÃº (TÃ¢i-lÃ´)</option><option value="nap">Napulitano</option><option value="nb">norsk bokmÃ¥l</option><option value="nds">PlattdÃ¼Ã¼tsch</option><option value="nds-nl">Nedersaksies</option><option value="ne">à¤¨à¥‡à¤ªà¤¾à¤²à¥€</option><option value="new">à¤¨à¥‡à¤ªà¤¾à¤² à¤­à¤¾à¤·à¤¾</option><option value="nia">Li Niha</option><option value="nit">à°•à±Šà°²à°¾à°®à°¿</option><option value="niu">NiuÄ“</option><option value="nl">Nederlands</option><option value="nl-informal">Nederlands (informeel)</option><option value="nmz">nawdm</option><option value="nn">norsk nynorsk</option><option value="nod">á¨£á©¤á©´á¨¾á©®á©¬á©¥á¨¦</option><option value="nog">Ğ½Ğ¾Ğ³Ğ°Ğ¹ÑˆĞ°</option><option value="nov">Novial</option><option value="nqo">ß’ßß</option><option value="nr">isiNdebele seSewula</option><option value="nrm">Nouormand</option><option value="nso">Sesotho sa Leboa</option><option value="nup">Nupe</option><option value="nv">DinÃ© bizaad</option><option value="ny">Chi-Chewa</option><option value="nyn">runyankore</option><option value="nyo">Orunyoro</option><option value="nys">Nyunga</option><option value="oc">occitan</option><option value="ojb">Ojibwemowin</option><option value="olo">livvinkarjala</option><option value="om">Oromoo</option><option value="or">à¬“à¬¡à¬¼à¬¿à¬†</option><option value="os">Ğ¸Ñ€Ğ¾Ğ½</option><option value="pa">à¨ªà©°à¨œà¨¾à¨¬à©€</option><option value="pag">Pangasinan</option><option value="pam">Kapampangan</option><option value="pap">Papiamentu</option><option value="pcd">Picard</option><option value="pcm">NaijÃ¡</option><option value="pdc">Deitsch</option><option value="pdt">Plautdietsch</option><option value="pfl">PÃ¤lzisch</option><option value="pi">à¤ªà¤¾à¤²à¤¿</option><option value="pih">Norfuk / Pitkern</option><option value="pl">polski</option><option value="pms">PiemontÃ¨is</option><option value="pnb">Ù¾Ù†Ø¬Ø§Ø¨ÛŒ</option><option value="pnt">Î Î¿Î½Ï„Î¹Î±ÎºÎ¬</option><option value="prg">prÅ«siskan</option><option value="ps">Ù¾ÚšØªÙˆ</option><option value="pt">portuguÃªs</option><option value="pt-br">portuguÃªs do Brasil</option><option value="pwn">pinayuanan</option><option value="qqq">Message documentation</option><option value="qu">Runa Simi</option><option value="qug">Runa shimi</option><option value="rgn">RumagnÃ´l</option><option value="rif">Tarifit</option><option value="rki">á€›á€á€­á€¯á€„á€º</option><option value="rm">rumantsch</option><option value="rmc">romaÅˆi Ähib</option><option value="rmy">romani Ähib</option><option value="rn">ikirundi</option><option value="ro">romÃ¢nÄƒ</option><option value="roa-tara">tarandÃ­ne</option><option value="rsk">Ñ€ÑƒÑĞºĞ¸</option><option value="ru">Ñ€ÑƒÑÑĞºĞ¸Ğ¹</option><option value="rue">Ñ€ÑƒÑĞ¸Ğ½ÑŒÑĞºÑ‹Ğ¹</option><option value="rup">armÃ£neashti</option><option value="ruq">VlÄƒheÅŸte</option><option value="ruq-cyrl">Ğ’Ğ»Ğ°Ñ…ĞµÑÑ‚Ğµ</option><option value="ruq-latn">VlÄƒheÅŸte</option><option value="rut">Ğ¼Ñ‹Ñ…Ğ°Ó€Ğ±Ğ¸ÑˆĞ´Ñ‹</option><option value="rw">Ikinyarwanda</option><option value="ryu">ã†ã¡ãªãƒ¼ãã¡</option><option value="sa">à¤¸à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤®à¥</option><option value="sah">ÑĞ°Ñ…Ğ° Ñ‚Ñ‹Ğ»Ğ°</option><option value="sat">á±¥á±Ÿá±±á±›á±Ÿá±²á±¤</option><option value="sc">sardu</option><option value="scn">sicilianu</option><option value="sco">Scots</option><option value="sd">Ø³Ù†ÚŒÙŠ</option><option value="sdc">Sassaresu</option><option value="sdh">Ú©ÙˆØ±Ø¯ÛŒ Ø®ÙˆØ§Ø±Ú¯</option><option value="se">davvisÃ¡megiella</option><option value="se-fi">davvisÃ¡megiella (Suoma bealde)</option><option value="se-no">davvisÃ¡megiella (Norgga bealde)</option><option value="se-se">davvisÃ¡megiella (RuoÅ§a bealde)</option><option value="sei">Cmique Itom</option><option value="ses">Koyraboro Senni</option><option value="sg">SÃ¤ngÃ¶</option><option value="sgs">Å¾emaitÄ—Å¡ka</option><option value="sh">srpskohrvatski / ÑÑ€Ğ¿ÑĞºĞ¾Ñ…Ñ€Ğ²Ğ°Ñ‚ÑĞºĞ¸</option><option value="sh-cyrl">ÑÑ€Ğ¿ÑĞºĞ¾Ñ…Ñ€Ğ²Ğ°Ñ‚ÑĞºĞ¸ (Ñ›Ğ¸Ñ€Ğ¸Ğ»Ğ¸Ñ†Ğ°)</option><option value="sh-latn">srpskohrvatski (latinica)</option><option value="shi">Taclá¸¥it</option><option value="shn">á½á‚ƒá‚‡á€á‚ƒá‚‡á€á‚†á€¸ </option><option value="shy">tacawit</option><option value="shy-latn">tacawit</option><option value="si">à·ƒà·’à¶‚à·„à¶½</option><option value="sjd">ĞºÓ£Ğ»Ğ»Ñ‚ ÑĞ°Ì„Ğ¼ÑŒ ĞºÓ£Ğ»Ğ»</option><option value="sje">bidumsÃ¡megiella</option><option value="sk">slovenÄina</option><option value="skr">Ø³Ø±Ø§Ø¦ÛŒÚ©ÛŒ</option><option value="skr-arab">Ø³Ø±Ø§Ø¦ÛŒÚ©ÛŒ</option><option value="sl">slovenÅ¡Äina</option><option value="sli">SchlÃ¤sch</option><option value="sm">Gagana Samoa</option><option value="sma">Ã¥arjelsaemien</option><option value="smn">anarÃ¢Å¡kielÃ¢</option><option value="sms">nuÃµrttsÃ¤Ã¤Ê¹mÇ©iÃµll</option><option value="sn">chiShona</option><option value="so">Soomaaliga</option><option value="sq">shqip</option><option value="sr">ÑÑ€Ğ¿ÑĞºĞ¸ / srpski</option><option value="sr-ec">ÑÑ€Ğ¿ÑĞºĞ¸ (Ñ›Ğ¸Ñ€Ğ¸Ğ»Ğ¸Ñ†Ğ°)</option><option value="sr-el">srpski (latinica)</option><option value="srn">Sranantongo</option><option value="sro">sardu campidanesu</option><option value="ss">SiSwati</option><option value="st">Sesotho</option><option value="stq">Seeltersk</option><option value="sty">ÑĞµĞ±ĞµÑ€Ñ‚Ğ°Ñ‚Ğ°Ñ€</option><option value="su">Sunda</option><option value="sv">svenska</option><option value="sw">Kiswahili</option><option value="syl">ê ê ¤ê Ÿê ê ¤</option><option value="szl">Å›lÅ¯nski</option><option value="szy">Sakizaya</option><option value="ta">à®¤à®®à®¿à®´à¯</option><option value="tay">Tayal</option><option value="tcy">à²¤à³à²³à³</option><option value="tdd">á¥–á¥­á¥° á¥–á¥¬á¥² á¥‘á¥¨á¥’á¥°</option><option value="te">à°¤à±†à°²à±à°—à±</option><option value="tet">tetun</option><option value="tg">Ñ‚Ğ¾Ò·Ğ¸ĞºÓ£</option><option value="tg-cyrl">Ñ‚Ğ¾Ò·Ğ¸ĞºÓ£</option><option value="tg-latn">tojikÄ«</option><option value="th">à¹„à¸—à¸¢</option><option value="ti">á‰µáŒáˆ­áŠ›</option><option value="tig">á‰µáŒáˆ¬</option><option value="tk">TÃ¼rkmenÃ§e</option><option value="tl">Tagalog</option><option value="tly">tolÄ±ÅŸi</option><option value="tn">Setswana</option><option value="to">lea faka-Tonga</option><option value="tok">toki pona</option><option value="tpi">Tok Pisin</option><option value="tr">TÃ¼rkÃ§e</option><option value="tru">á¹ªuroyo</option><option value="trv">Seediq</option><option value="ts">Xitsonga</option><option value="tt">Ñ‚Ğ°Ñ‚Ğ°Ñ€Ñ‡Ğ° / tatarÃ§a</option><option value="tt-cyrl">Ñ‚Ğ°Ñ‚Ğ°Ñ€Ñ‡Ğ°</option><option value="tt-latn">tatarÃ§a</option><option value="ttj">Orutooro</option><option value="tum">chiTumbuka</option><option value="tw">Twi</option><option value="ty">reo tahiti</option><option value="tyv">Ñ‚Ñ‹Ğ²Ğ° Ğ´Ñ‹Ğ»</option><option value="tzm">âµœâ´°âµâ´°âµ£âµ‰âµ–âµœ</option><option value="udm">ÑƒĞ´Ğ¼ÑƒÑ€Ñ‚</option><option value="ug">Ø¦Û‡ÙŠØºÛ‡Ø±Ú†Û• / Uyghurche</option><option value="ug-arab">Ø¦Û‡ÙŠØºÛ‡Ø±Ú†Û•</option><option value="ug-latn">Uyghurche</option><option value="uk">ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option><option value="ur">Ø§Ø±Ø¯Ùˆ</option><option value="uz">oÊ»zbekcha / ÑĞ·Ğ±ĞµĞºÑ‡Ğ°</option><option value="ve">Tshivenda</option><option value="vec">vÃ¨neto</option><option value="vep">vepsÃ¤n kelâ€™</option><option value="vi">Tiáº¿ng Viá»‡t</option><option value="vls">West-Vlams</option><option value="vmf">MainfrÃ¤nkisch</option><option value="vmw">emakhuwa</option><option value="vo">VolapÃ¼k</option><option value="vot">VaÄÄa</option><option value="vro">vÃµro</option><option value="wa">walon</option><option value="wal">wolaytta</option><option value="war">Winaray</option><option value="wls">FakaÊ»uvea</option><option value="wo">Wolof</option><option value="wuu">å´è¯­</option><option value="wuu-hans">å´è¯­ï¼ˆç®€ä½“ï¼‰</option><option value="wuu-hant">å³èªï¼ˆæ­£é«”ï¼‰</option><option value="xal">Ñ…Ğ°Ğ»ÑŒĞ¼Ğ³</option><option value="xh">isiXhosa</option><option value="xmf">áƒ›áƒáƒ áƒ’áƒáƒšáƒ£áƒ áƒ˜</option><option value="xsy">saisiyat</option><option value="yi">×™×™Ö´×“×™×©</option><option value="yo">YorÃ¹bÃ¡</option><option value="yrl">Nháº½áº½gatÃº</option><option value="yue">ç²µèª</option><option value="yue-hans">ç²µè¯­ï¼ˆç®€ä½“ï¼‰</option><option value="yue-hant">ç²µèªï¼ˆç¹é«”ï¼‰</option><option value="za">Vahcuengh</option><option value="zea">ZeÃªuws</option><option value="zgh">âµœâ´°âµâ´°âµ£âµ‰âµ–âµœ âµœâ´°âµâ´°âµ¡â´°âµ¢âµœ</option><option value="zh">ä¸­æ–‡</option><option value="zh-cn">ä¸­æ–‡ï¼ˆä¸­å›½å¤§é™†ï¼‰</option><option value="zh-hans">ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰</option><option value="zh-hant">ä¸­æ–‡ï¼ˆç¹é«”ï¼‰</option><option value="zh-hk">ä¸­æ–‡ï¼ˆé¦™æ¸¯ï¼‰</option><option value="zh-mo">ä¸­æ–‡ï¼ˆæ¾³é–€ï¼‰</option><option value="zh-my">ä¸­æ–‡ï¼ˆé©¬æ¥è¥¿äºšï¼‰</option><option value="zh-sg">ä¸­æ–‡ï¼ˆæ–°åŠ å¡ï¼‰</option><option value="zh-tw">ä¸­æ–‡ï¼ˆè‡ºç£ï¼‰</option><option value="zu">isiZulu</option></select><input id="languageselector-commit-1" style="" type="submit" value="set"></form></span></div>
	</div>
	<h1 id="firstHeading" class="firstHeading mw-first-heading">Ansys</h1>
	<div id="bodyContent" class="vector-body">
		<div id="siteSub" class="noprint">From Alliance Doc</div>
		<div id="contentSub"><div id="mw-content-subtitle"></div></div>
		<div id="contentSub2"></div>
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#searchInput">Jump to search</a>
		<div id="mw-content-text" class="mw-body-content"><div class="mw-pt-translate-header noprint" dir="ltr" lang="en">This page is a <span class="plainlinks"><a rel="nofollow" class="external text" href="https://docs.alliancecan.ca/mediawiki/index.php?title=Special:Translate&amp;group=page-Ansys&amp;action=page&amp;filter=&amp;language=fr">translated version</a></span> of the page <a href="/wiki/Ansys" title="Ansys">Ansys</a> and the translation is 100% complete.</div><div class="mw-content-ltr mw-parser-output" lang="fr" dir="ltr"><div class="mw-pt-languages noprint navigation-not-searchable" lang="en" dir="ltr"><div class="mw-pt-languages-label">Other languages:</div><ul class="mw-pt-languages-list"><li><a href="/wiki/Ansys" class="mw-pt-languages-ui mw-pt-progress mw-pt-progress--complete" title="Ansys (100% translated)" lang="en" dir="ltr">English</a></li>
<li><span class="mw-pt-languages-selected mw-pt-progress mw-pt-progress--complete" lang="fr" dir="ltr">franÃ§ais</span></li></ul></div>
<p><a rel="nofollow" class="external text" href="http://www.ansys.com/">Ansys</a> est une suite logicielle pour la conception 3D et la simulation. La suite comprend des applications comme <a rel="nofollow" class="external text" href="http://www.ansys.com/Products/Fluids/ANSYS-Fluent">Ansys Fluent</a> et <a rel="nofollow" class="external text" href="http://www.ansys.com/products/fluids/ansys-cfx">Ansys CFX</a>.
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Licence"><span class="tocnumber">1</span> <span class="toctext">Licence</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Configurer_votre_propre_fichier_de_licence"><span class="tocnumber">1.1</span> <span class="toctext">Configurer votre propre fichier de licence</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#Serveurs_de_licence_locaux"><span class="tocnumber">1.1.1</span> <span class="toctext">Serveurs de licence locaux</span></a>
<ul>
<li class="toclevel-4 tocsection-4"><a href="#PrÃªt_Ã _utiliser"><span class="tocnumber">1.1.1.1</span> <span class="toctext">PrÃªt Ã  utiliser</span></a></li>
<li class="toclevel-4 tocsection-5"><a href="#Configuration_requise"><span class="tocnumber">1.1.1.2</span> <span class="toctext">Configuration requise</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-6"><a href="#VÃ©rifier_la_licence"><span class="tocnumber">1.2</span> <span class="toctext">VÃ©rifier la licence</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#CompatibilitÃ©_des_versions"><span class="tocnumber">2</span> <span class="toctext">CompatibilitÃ© des versions</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Plateformes_supportÃ©es"><span class="tocnumber">2.1</span> <span class="toctext">Plateformes supportÃ©es</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#NouveautÃ©s"><span class="tocnumber">2.2</span> <span class="toctext">NouveautÃ©s</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Correctifs"><span class="tocnumber">2.3</span> <span class="toctext">Correctifs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Soumettre_des_tÃ¢ches_en_lot_sur_nos_grappes"><span class="tocnumber">3</span> <span class="toctext">Soumettre des tÃ¢ches en lot sur nos grappes</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Ansys_Fluent"><span class="tocnumber">3.1</span> <span class="toctext">Ansys Fluent</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Scripts_pour_l&#39;ordonnanceur_Slurm"><span class="tocnumber">3.1.1</span> <span class="toctext">Scripts pour l'ordonnanceur Slurm</span></a>
<ul>
<li class="toclevel-4 tocsection-14"><a href="#Utilisation_gÃ©nÃ©rale"><span class="tocnumber">3.1.1.1</span> <span class="toctext">Utilisation gÃ©nÃ©rale</span></a></li>
<li class="toclevel-4 tocsection-15"><a href="#Remise_en_file_d&#39;attente_pour_obtenir_la_licence"><span class="tocnumber">3.1.1.2</span> <span class="toctext">Remise en file d'attente pour obtenir la licence</span></a></li>
<li class="toclevel-4 tocsection-16"><a href="#RedÃ©marrage"><span class="tocnumber">3.1.1.3</span> <span class="toctext">RedÃ©marrage</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-17"><a href="#Fichiers_de_journalisation"><span class="tocnumber">3.1.2</span> <span class="toctext">Fichiers de journalisation</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Fonctions_UDF"><span class="tocnumber">3.1.3</span> <span class="toctext">Fonctions UDF</span></a>
<ul>
<li class="toclevel-4 tocsection-19"><a href="#InterpretÃ©"><span class="tocnumber">3.1.3.1</span> <span class="toctext">InterpretÃ©</span></a></li>
<li class="toclevel-4 tocsection-20"><a href="#CompilÃ©"><span class="tocnumber">3.1.3.2</span> <span class="toctext">CompilÃ©</span></a></li>
<li class="toclevel-4 tocsection-21"><a href="#ParallÃ¨le"><span class="tocnumber">3.1.3.3</span> <span class="toctext">ParallÃ¨le</span></a></li>
<li class="toclevel-4 tocsection-22"><a href="#DPM"><span class="tocnumber">3.1.3.4</span> <span class="toctext">DPM</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="#Ansys_CFX"><span class="tocnumber">3.2</span> <span class="toctext">Ansys CFX</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#Scripts_pour_l&#39;ordonnanceur_Slurm_2"><span class="tocnumber">3.2.1</span> <span class="toctext">Scripts pour l'ordonnanceur Slurm</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-25"><a href="#Workbench"><span class="tocnumber">3.3</span> <span class="toctext">Workbench</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#Scripts_pour_l&#39;ordonnanceur_Slurm_3"><span class="tocnumber">3.3.1</span> <span class="toctext">Scripts pour l'ordonnanceur Slurm</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-27"><a href="#Mechanical"><span class="tocnumber">3.4</span> <span class="toctext">Mechanical</span></a>
<ul>
<li class="toclevel-3 tocsection-28"><a href="#Scripts_pour_l&#39;ordonnanceur_Slurm_4"><span class="tocnumber">3.4.1</span> <span class="toctext">Scripts pour l'ordonnanceur Slurm</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-29"><a href="#Ansys_EDT"><span class="tocnumber">3.5</span> <span class="toctext">Ansys EDT</span></a>
<ul>
<li class="toclevel-3 tocsection-30"><a href="#Scripts_pour_l&#39;ordonnanceur_Slurm_5"><span class="tocnumber">3.5.1</span> <span class="toctext">Scripts pour l'ordonnanceur Slurm</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31"><a href="#Ansys_ROCKY"><span class="tocnumber">3.6</span> <span class="toctext">Ansys ROCKY</span></a>
<ul>
<li class="toclevel-3 tocsection-32"><a href="#Scripts_pour_l&#39;ordonnanceur_Slurm_6"><span class="tocnumber">3.6.1</span> <span class="toctext">Scripts pour l'ordonnanceur Slurm</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-33"><a href="#Mode_graphique"><span class="tocnumber">4</span> <span class="toctext">Mode graphique</span></a>
<ul>
<li class="toclevel-2 tocsection-34"><a href="#NÅ“uds_de_calcul"><span class="tocnumber">4.1</span> <span class="toctext">NÅ“uds de calcul</span></a>
<ul>
<li class="toclevel-3 tocsection-35"><a href="#Fluids"><span class="tocnumber">4.1.1</span> <span class="toctext">Fluids</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#Mapdl"><span class="tocnumber">4.1.2</span> <span class="toctext">Mapdl</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="#Workbench_2"><span class="tocnumber">4.1.3</span> <span class="toctext">Workbench</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#Ansys_EDT_2"><span class="tocnumber">4.1.4</span> <span class="toctext">Ansys EDT</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#Ensight"><span class="tocnumber">4.1.5</span> <span class="toctext">Ensight</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Rocky"><span class="tocnumber">4.1.6</span> <span class="toctext">Rocky</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-41"><a href="#NÅ“uds_VDI"><span class="tocnumber">4.2</span> <span class="toctext">NÅ“uds VDI</span></a>
<ul>
<li class="toclevel-3 tocsection-42"><a href="#Fluids_2"><span class="tocnumber">4.2.1</span> <span class="toctext">Fluids</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="#Mapdl_2"><span class="tocnumber">4.2.2</span> <span class="toctext">Mapdl</span></a></li>
<li class="toclevel-3 tocsection-44"><a href="#Workbench_3"><span class="tocnumber">4.2.3</span> <span class="toctext">Workbench</span></a></li>
<li class="toclevel-3 tocsection-45"><a href="#Ansys_EDT_3"><span class="tocnumber">4.2.4</span> <span class="toctext">Ansys EDT</span></a></li>
<li class="toclevel-3 tocsection-46"><a href="#Ensight_2"><span class="tocnumber">4.2.5</span> <span class="toctext">Ensight</span></a></li>
<li class="toclevel-3 tocsection-47"><a href="#Rocky_2"><span class="tocnumber">4.2.6</span> <span class="toctext">Rocky</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-48"><a href="#ProblÃ¨mes_avec_SSH"><span class="tocnumber">4.3</span> <span class="toctext">ProblÃ¨mes avec SSH</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-49"><a href="#ParticularitÃ©s_selon_le_site_d&#39;utilisation"><span class="tocnumber">5</span> <span class="toctext">ParticularitÃ©s selon le site d'utilisation</span></a>
<ul>
<li class="toclevel-2 tocsection-50"><a href="#Licence_SHARCNET"><span class="tocnumber">5.1</span> <span class="toctext">Licence SHARCNET</span></a>
<ul>
<li class="toclevel-3 tocsection-51"><a href="#Fichier_du_serveur_de_licence"><span class="tocnumber">5.1.1</span> <span class="toctext">Fichier du serveur de licence</span></a></li>
<li class="toclevel-3 tocsection-52"><a href="#Interroger_le_serveur_de_licence"><span class="tocnumber">5.1.2</span> <span class="toctext">Interroger le serveur de licence</span></a></li>
<li class="toclevel-3 tocsection-53"><a href="#Modules_VDI_locaux"><span class="tocnumber">5.1.3</span> <span class="toctext">Modules VDI locaux</span></a>
<ul>
<li class="toclevel-4 tocsection-54"><a href="#Modules_Ansys"><span class="tocnumber">5.1.3.1</span> <span class="toctext">Modules Ansys</span></a></li>
<li class="toclevel-4 tocsection-55"><a href="#Modules_ansysedt"><span class="tocnumber">5.1.3.2</span> <span class="toctext">Modules ansysedt</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-56"><a href="#Additive_Manufacturing"><span class="tocnumber">6</span> <span class="toctext">Additive Manufacturing</span></a>
<ul>
<li class="toclevel-2 tocsection-57"><a href="#Activer_Additive"><span class="tocnumber">6.1</span> <span class="toctext">Activer Additive</span></a>
<ul>
<li class="toclevel-3 tocsection-58"><a href="#TÃ©lÃ©charger_l&#39;extension"><span class="tocnumber">6.1.1</span> <span class="toctext">TÃ©lÃ©charger l'extension</span></a></li>
<li class="toclevel-3 tocsection-59"><a href="#Lancer_Workbench"><span class="tocnumber">6.1.2</span> <span class="toctext">Lancer Workbench</span></a></li>
<li class="toclevel-3 tocsection-60"><a href="#Ouvrir_le_gestionnaire_d&#39;extensions"><span class="tocnumber">6.1.3</span> <span class="toctext">Ouvrir le gestionnaire d'extensions</span></a></li>
<li class="toclevel-3 tocsection-61"><a href="#Installer_l&#39;extension"><span class="tocnumber">6.1.4</span> <span class="toctext">Installer l'extension</span></a></li>
<li class="toclevel-3 tocsection-62"><a href="#Charger_l&#39;extension"><span class="tocnumber">6.1.5</span> <span class="toctext">Charger l'extension</span></a></li>
<li class="toclevel-3 tocsection-63"><a href="#Supprimer_l&#39;extension"><span class="tocnumber">6.1.6</span> <span class="toctext">Supprimer l'extension</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-64"><a href="#ExÃ©cuter_Additive"><span class="tocnumber">6.2</span> <span class="toctext">ExÃ©cuter Additive</span></a>
<ul>
<li class="toclevel-3 tocsection-65"><a href="#Gra-vdi"><span class="tocnumber">6.2.1</span> <span class="toctext">Gra-vdi</span></a></li>
<li class="toclevel-3 tocsection-66"><a href="#Grappe"><span class="tocnumber">6.2.2</span> <span class="toctext">Grappe</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-67"><a href="#Aide"><span class="tocnumber">7</span> <span class="toctext">Aide</span></a>
<ul>
<li class="toclevel-2 tocsection-68"><a href="#Documentation_en_ligne"><span class="tocnumber">7.1</span> <span class="toctext">Documentation en ligne</span></a></li>
<li class="toclevel-2 tocsection-69"><a href="#VidÃ©os_sur_YouTube"><span class="tocnumber">7.2</span> <span class="toctext">VidÃ©os sur YouTube</span></a></li>
<li class="toclevel-2 tocsection-70"><a href="#Innovation_Space"><span class="tocnumber">7.3</span> <span class="toctext">Innovation Space</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Licence">Licence</span></h1>
<p>La suite Ansys est hÃ©bergÃ©e sur nos grappes, mais nous n'avons pas une licence qui permet un accÃ¨s gÃ©nÃ©ralisÃ©. Toutefois, plusieurs Ã©tablissements, facultÃ©s et dÃ©partements possÃ¨dent des licences qui peuvent Ãªtre utilisÃ©es sur nos grappes; vÃ©rifiez l'aspect lÃ©gal de son utilisation. En ce qui a trait Ã  l'aspect technique, nos nÅ“uds de calcul doivent pouvoir communiquer avec votre serveur de licence. Si ce n'est pas dÃ©jÃ  fait, notre Ã©quipe technique coordonnera ceci avec votre gestionnaire de licence. Quand tout sera en place, vous pourrez charger le module Ansys qui localisera de lui-mÃªme la licence. En cas de difficultÃ©, communiquez avec le <a href="/wiki/Technical_support/fr" title="Technical support/fr"> soutien technique</a>.
</p>
<h2><span class="mw-headline" id="Configurer_votre_propre_fichier_de_licence">Configurer votre propre fichier de licence</span></h2>
<p>Notre module Ansys cherche l'information sur la licence Ã  diffÃ©rents endroits, dont votre rÃ©pertoire /home.
Pour indiquer votre propre serveur de licence, crÃ©ez un fichier nommÃ© <code>$HOME/.licenses/ansys.lic</code> qui contient les deux lignes ci-dessous, oÃ¹ vous remplacez FLEXPORT, INTEPORT et LICSERVER par les valeurs de votre serveur. 
</p>
<table class="wikitable" style="text-align:left; border:1px solid #BBB; background-color:#F9F9F9; width:50%;">
<caption style="text-align:left; background-color:#F2F2F2; font-size:110%">FICHIER&#160;: ansys.lic
</caption>
<tbody><tr>
<td style="border-style: none none none none; font-size: 100%; padding-left:10%; padding-bottom:0;">setenv("ANSYSLMD_LICENSE_FILE", "<b>FLEXPORT@LICSERVER</b>")
</td></tr>
<tr>
<td style="border-style: none none none none; font-size: 100%; padding-left:10%; padding-top:0;">setenv("ANSYSLI_SERVERS", "<b>INTEPORT@LICSERVER</b>")
</td></tr></tbody></table>
<p>Les valeurs correspondant aux serveurs de licence CMC et SHARCNET se trouvent dans le tableau ci-dessous. Pour utiliser un diffÃ©rent serveur, voir <a class="mw-selflink-fragment" href="#Serveurs_de_licence_locaux">Serveurs de licence locaux</a> ci-dessous.
</p>
<table class="wikitable">
<caption style="text-align:left; background-color:#F2F2F2; font-size:110%">TABLEAU&#160;: Serveurs de licence prÃ©configurÃ©s
</caption>
<tbody><tr>
<th>Licence
</th>
<th>Grappe
</th>
<th>LICSERVER
</th>
<th>FLEXPORT
</th>
<th>INTEPORT
</th>
<th>VENDPORT
</th>
<th>NOTES
</th></tr>
<tr>
<td>CMC
</td>
<td>beluga
</td>
<td><code>10.20.73.21</code>
</td>
<td><code>6624</code>
</td>
<td><code>2325</code>
</td>
<td>s.o.
</td>
<td>aucune
</td></tr>
<tr>
<td>CMC
</td>
<td>cedar
</td>
<td><code>172.16.0.101</code>
</td>
<td><code>6624</code>
</td>
<td><code>2325</code>
</td>
<td>s.o.
</td>
<td>aucune
</td></tr>
<tr>
<td>CMC
</td>
<td>graham
</td>
<td><code>10.25.1.56</code>
</td>
<td><code>6624</code>
</td>
<td><code>2325</code>
</td>
<td>s.o.
</td>
<td>nouvelle IP le 21 fÃ©vrier 2025
</td></tr>
<tr>
<td>CMC
</td>
<td>narval
</td>
<td><code>10.100.64.10</code>
</td>
<td><code>6624</code>
</td>
<td><code>2325</code>
</td>
<td>s.o.
</td>
<td>aucune
</td></tr>
<tr>
<td>SHARCNET
</td>
<td>beluga/cedar/graham/gra-vdi/narval
</td>
<td><code>license3.sharcnet.ca</code>
</td>
<td><code>1055</code>
</td>
<td><code>2325</code>
</td>
<td>s.o.
</td>
<td>aucune
</td></tr>
<tr>
<td>SHARCNET
</td>
<td>niagara
</td>
<td><code>localhost</code>
</td>
<td><code>1055</code>
</td>
<td><code>2325</code>
</td>
<td><code>1793</code>
</td>
<td>aucune
</td></tr></tbody></table>
<p>Si vous avez obtenu une licence de CMC, vous devez faire parvenir le nom d'utilisateur associÃ© Ã  votre compte avec l'Alliance Ã  &lt;cmcsupport@cmc.ca&gt;, autrement la licence ne fonctionnera pas. Pour connaÃ®tre le nombre de cÅ“urs que vous pouvez utiliser avec une licence CMC, voyez les sections <i>Other Tricks and Tips</i> des  <a rel="nofollow" class="external text" href="https://www.cmc.ca/?s=Other+Tricks+and+Tips&amp;lang=en/">guides Ansys Electronics Desktop et Ansys Mechanical/Fluids</a>.
</p>
<h3><span class="mw-headline" id="Serveurs_de_licence_locaux">Serveurs de licence locaux</span></h3>
<p>Avant que le serveur de licence de votre Ã©tablissement puisse Ãªtre utilisÃ©, les coupe-feu des deux parties doivent Ãªtre configurÃ©s. Dans plusieurs cas, ce travail est dÃ©jÃ  fait; suivez les directives dans le paragraphe <i>PrÃªt Ã  utiliser</i> ci-dessous. Autrement, rÃ©fÃ©rez-vous au paragraphe <i>Configuration requise</i> un peu plus bas.
</p>
<h4><span id="Pr.C3.AAt_.C3.A0_utiliser"></span><span class="mw-headline" id="PrÃªt_Ã _utiliser">PrÃªt Ã  utiliser</span></h4>
<p>Pour utiliser un serveur de licence ANSYS dÃ©jÃ  configurÃ© pour Ãªtre utilisÃ© sur la grappe oÃ¹ vous allez soumettre des tÃ¢ches, contactez votre administrateur de serveur de licences Ansys et obtenez les trois Ã©lÃ©ments d'information suivants&#160;:
</p>
<pre>1) le nom d'hÃ´te complet (LICSERVER) du serveur
2) le port flex (FLEXPORT) pour Ansys, habituellement 1055
3) le port d'interconnexion (INTEPORT), habituellement 2325
</pre>
<p>Une fois les trois Ã©lÃ©ments d'information collectÃ©s, configurez votre fichier <code>~/.licenses/ansys.lic</code> en entrant les valeurs de LICSERVER, FLEXPORT et INTEPORT dans le modÃ¨le <code>FILE: ansys.lic</code> ci-dessus.
</p>
<h4><span class="mw-headline" id="Configuration_requise">Configuration requise</span></h4>
<p>Si votre serveur de licence Ansys local n'a jamais Ã©tÃ© configurÃ© pour Ãªtre utilisÃ© sur la ou les grappes oÃ¹ vous allez soumettre des tÃ¢ches, en plus des 3 Ã©lÃ©ments ci-dessus, vous devrez Ã‰GALEMENT obtenir les Ã©lÃ©ments suivants auprÃ¨s de l'administrateur&#160;:
</p>
<pre>4) le numÃ©ro de port statique du fournisseur (VENDPORT)
5) confirmation que &lt;servername&gt; se rÃ©soudra Ã  la mÃªme adresse IP que LICSERVER sur nos grappes
</pre>
<p>oÃ¹ &lt;servername&gt; peut Ãªtre trouvÃ© dans la premiÃ¨re ligne du fichier de licence avec le format <i>SERVER &lt;servername&gt; &lt;host id&gt; &lt;lmgrd port&gt;</i>. L'Ã©lÃ©ment 5 est obligatoire sinon les extractions de licences Ansys ne fonctionneront sur aucune grappe distante. S'il s'avÃ¨re que &lt;servername&gt; ne rÃ©pond pas Ã  cette exigence, demandez Ã  votre administrateur de licence de remplacer &lt;servername&gt; par le mÃªme nom d'hÃ´te complet que LICSERVER ou au moins par un nom d'hÃ´te qui se rÃ©soudra Ã  la mÃªme adresse IP que LICSERVER Ã  distance.
</p><p>Envoyez les Ã©lÃ©ments 1 Ã  4 par courriel au  <a href="/wiki/Technical_support/fr" title="Technical support/fr">soutien technique</a> et indiquez sur quelles grappes vous souhaitez exÃ©cuter les tÃ¢ches Ansys. Nos administrateurs de systÃ¨me procÃ©deront ensuite Ã  l'ouverture du pare-feu afin que les demandes de retrait de licence puissent atteindre votre serveur de licence Ã  partir des nÅ“uds de calcul du ou des grappes spÃ©cifiÃ©es. En retour, vous recevrez une plage d'adresses IP Ã  transmettre Ã  votre administrateur de serveur, qui pourra alors ouvrir le pare-feu local pour autoriser les connexions de licence Ansys entrantes Ã  partir de la ou les grappes sur CHACUN des ports dÃ©finis par FLEXPORT, INTEPORT et VENDPORT.
</p>
<h2><span id="V.C3.A9rifier_la_licence"></span><span class="mw-headline" id="VÃ©rifier_la_licence">VÃ©rifier la licence</span></h2>
<p>Pour vÃ©rifier si <code>ansys.lic</code> est bien configurÃ© et fonctionne correctement, exÃ©cutez les commandes suivantes sur la grappe oÃ¹ vous voulez soumettre des tÃ¢ches.
</p>
<div class="command">
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">[name@server ~]$ </span>salloc<span class="w"> </span>--time<span class="o">=</span><span class="m">1</span>:0:0<span class="w"> </span>--nodes<span class="o">=</span><span class="m">1</span><span class="w"> </span>--mem<span class="o">=</span>1G<span class="w"> </span>--ntasks<span class="o">=</span><span class="m">1</span><span class="w"> </span>--account<span class="o">=</span>def-youruserid
<span class="gp">[name@server ~]$ </span>module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2
<span class="gp">[name@server ~]$ </span><span class="nv">$EBROOTANSYS</span>/v232/licensingclient/linx64/lmutil<span class="w"> </span>lmstat<span class="w"> </span>-c<span class="w"> </span><span class="nv">$ANSYSLMD_LICENSE_FILE</span><span class="w"> </span><span class="m">1</span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>Success<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span>Fail
<span class="go">Success</span>
</pre></div></div>
<p><br />
Si le rÃ©sultat est <code>Success</code>, la licence devrait fonctionner quand des tÃ¢ches sont soumises. Par contre si le rÃ©sultat est <code>Fail</code>, Ã©crivez au <a href="/wiki/Technical_support/fr" title="Technical support/fr">soutien technique</a> en indiquant les commandes que vous avez utilisÃ©es ainsi que le nom du nÅ“ud de calcul. Remarque&#160;: Si vous chargez une version autre que celle qui se trouve ci-dessus, il faut modifier le chemin pour <code>lmutil</code> en consÃ©quence.
</p>
<h1><span id="Compatibilit.C3.A9_des_versions"></span><span class="mw-headline" id="CompatibilitÃ©_des_versions">CompatibilitÃ© des versions</span></h1>
<h2><span id="Plateformes_support.C3.A9es"></span><span class="mw-headline" id="Plateformes_supportÃ©es">Plateformes supportÃ©es</span></h2>
<p>La page <a rel="nofollow" class="external text" href="https://www.ansys.com/it-solutions/platform-support"><i>Platform Support</i></a> mentionne que la version actuelle a Ã©tÃ© testÃ©e pour lire et ouvrir les bases de donnÃ©es des cinq versions prÃ©cÃ©dentes. Cela signifie que les simulations dÃ©veloppÃ©es Ã  l'aide d'anciennes versions d'Ansys devraient gÃ©nÃ©ralement fonctionner avec des versions de module plus rÃ©centes (compatibilitÃ© en aval pour 5 versions). L'inverse ne peut cependant pas Ãªtre prÃ©sumÃ©. Le lien <i>Platform Support</i> fournit Ã©galement des informations de compatibilitÃ© logicielle et matÃ©rielle basÃ©es sur la version pour dÃ©terminer l'infrastructure de plateforme optimale (prise en charge) sur laquelle Ansys peut Ãªtre exÃ©cutÃ©. Les fonctionnalitÃ©s prises en charge sous Windows VS Linux peuvent Ãªtre affichÃ©es en cliquant sur <i>Platform Support by Application/Product</i>. Des informations similaires pour toutes les versions ci-dessus peuvent Ãªtre trouvÃ©es en cliquant sur <i>Previous Releases</i> dans le coin infÃ©rieur gauche de la page <i>Platform Support</i>.
</p>
<h2><span id="Nouveaut.C3.A9s"></span><span class="mw-headline" id="NouveautÃ©s">NouveautÃ©s</span></h2>
<p>Ansys publie rÃ©guliÃ¨rement des <i>service packs</i> pour regrouper plusieurs mises-Ã -jour apportant diffÃ©rents correctifs et amÃ©liorations Ã  ses versions majeures. Des informations similaires pour les versions prÃ©cÃ©dentes peuvent gÃ©nÃ©ralement Ãªtre trouvÃ©es sur <a rel="nofollow" class="external text" href="https://www.ansys.com/blog">le blog Ansys</a>, en utilisant la barre de recherche FILTERS. Par exemple, la recherche de <code>Whatâ€™s New Fluent 2024 gpu</code> affichera le document <code><a rel="nofollow" class="external text" href="https://www.ansys.com/blog/fluent-2024-r1">Whatâ€™s New for Ansys Fluent in 2024 R1?</a></code> qui contient une multitude d'informations sur la prise en charge des GPU. SpÃ©cifier un numÃ©ro de version dans le champ de recherche <a rel="nofollow" class="external text" href="https://www.ansys.com/news-center/press-releases">Press Release</a> est Ã©galement un bon moyen de trouver des informations sur les nouvelles versions. Depuis janvier 2025, Ansys 2024R2 est la derniÃ¨re version et sera installÃ©e lorsque l'intÃ©rÃªt sera exprimÃ© ou qu'il sera nÃ©cessaire de prendre en charge du nouveau matÃ©riel ou des fonctionnalitÃ©s plus rÃ©centes. Pour demander l'installation d'une nouvelle version, Ã©crivez au <a href="/wiki/Technical_support/fr" title="Technical support/fr">soutien technique</a>.
</p>
<h2><span class="mw-headline" id="Correctifs">Correctifs</span></h2>
<p>Ã€ partir d'Ansys 2024, un module Ansys distinct sera identifiÃ© avec une dÃ©cimale et deux chiffres aprÃ¨s le numÃ©ro de version, chaque fois qu'un <i>service pack</i> est installÃ© pour la version initiale. Par exemple, la version initiale pour 2024 sans aucun <i>service pack</i> peut Ãªtre chargÃ©e en exÃ©cutant <code>module load ansys/2024R1</code> tandis qu'un module avec le <i>service pack</i> 3 peut Ãªtre chargÃ© avec <code>module load ansys/2024R1.03</code>. Si un <i>service pack</i> est dÃ©jÃ  disponible au moment oÃ¹ une nouvelle version doit Ãªtre installÃ©e, il est fort probable que seulement un module pour ce numÃ©ro de <i>service pack</i> sera installÃ©, Ã  moins qu'une demande soit faite pour l'installation de la version initiale.
</p><p>La plupart du temps, vous voudrez probablement charger la derniÃ¨re version du module Ã©quipÃ© du dernier <i>service pack</i> installÃ© en exÃ©cutant simplement <code>module load ansys</code>. Bien qu'il ne soit pas prÃ©vu que les <i>service packs</i> aient un impact sur les rÃ©sultats numÃ©riques, les modifications qu'ils apportent sont importantes et donc si des calculs ont dÃ©jÃ  Ã©tÃ© effectuÃ©s avec la version initiale ou un <i>service pack</i> antÃ©rieur, certains groupes prÃ©fÃ©reront peut-Ãªtre continuer Ã  l'utiliser. Le fait d'avoir des modules distincts pour chaque <i>service pack</i> rend cela possible. Ã€ partir d'Ansys 2024R1, une description dÃ©taillÃ©e de ce que fait chaque <i>service pack</i> se trouve dans <a rel="nofollow" class="external text" href="https://storage.ansys.com/staticfiles/cp/Readme/release2024R1/info_combined.pdf">la documentation officielle</a> (les versions futures pourront probablement Ãªtre consultÃ©es de la mÃªme maniÃ¨re en modifiant le numÃ©ro de version contenu dans le lien).
</p>
<h1><span id="Soumettre_des_t.C3.A2ches_en_lot_sur_nos_grappes"></span><span class="mw-headline" id="Soumettre_des_tÃ¢ches_en_lot_sur_nos_grappes">Soumettre des tÃ¢ches en lot sur nos grappes</span></h1>
<p>Plusieurs implÃ©mentations MPI incluses dans la suite Ansys permettent le calcul parallÃ¨le, mais aucune n'est compatible avec l'ordonnanceur Slurm (voir <a href="/wiki/Running_jobs/fr" title="Running jobs/fr">ExÃ©cuter des tÃ¢ches</a>). Pour cette raison, il faut utiliser des directives particuliÃ¨res Ã  chaque paquet Ansys pour lancer une tÃ¢che parallÃ¨le. Vous trouverez ci-dessous quelques scripts de soumission pour ce faire. Ils fonctionneront sur toutes les grappes, mais sur Niagara, vous devrez peut-Ãªtre <a rel="nofollow" class="external text" href="https://docs.scinet.utoronto.ca/index.php">faire certains ajustements</a>.
</p>
<h2><span class="mw-headline" id="Ansys_Fluent">Ansys Fluent</span></h2>
<p>La procÃ©dure suivante est habituellement utilisÃ©e pour exÃ©cuter Fluent sur une de nos grappes&#160;:
</p>
<ol><li>Sur votre ordinateur, prÃ©parez votre tÃ¢che avec Fluent du Ansys Workbench jusqu'au point oÃ¹ les calculs seraient exÃ©cutÃ©s.</li>
<li>Exportez le fichier de cas avec <i>File &gt; Export &gt; Caseâ€¦</i> ou localisez le rÃ©pertoire dans lequel Fluent enregistre les fichiers pour votre projet. Le nom des fichiers de cas a souvent un format tel que <code>FFF-1.cas.gz</code>.</li>
<li>Si vous voulez poursuivre avec des donnÃ©es d'un calcul effectuÃ© prÃ©cÃ©demment, exportez aussi un fichier de donnÃ©es avec <i>File &gt; Export &gt; Dataâ€¦</i> ou trouvez-le dans le mÃªme rÃ©pertoire /project (<code>FFF-1.dat.gz</code>).</li>
<li><a href="/wiki/Transferring_data/fr" title="Transferring data/fr">TransfÃ©rez</a> le fichier de cas (et le fichier de donnÃ©es s'il y a lieu) dans le systÃ¨me de fichiers <a href="/wiki/Project_layout/fr" title="Project layout/fr">/project</a> ou <a href="/wiki/Storage_and_file_management/fr#Types_de_stockage" title="Storage and file management/fr">/scratch</a> de la grappe. Quand les fichiers sont exportÃ©s, sauvegardez-les avec des noms plus faciles Ã  repÃ©rer que <code>FFF-1.*</code> ou renommez-les au tÃ©lÃ©versement.</li>
<li>CrÃ©ez un fichier de journalisation dont le but est de charger les fichiers de cas (et le fichier de donnÃ©es s'il y a lieu), lancez le solveur et enregistrez les rÃ©sultats. Voyez les exemples ci-dessous et n'oubliez pas d'ajuster les noms des fichiers et le nombre d'itÃ©rations.</li>
<li>S'il arrive frÃ©quemment que les tÃ¢ches ne dÃ©marrent pas en raison d'un manque de licence (et que de les soumettre de nouveau manuellement ne convient pas), vous pouvez modifier votre script pour que votre tÃ¢che soit remise en file d'attente (au plus 4 fois) comme c'est le cas pour le script sous l'onglet <i>Plusieurs nÅ“uds (par cÅ“ur + remise en attente)</i> plus loin. Cependant, ceci remet aussi en attente les simulations qui ont Ã©chouÃ© pour d'autres raisons que l'absence de licence (par exemple la divergence), gaspillant ainsi du temps de calcul. Il est donc fortement recommandÃ© de vÃ©rifier les fichiers de sortie de l'ordonnanceur pour savoir si chaque tentative de remise en attente est ou non due Ã  un problÃ¨me de licence. Si vous dÃ©couvrez que la remise en attente est due Ã  un problÃ¨me avec la simulation, annulez immÃ©diatement la tÃ¢che avec <code>scancel jobid</code> et corrigez le problÃ¨me.</li>
<li>Lorsque la  <a href="/wiki/Running_jobs/fr" title="Running jobs/fr">tÃ¢che est terminÃ©e</a>, vous pouvez tÃ©lÃ©charger le fichier de donnÃ©es et le retourner dans Fluent avec <i>File &gt; Import &gt; Dataâ€¦</i>.</li></ol>
<h3><span id="Scripts_pour_l.27ordonnanceur_Slurm"></span><span class="mw-headline" id="Scripts_pour_l'ordonnanceur_Slurm">Scripts pour l'ordonnanceur Slurm</span></h3>
<h4><span id="Utilisation_g.C3.A9n.C3.A9rale"></span><span class="mw-headline" id="Utilisation_gÃ©nÃ©rale">Utilisation gÃ©nÃ©rale</span></h4>
<p>La plupart des tÃ¢ches Fluent devraient utiliser le script <i>par nÅ“ud</i> ci-dessous pour minimiser le temps d'attente et maximiser la performance en utilisant le moins de nÅ“uds possible. Les tÃ¢ches demandant beaucoup de cÅ“urs CPU pourraient attendre moins longtemps dans la queue avec le script <i>par cÅ“ur</i>, mais le dÃ©marrage dâ€™une tÃ¢che utilisant plusieurs nÅ“uds peut prendre beaucoup plus de temps, ce qui en diminue l'intÃ©rÃªt. Il faut aussi tenir compte du fait qu'exÃ©cuter des tÃ¢ches intensives sur un nombre indÃ©terminÃ© de nÅ“uds pouvant Ãªtre trÃ¨s Ã©levÃ© fait en sorte que ces tÃ¢ches seront beaucoup plus susceptibles de planter si un des nÅ“uds de calcul fait dÃ©faut pendant la simulation. Les scripts suivants utilisent la mÃ©moire partagÃ©e pour les tÃ¢ches utilisant un seul nÅ“ud et la mÃ©moire distribuÃ©e (avec MPI et lâ€™interconnexion CHP appropriÃ©e) pour les tÃ¢ches en utilisant plusieurs.
</p><p>Les deux onglets pour Narval peuvent fournir une alternative plus robuste si Fluent plante pendant la phase initiale de partitionnement automatique du maillage lors de l'utilisation des scripts Intel standards avec le solveur parallÃ¨le. L'autre option serait d'effectuer manuellement le partitionnement du maillage dans l'interface graphique de Fluent, puis d'essayer d'exÃ©cuter Ã  nouveau la tÃ¢che sur la grappe avec les scripts Intel. Ainsi, vous pouvez inspecter les statistiques de partitionnement et spÃ©cifier la mÃ©thode pour obtenir un rÃ©sultat optimal. Le nombre de partitions de maillage doit Ãªtre un multiple entier du nombre de cÅ“urs; pour une efficacitÃ© optimale, assurez-vous d'avoir au moins 10&#160;000 cellules par cÅ“ur.
</p>
<form id="tabs-inputform" class="tabs tabs-inputform" action="#"></form><div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-1-0" name="tabs-1" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-1-1" name="tabs-1" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-1-1" data-tabpos="1">Plusieurs nÅ“uds (par nÅ“ud)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-1-2" name="tabs-1" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-1-2" data-tabpos="2">Plusieurs nÅ“uds (par cÅ“ur)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-1-3" name="tabs-1" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-1-3" data-tabpos="3">Plusieurs nÅ“uds (par nÅ“ud, Narval)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-1-4" name="tabs-1" class="tabs-input tabs-input-4" /><label class="tabs-label" for="tabs-input-1-4" data-tabpos="4">Plusieurs nÅ“uds (par cÅ“ur, Narval)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-1-5" name="tabs-1" class="tabs-input tabs-input-5" /><label class="tabs-label" for="tabs-input-1-5" data-tabpos="5">Plusieurs nÅ“uds (par nÅ“ud, Niagara)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-flu-bynode-intel.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group+++%23+Specify+account+name%0A%23SBATCH+--time%3D00-03%3A00+++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23SBATCH+--nodes%3D1+++++++++++++%23+Specify+number+of+compute+nodes+%28narval+1+node+max%29%0A%23SBATCH+--ntasks-per-node%3D32++%23+Specify+number+of+cores+per+node+%28graham+32+or+44%2C+cedar+48%2C+beluga+40%2C+narval+64%2C+or+less%29%0A%23SBATCH+--mem%3D0+++++++++++++++%23+Do+not+change+%28allocates+all+memory+per+compute+node%29%0A%23SBATCH+--cpus-per-task%3D1+++++%23+Do+not+change%0A%0Amodule+load+StdEnv%2F2023+++++++%23+Do+not+change%0Amodule+load+ansys%2F2023R2++++++%23+or+newer+versions+%28beluga%2C+cedar%2C+graham%2C+narval%29%0A%0A%23module+load+StdEnv%2F2020++++++%23+no+longer+supported%0A%23module+load+ansys%2F2019R3+++++%23+or+newer+versions+%28narval+only%29%0A%23module+load+ansys%2F2021R2+++++%23+or+newer+versions+%28beluga%2C+cedar%2C+graham%29%0A%0AMYJOURNALFILE%3Dsample.jou++++++%23+Specify+your+journal+file+name%0AMYVERSION%3D3d++++++++++++++++++%23+Specify+2d%2C+2ddp%2C+3d+or+3ddp%0A%0A%23+-------+do+not+change+any+lines+below+--------%0A%0Aif+%5B%5B+%22%24%7BCC_CLUSTER%7D%22+%3D%3D+narval+%5D%5D%3B+then%0A+if+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2020+%5D%3B+then%0A+++module+load+intel%2F2021+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%2Fmpi%2Flatest%0A+++export+HCOLL_RCACHE%3D%5Eucs%0A+elif+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2023+%5D%3B+then%0A+++module+load+intel%2F2023+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%0A+fi%0A+unset+I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS%0A+unset+I_MPI_ROOT%0Afi%0A%0Aslurm_hl2hl.py+--format+ANSYS-FLUENT+%3E+%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID%0ANCORES%3D%24%28%28SLURM_NNODES+%2A+SLURM_NTASKS_PER_NODE+%2A+SLURM_CPUS_PER_TASK%29%29%0A%0Aif+%5B+%22%24SLURM_NNODES%22+%3D%3D+1+%5D%3B+then%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pshmem+-i+%24MYJOURNALFILE%0Aelse%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pib+-cnf%3D%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID+-i+%24MYJOURNALFILE%0Afi" />
<input type="hidden" name="filename" value="script-flu-bynode-intel.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group   # Specify account name</span>
<span class="c1">#SBATCH --time=00-03:00       # Specify time limit dd-hh:mm</span>
<span class="c1">#SBATCH --nodes=1             # Specify number of compute nodes (narval 1 node max)</span>
<span class="c1">#SBATCH --ntasks-per-node=32  # Specify number of cores per node (graham 32 or 44, cedar 48, beluga 40, narval 64, or less)</span>
<span class="c1">#SBATCH --mem=0               # Do not change (allocates all memory per compute node)</span>
<span class="c1">#SBATCH --cpus-per-task=1     # Do not change</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023<span class="w">       </span><span class="c1"># Do not change</span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">      </span><span class="c1"># or newer versions (beluga, cedar, graham, narval)</span>

<span class="c1">#module load StdEnv/2020      # no longer supported</span>
<span class="c1">#module load ansys/2019R3     # or newer versions (narval only)</span>
<span class="c1">#module load ansys/2021R2     # or newer versions (beluga, cedar, graham)</span>

<span class="nv">MYJOURNALFILE</span><span class="o">=</span>sample.jou<span class="w">      </span><span class="c1"># Specify your journal file name</span>
<span class="nv">MYVERSION</span><span class="o">=</span>3d<span class="w">                  </span><span class="c1"># Specify 2d, 2ddp, 3d or 3ddp</span>

<span class="c1"># ------- do not change any lines below --------</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CC_CLUSTER</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>narval<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2021<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>/mpi/latest
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">HCOLL_RCACHE</span><span class="o">=</span>^ucs
<span class="w"> </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2023<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>
<span class="w"> </span><span class="k">fi</span>
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_ROOT
<span class="k">fi</span>

slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-FLUENT<span class="w"> </span>&gt;<span class="w"> </span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="k">$((</span><span class="nv">SLURM_NNODES</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_NTASKS_PER_NODE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="k">))</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_NNODES</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pshmem<span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">else</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pib<span class="w"> </span>-cnf<span class="o">=</span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">fi</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-flu-bycore-intel.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group+++%23+Specify+account%0A%23SBATCH+--time%3D00-03%3A00+++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23%23SBATCH+--nodes%3D1++++++++++++%23+Uncomment+to+specify+%28narval+1+node+max%29%0A%23SBATCH+--ntasks%3D16+++++++++++%23+Specify+total+number+of+cores%0A%23SBATCH+--mem-per-cpu%3D4G++++++%23+Specify+memory+per+core%0A%23SBATCH+--cpus-per-task%3D1+++++%23+Do+not+change%0A%0Amodule+load+StdEnv%2F2023+++++++%23+Do+not+change%0Amodule+load+ansys%2F2023R2++++++%23+or+newer+versions+%28beluga%2C+cedar%2C+graham%2C+narval%29%0A%0A%23module+load+StdEnv%2F2020++++++%23+no+longer+supported%0A%23module+load+ansys%2F2019R3+++++%23+or+newer+versions+%28narval+only%29%0A%23module+load+ansys%2F2021R2+++++%23+or+newer+versions+%28beluga%2C+cedar%2C+graham%29%0A%0AMYJOURNALFILE%3Dsample.jou++++++%23+Specify+your+journal+file+name%0AMYVERSION%3D3d++++++++++++++++++%23+Specify+2d%2C+2ddp%2C+3d+or+3ddp%0A%0A%23+-------+do+not+change+any+lines+below+--------%0A%0Aif+%5B%5B+%22%24%7BCC_CLUSTER%7D%22+%3D%3D+narval+%5D%5D%3B+then%0A+if+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2020+%5D%3B+then%0A+++module+load+intel%2F2021+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%2Fmpi%2Flatest%0A+++export+HCOLL_RCACHE%3D%5Eucs%0A+elif+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2023+%5D%3B+then%0A+++module+load+intel%2F2023+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%0A+fi%0A+unset+I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS%0A+unset+I_MPI_ROOT%0Afi%0A%0Aslurm_hl2hl.py+--format+ANSYS-FLUENT+%3E+%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID%0ANCORES%3D%24%28%28SLURM_NTASKS+%2A+SLURM_CPUS_PER_TASK%29%29%0A%0Aif+%5B+%22%24SLURM_NNODES%22+%3D%3D+1+%5D%3B+then%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pshmem+-i+%24MYJOURNALFILE%0Aelse%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pib+-cnf%3D%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID+-i+%24MYJOURNALFILE%0Afi" />
<input type="hidden" name="filename" value="script-flu-bycore-intel.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group   # Specify account</span>
<span class="c1">#SBATCH --time=00-03:00       # Specify time limit dd-hh:mm</span>
<span class="c1">##SBATCH --nodes=1            # Uncomment to specify (narval 1 node max)</span>
<span class="c1">#SBATCH --ntasks=16           # Specify total number of cores</span>
<span class="c1">#SBATCH --mem-per-cpu=4G      # Specify memory per core</span>
<span class="c1">#SBATCH --cpus-per-task=1     # Do not change</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023<span class="w">       </span><span class="c1"># Do not change</span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">      </span><span class="c1"># or newer versions (beluga, cedar, graham, narval)</span>

<span class="c1">#module load StdEnv/2020      # no longer supported</span>
<span class="c1">#module load ansys/2019R3     # or newer versions (narval only)</span>
<span class="c1">#module load ansys/2021R2     # or newer versions (beluga, cedar, graham)</span>

<span class="nv">MYJOURNALFILE</span><span class="o">=</span>sample.jou<span class="w">      </span><span class="c1"># Specify your journal file name</span>
<span class="nv">MYVERSION</span><span class="o">=</span>3d<span class="w">                  </span><span class="c1"># Specify 2d, 2ddp, 3d or 3ddp</span>

<span class="c1"># ------- do not change any lines below --------</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CC_CLUSTER</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>narval<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2021<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>/mpi/latest
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">HCOLL_RCACHE</span><span class="o">=</span>^ucs
<span class="w"> </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2023<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>
<span class="w"> </span><span class="k">fi</span>
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_ROOT
<span class="k">fi</span>

slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-FLUENT<span class="w"> </span>&gt;<span class="w"> </span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="k">$((</span><span class="nv">SLURM_NTASKS</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="k">))</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_NNODES</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pshmem<span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">else</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pib<span class="w"> </span>-cnf<span class="o">=</span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">fi</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-3">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-flu-bynode-openmpi.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group+++%23+Specify+account+name%0A%23SBATCH+--time%3D00-03%3A00+++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23SBATCH+--nodes%3D1+++++++++++++%23+Specify+number+of+compute+nodes%0A%23SBATCH+--ntasks-per-node%3D64++%23+Specify+number+of+cores+per+node+%28narval+64+or+less%29%0A%23SBATCH+--mem%3D0+++++++++++++++%23+Do+not+change+%28allocates+all+memory+per+compute+node%29%0A%23SBATCH+--cpus-per-task%3D1+++++%23+Do+not+change%0A%0Amodule+load+StdEnv%2F2023+++++++%23+Do+not+change%0Amodule+load+ansys%2F2023R2++++++%23+or+newer+versions+%28narval+only%29%0A%0AMYJOURNALFILE%3Dsample.jou++++++%23+Specify+your+journal+file+name%0AMYVERSION%3D3d++++++++++++++++++%23+Specify+2d%2C+2ddp%2C+3d+or+3ddp%0A%0A%23+-------+do+not+change+any+lines+below+--------%0A%0Aexport+OPENMPI_ROOT%3D%24EBROOTOPENMPI%0Aexport+OMPI_MCA_hwloc_base_binding_policy%3Dcore%0Aslurm_hl2hl.py+--format+ANSYS-FLUENT+%3E+%2Ftmp%2Fmf-%24SLURM_JOB_ID%0Afor+i+in+%60cat+%2Ftmp%2Fmf-%24SLURM_JOB_ID+%7C+uniq%60%3B+do+echo+%22%24%7Bi%7D%3A%24%28cat+%2Ftmp%2Fmf-%24SLURM_JOB_ID+%7C+grep+%24i+%7C+wc+-l%29%22+%3E%3E+%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID%3B+done%0ANCORES%3D%24%28%28SLURM_NNODES+%2A+SLURM_NTASKS_PER_NODE+%2A+SLURM_CPUS_PER_TASK%29%29%0A%0Aif+%5B+%22%24SLURM_NNODES%22+%3D%3D+1+%5D%3B+then%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dopenmpi+-pshmem+-i+%24MYJOURNALFILE%0Aelse%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dopenmpi+-pib+-cnf%3D%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID+-i+%24MYJOURNALFILE%0Afi" />
<input type="hidden" name="filename" value="script-flu-bynode-openmpi.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group   # Specify account name</span>
<span class="c1">#SBATCH --time=00-03:00       # Specify time limit dd-hh:mm</span>
<span class="c1">#SBATCH --nodes=1             # Specify number of compute nodes</span>
<span class="c1">#SBATCH --ntasks-per-node=64  # Specify number of cores per node (narval 64 or less)</span>
<span class="c1">#SBATCH --mem=0               # Do not change (allocates all memory per compute node)</span>
<span class="c1">#SBATCH --cpus-per-task=1     # Do not change</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023<span class="w">       </span><span class="c1"># Do not change</span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">      </span><span class="c1"># or newer versions (narval only)</span>

<span class="nv">MYJOURNALFILE</span><span class="o">=</span>sample.jou<span class="w">      </span><span class="c1"># Specify your journal file name</span>
<span class="nv">MYVERSION</span><span class="o">=</span>3d<span class="w">                  </span><span class="c1"># Specify 2d, 2ddp, 3d or 3ddp</span>

<span class="c1"># ------- do not change any lines below --------</span>

<span class="nb">export</span><span class="w"> </span><span class="nv">OPENMPI_ROOT</span><span class="o">=</span><span class="nv">$EBROOTOPENMPI</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OMPI_MCA_hwloc_base_binding_policy</span><span class="o">=</span>core
slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-FLUENT<span class="w"> </span>&gt;<span class="w"> </span>/tmp/mf-<span class="nv">$SLURM_JOB_ID</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>cat<span class="w"> </span>/tmp/mf-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="sb">`</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">i</span><span class="si">}</span><span class="s2">:</span><span class="k">$(</span>cat<span class="w"> </span>/tmp/mf-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="nv">$i</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="p">;</span><span class="w"> </span><span class="k">done</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="k">$((</span><span class="nv">SLURM_NNODES</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_NTASKS_PER_NODE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="k">))</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_NNODES</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>openmpi<span class="w"> </span>-pshmem<span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">else</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>openmpi<span class="w"> </span>-pib<span class="w"> </span>-cnf<span class="o">=</span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">fi</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-4">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-flu-bycore-openmpi.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group+++%23+Specify+account+name%0A%23SBATCH+--time%3D00-03%3A00+++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23%23SBATCH+--nodes%3D1++++++++++++%23+Uncomment+to+specify+number+of+compute+nodes+%28optional%29%0A%23SBATCH+--ntasks%3D16+++++++++++%23+Specify+total+number+of+cores%0A%23SBATCH+--mem-per-cpu%3D4G++++++%23+Specify+memory+per+core%0A%23SBATCH+--cpus-per-task%3D1+++++%23+Do+not+change%0A%0Amodule+load+StdEnv%2F2023+++++++%23+Do+not+change+++++%0Amodule+load+ansys%2F2023R2++++++%23+or+newer+versions+%28narval+only%29%0A%0AMYJOURNALFILE%3Dsample.jou++++++%23+Specify+your+journal+file+name%0AMYVERSION%3D3d++++++++++++++++++%23+Specify+2d%2C+2ddp%2C+3d+or+3ddp%0A%0A%23+-------+do+not+change+any+lines+below+--------%0A%0Aexport+OPENMPI_ROOT%3D%24EBROOTOPENMPI%0Aexport+OMPI_MCA_hwloc_base_binding_policy%3Dcore%0Aslurm_hl2hl.py+--format+ANSYS-FLUENT+%3E+%2Ftmp%2Fmf-%24SLURM_JOB_ID%0Afor+i+in+%60cat+%2Ftmp%2Fmf-%24SLURM_JOB_ID+%7C+uniq%60%3B+do+echo+%22%24%7Bi%7D%3A%24%28cat+%2Ftmp%2Fmf-%24SLURM_JOB_ID+%7C+grep+%24i+%7C+wc+-l%29%22+%3E%3E+%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID%3B+done%0ANCORES%3D%24%28%28SLURM_NTASKS+%2A+SLURM_CPUS_PER_TASK%29%29%0A%0Aif+%5B+%22%24SLURM_NNODES%22+%3D%3D+1+%5D%3B+then%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dopenmpi+-pshmem+-i+%24MYJOURNALFILE%0Aelse%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dopenmpi+-pib+-cnf%3D%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID+-i+%24MYJOURNALFILE%0Afi" />
<input type="hidden" name="filename" value="script-flu-bycore-openmpi.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group   # Specify account name</span>
<span class="c1">#SBATCH --time=00-03:00       # Specify time limit dd-hh:mm</span>
<span class="c1">##SBATCH --nodes=1            # Uncomment to specify number of compute nodes (optional)</span>
<span class="c1">#SBATCH --ntasks=16           # Specify total number of cores</span>
<span class="c1">#SBATCH --mem-per-cpu=4G      # Specify memory per core</span>
<span class="c1">#SBATCH --cpus-per-task=1     # Do not change</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023<span class="w">       </span><span class="c1"># Do not change     </span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">      </span><span class="c1"># or newer versions (narval only)</span>

<span class="nv">MYJOURNALFILE</span><span class="o">=</span>sample.jou<span class="w">      </span><span class="c1"># Specify your journal file name</span>
<span class="nv">MYVERSION</span><span class="o">=</span>3d<span class="w">                  </span><span class="c1"># Specify 2d, 2ddp, 3d or 3ddp</span>

<span class="c1"># ------- do not change any lines below --------</span>

<span class="nb">export</span><span class="w"> </span><span class="nv">OPENMPI_ROOT</span><span class="o">=</span><span class="nv">$EBROOTOPENMPI</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OMPI_MCA_hwloc_base_binding_policy</span><span class="o">=</span>core
slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-FLUENT<span class="w"> </span>&gt;<span class="w"> </span>/tmp/mf-<span class="nv">$SLURM_JOB_ID</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>cat<span class="w"> </span>/tmp/mf-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="sb">`</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">i</span><span class="si">}</span><span class="s2">:</span><span class="k">$(</span>cat<span class="w"> </span>/tmp/mf-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="nv">$i</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="p">;</span><span class="w"> </span><span class="k">done</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="k">$((</span><span class="nv">SLURM_NTASKS</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="k">))</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_NNODES</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>openmpi<span class="w"> </span>-pshmem<span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">else</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>openmpi<span class="w"> </span>-pib<span class="w"> </span>-cnf<span class="o">=</span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">fi</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-5">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-flu-bynode-intel-nia.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group++++++%23+Specify+account+name%0A%23SBATCH+--time%3D00-03%3A00++++++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23SBATCH+--nodes%3D2++++++++++++++++%23+Specify+number+of+compute+nodes%0A%23SBATCH+--ntasks-per-node%3D80+++++%23+Specify+number+cores+per+node+%28niagara+80+or+less%29%0A%23SBATCH+--mem%3D0++++++++++++++++++%23+Do+not+change+%28allocate+all+memory+per+compute+node%29%0A%23SBATCH+--cpus-per-task%3D1++++++++%23+Do+not+change+%28required+parameter%29%0A%0Amodule+load+CCEnv+StdEnv%2F2023++++%23+Do+not+change%0Amodule+load+arch%2Favx512%0Amodule+load+ansys%2F2023R2+++++++++%23+or+newer+versions+%28niagara+only%29%0A%0AMYJOURNALFILE%3Dsample.jou+++++++++%23+Specify+your+journal+file+name%0AMYVERSION%3D3d+++++++++++++++++++++%23+Specify+2d%2C+2ddp%2C+3d+or+3ddp%0A%0A%23+These+settings+are+used+instead+of+your+%7E%2F.licenses%2Fansys.lic%0ALICSERVER%3Dlicense3.sharcnet.ca+++%23+Specify+license+server+hostname%0AFLEXPORT%3D1055++++++++++++++++++++%23+Specify+server+flex+port%0AINTEPORT%3D2325++++++++++++++++++++%23+Specify+server+interconnect+port%0AVENDPORT%3D1793++++++++++++++++++++%23+Specify+server+vendor+port%0A%0A%23+-------+do+not+change+any+lines+below+--------%0A%0Assh+nia-gw+-fNL+%24FLEXPORT%3A%24LICSERVER%3A%24FLEXPORT++++++%23+Do+not+change%0Assh+nia-gw+-fNL+%24INTEPORT%3A%24LICSERVER%3A%24INTEPORT++++++%23+Do+not+change%0Assh+nia-gw+-fNL+%24VENDPORT%3A%24LICSERVER%3A%24VENDPORT++++++%23+Do+not+change%0Aexport+ANSYSLMD_LICENSE_FILE%3D%24FLEXPORT%40localhost++++%23+Do+not+change%0Aexport+ANSYSLI_SERVERS%3D%24INTEPORT%40localhost++++++++++%23+Do+not+change%0A%0Aslurm_hl2hl.py+--format+ANSYS-FLUENT+%3E+%24SLURM_SUBMIT_DIR%2Fmachinefile-%24SLURM_JOB_ID%0ANCORES%3D%24%28%28SLURM_NNODES+%2A+SLURM_NTASKS_PER_NODE+%2A+SLURM_CPUS_PER_TASK%29%29%0A%0Aif+%5B+%21+-L+%22%24HOME%2F.ansys%22+%5D%3B+then%0A++echo+%22ERROR%3A+A+link+to+a+writable+.ansys+directory+does+not+exist.%22%0A++echo+%27Remove+%7E%2F.ansys+if+one+exists+and+then+run%3A+ln+-s+%24SCRATCH%2F.ansys+%7E%2F.ansys%27%0A++echo+%22Then+try+submitting+your+job+again.+Aborting+the+current+job+now%21%22%0Aelif+%5B+%21+-L+%22%24HOME%2F.fluentconf%22+%5D%3B+then%0A++echo+%22ERROR%3A+A+link+to+a+writable+.fluentconf+directory+does+not+exist.%22%0A++echo+%27Remove+%7E%2F.fluentconf+if+one+exists+and+run%3A+ln+-s+%24SCRATCH%2F.fluentconf+%7E%2F.fluentconf%27%0A++echo+%22Then+try+submitting+your+job+again.+Aborting+the+current+job+now%21%22%0Aelif+%5B+%21+-L+%22%24HOME%2F.flrecent%22+%5D%3B+then%0A++echo+%22ERROR%3A+A+link+to+a+writable+.flrecent+file+does+not+exist.%22%0A++echo+%27Remove+%7E%2F.flrecent+if+one+exists+and+then+run%3A+ln+-s+%24SCRATCH%2F.flrecent+%7E%2F.flrecent%27%0A++echo+%22Then+try+submitting+your+job+again.+Aborting+the+current+job+now%21%22%0Aelse%0A++mkdir+-pv+%24SCRATCH%2F.ansys%0A++mkdir+-pv+%24SCRATCH%2F.fluentconf%0A++touch+%24SCRATCH%2F.flrecent%0A++if+%5B+%22%24SLURM_NNODES%22+%3D%3D+1+%5D%3B+then%0A+++fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pshmem+-i+%24MYJOURNALFILE%0A++else%0A+++fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-ssh+-pib+-cnf%3D%24SLURM_SUBMIT_DIR%2Fmachinefile-%24SLURM_JOB_ID+-i+%24MYJOURNALFILE%0A++fi%0Afi" />
<input type="hidden" name="filename" value="script-flu-bynode-intel-nia.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group      # Specify account name</span>
<span class="c1">#SBATCH --time=00-03:00          # Specify time limit dd-hh:mm</span>
<span class="c1">#SBATCH --nodes=2                # Specify number of compute nodes</span>
<span class="c1">#SBATCH --ntasks-per-node=80     # Specify number cores per node (niagara 80 or less)</span>
<span class="c1">#SBATCH --mem=0                  # Do not change (allocate all memory per compute node)</span>
<span class="c1">#SBATCH --cpus-per-task=1        # Do not change (required parameter)</span>

module<span class="w"> </span>load<span class="w"> </span>CCEnv<span class="w"> </span>StdEnv/2023<span class="w">    </span><span class="c1"># Do not change</span>
module<span class="w"> </span>load<span class="w"> </span>arch/avx512
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">         </span><span class="c1"># or newer versions (niagara only)</span>

<span class="nv">MYJOURNALFILE</span><span class="o">=</span>sample.jou<span class="w">         </span><span class="c1"># Specify your journal file name</span>
<span class="nv">MYVERSION</span><span class="o">=</span>3d<span class="w">                     </span><span class="c1"># Specify 2d, 2ddp, 3d or 3ddp</span>

<span class="c1"># These settings are used instead of your ~/.licenses/ansys.lic</span>
<span class="nv">LICSERVER</span><span class="o">=</span>license3.sharcnet.ca<span class="w">   </span><span class="c1"># Specify license server hostname</span>
<span class="nv">FLEXPORT</span><span class="o">=</span><span class="m">1055</span><span class="w">                    </span><span class="c1"># Specify server flex port</span>
<span class="nv">INTEPORT</span><span class="o">=</span><span class="m">2325</span><span class="w">                    </span><span class="c1"># Specify server interconnect port</span>
<span class="nv">VENDPORT</span><span class="o">=</span><span class="m">1793</span><span class="w">                    </span><span class="c1"># Specify server vendor port</span>

<span class="c1"># ------- do not change any lines below --------</span>

ssh<span class="w"> </span>nia-gw<span class="w"> </span>-fNL<span class="w"> </span><span class="nv">$FLEXPORT</span>:<span class="nv">$LICSERVER</span>:<span class="nv">$FLEXPORT</span><span class="w">      </span><span class="c1"># Do not change</span>
ssh<span class="w"> </span>nia-gw<span class="w"> </span>-fNL<span class="w"> </span><span class="nv">$INTEPORT</span>:<span class="nv">$LICSERVER</span>:<span class="nv">$INTEPORT</span><span class="w">      </span><span class="c1"># Do not change</span>
ssh<span class="w"> </span>nia-gw<span class="w"> </span>-fNL<span class="w"> </span><span class="nv">$VENDPORT</span>:<span class="nv">$LICSERVER</span>:<span class="nv">$VENDPORT</span><span class="w">      </span><span class="c1"># Do not change</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ANSYSLMD_LICENSE_FILE</span><span class="o">=</span><span class="nv">$FLEXPORT</span>@localhost<span class="w">    </span><span class="c1"># Do not change</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ANSYSLI_SERVERS</span><span class="o">=</span><span class="nv">$INTEPORT</span>@localhost<span class="w">          </span><span class="c1"># Do not change</span>

slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-FLUENT<span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$SLURM_SUBMIT_DIR</span>/machinefile-<span class="nv">$SLURM_JOB_ID</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="k">$((</span><span class="nv">SLURM_NNODES</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_NTASKS_PER_NODE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="k">))</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>!<span class="w"> </span>-L<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.ansys&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;ERROR: A link to a writable .ansys directory does not exist.&quot;</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;Remove ~/.ansys if one exists and then run: ln -s $SCRATCH/.ansys ~/.ansys&#39;</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Then try submitting your job again. Aborting the current job now!&quot;</span>
<span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>!<span class="w"> </span>-L<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.fluentconf&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;ERROR: A link to a writable .fluentconf directory does not exist.&quot;</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;Remove ~/.fluentconf if one exists and run: ln -s $SCRATCH/.fluentconf ~/.fluentconf&#39;</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Then try submitting your job again. Aborting the current job now!&quot;</span>
<span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>!<span class="w"> </span>-L<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.flrecent&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;ERROR: A link to a writable .flrecent file does not exist.&quot;</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;Remove ~/.flrecent if one exists and then run: ln -s $SCRATCH/.flrecent ~/.flrecent&#39;</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Then try submitting your job again. Aborting the current job now!&quot;</span>
<span class="k">else</span>
<span class="w">  </span>mkdir<span class="w"> </span>-pv<span class="w"> </span><span class="nv">$SCRATCH</span>/.ansys
<span class="w">  </span>mkdir<span class="w"> </span>-pv<span class="w"> </span><span class="nv">$SCRATCH</span>/.fluentconf
<span class="w">  </span>touch<span class="w"> </span><span class="nv">$SCRATCH</span>/.flrecent
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_NNODES</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pshmem<span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">   </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-ssh<span class="w"> </span>-pib<span class="w"> </span>-cnf<span class="o">=</span><span class="nv">$SLURM_SUBMIT_DIR</span>/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">fi</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<h4><span id="Remise_en_file_d.27attente_pour_obtenir_la_licence"></span><span class="mw-headline" id="Remise_en_file_d'attente_pour_obtenir_la_licence">Remise en file d'attente pour obtenir la licence</span></h4>
<p>Les scripts suivants ne doivent Ãªtre utilisÃ©s qu'avec des tÃ¢ches Fluent qui sont connues pour se terminer normalement sans gÃ©nÃ©rer d'erreurs en sortie, mais qui nÃ©cessitent gÃ©nÃ©ralement plusieurs tentatives de remise en file d'attente pour obtenir les licences. Ils ne sont pas recommandÃ©s pour les tÃ¢ches Fluent qui peuvent 1) s'exÃ©cuter pendant une longue pÃ©riode avant de planter 2) s'exÃ©cuter jusqu'Ã  la fin mais contenir des avertissements de journalisation; dans les deux cas, les simulations seront rÃ©pÃ©tÃ©es depuis le dÃ©but jusqu'Ã  ce que le nombre maximal de tentatives de remise en file d'attente spÃ©cifiÃ© par la valeur <code>array</code> soit atteint. Pour ces types de tÃ¢ches, les scripts Ã  usage gÃ©nÃ©ral (ci-dessus) doivent Ãªtre utilisÃ©s.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-2-0" name="tabs-2" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-2-1" name="tabs-2" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-2-1" data-tabpos="1">Plusieurs nÅ“uds (par nÅ“ud + remise en attente)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-2-2" name="tabs-2" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-2-2" data-tabpos="2">Plusieurs nÅ“uds (par cÅ“ur + remise en attente)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-flu-bynode+requeue.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group+++%23+Specify+account%0A%23SBATCH+--time%3D00-03%3A00+++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23SBATCH+--nodes%3D1+++++++++++++%23+Specify+number+of+compute+nodes+%28narval+1+node+max%29%0A%23SBATCH+--ntasks-per-node%3D32++%23+Specify+number+of+cores+per+node+%28graham+32+or+44%2C+cedar+48%2C+beluga+40%2C+or+less%29%0A%23SBATCH+--mem%3D0+++++++++++++++%23+Do+not+change+%28allocates+all+memory+per+compute+node%29%0A%23SBATCH+--cpus-per-task%3D1+++++%23+Do+not+change%0A%23SBATCH+--array%3D1-5%251+++++++++%23+Specify+number+of+requeue+attempts+%282+or+more%2C+5+is+shown%29%0A%0Amodule+load+StdEnv%2F2023+++++++%23+Do+not+change%0Amodule+load+ansys%2F2023R2++++++%23+Specify+version+%28beluga%2C+cedar%2C+graham%2C+narval%29%0A%0A%23module+load+StdEnv%2F2020++++++%23+no+longer+supported%0A%23module+load+ansys%2F2019R3+++++%23+or+newer+versions+%28narval+only%29%0A%23module+load+ansys%2F2021R2+++++%23+or+newer+versions+%28beluga%2C+cedar%2C+graham%29%0A%0AMYJOURNALFILE%3Dsample.jou++++++%23+Specify+your+journal+file+name%0AMYVERSION%3D3d++++++++++++++++++%23+Specify+2d%2C+2ddp%2C+3d+or+3ddp%0A%0A%23+-------+do+not+change+any+lines+below+--------%0A%0Aif+%5B%5B+%22%24%7BCC_CLUSTER%7D%22+%3D%3D+narval+%5D%5D%3B+then%0A+if+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2020+%5D%3B+then%0A+++module+load+intel%2F2021+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%2Fmpi%2Flatest%0A+++export+HCOLL_RCACHE%3D%5Eucs%0A+elif+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2023+%5D%3B+then%0A+++module+load+intel%2F2023+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%0A+fi%0A+unset+I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS%0A+unset+I_MPI_ROOT%0Afi%0A%0Aslurm_hl2hl.py+--format+ANSYS-FLUENT+%3E+%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID%0ANCORES%3D%24%28%28SLURM_NNODES+%2A+SLURM_NTASKS_PER_NODE+%2A+SLURM_CPUS_PER_TASK%29%29%0A%0Aif+%5B+%22%24SLURM_NNODES%22+%3D%3D+1+%5D%3B+then%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pshmem+-i+%24MYJOURNALFILE%0Aelse%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pib+-cnf%3D%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID+-i+%24MYJOURNALFILE%0Afi%0Aif+%5B+%24%3F+-eq+0+%5D%3B+then%0A++++echo+%22Job+completed+successfully%21+Exiting+now.%22%0A++++scancel+%24SLURM_ARRAY_JOB_ID%0Aelse%0A++++echo+%22Job+attempt+%24SLURM_ARRAY_TASK_ID+of+%24SLURM_ARRAY_TASK_COUNT+failed+due+to+license+or+simulation+issue%21%22%0A++++if+%5B+%24SLURM_ARRAY_TASK_ID+-lt+%24SLURM_ARRAY_TASK_COUNT+%5D%3B+then%0A+++++++echo+%22Resubmitting+job+now+%E2%80%A6%22%0A++++else%0A+++++++echo+%22All+job+attempts+failed+exiting+now.%22%0A++++fi%0Afi" />
<input type="hidden" name="filename" value="script-flu-bynode+requeue.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group   # Specify account</span>
<span class="c1">#SBATCH --time=00-03:00       # Specify time limit dd-hh:mm</span>
<span class="c1">#SBATCH --nodes=1             # Specify number of compute nodes (narval 1 node max)</span>
<span class="c1">#SBATCH --ntasks-per-node=32  # Specify number of cores per node (graham 32 or 44, cedar 48, beluga 40, or less)</span>
<span class="c1">#SBATCH --mem=0               # Do not change (allocates all memory per compute node)</span>
<span class="c1">#SBATCH --cpus-per-task=1     # Do not change</span>
<span class="c1">#SBATCH --array=1-5%1         # Specify number of requeue attempts (2 or more, 5 is shown)</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023<span class="w">       </span><span class="c1"># Do not change</span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">      </span><span class="c1"># Specify version (beluga, cedar, graham, narval)</span>

<span class="c1">#module load StdEnv/2020      # no longer supported</span>
<span class="c1">#module load ansys/2019R3     # or newer versions (narval only)</span>
<span class="c1">#module load ansys/2021R2     # or newer versions (beluga, cedar, graham)</span>

<span class="nv">MYJOURNALFILE</span><span class="o">=</span>sample.jou<span class="w">      </span><span class="c1"># Specify your journal file name</span>
<span class="nv">MYVERSION</span><span class="o">=</span>3d<span class="w">                  </span><span class="c1"># Specify 2d, 2ddp, 3d or 3ddp</span>

<span class="c1"># ------- do not change any lines below --------</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CC_CLUSTER</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>narval<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2021<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>/mpi/latest
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">HCOLL_RCACHE</span><span class="o">=</span>^ucs
<span class="w"> </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2023<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>
<span class="w"> </span><span class="k">fi</span>
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_ROOT
<span class="k">fi</span>

slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-FLUENT<span class="w"> </span>&gt;<span class="w"> </span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="k">$((</span><span class="nv">SLURM_NNODES</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_NTASKS_PER_NODE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="k">))</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_NNODES</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pshmem<span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">else</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pib<span class="w"> </span>-cnf<span class="o">=</span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">fi</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Job completed successfully! Exiting now.&quot;</span>
<span class="w">    </span>scancel<span class="w"> </span><span class="nv">$SLURM_ARRAY_JOB_ID</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Job attempt </span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="s2"> of </span><span class="nv">$SLURM_ARRAY_TASK_COUNT</span><span class="s2"> failed due to license or simulation issue!&quot;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="w"> </span>-lt<span class="w"> </span><span class="nv">$SLURM_ARRAY_TASK_COUNT</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">       </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Resubmitting job now â€¦&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">       </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;All job attempts failed exiting now.&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="k">fi</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-flu-bycore+requeue.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group+++%23+Specify+account%0A%23SBATCH+--time%3D00-03%3A00+++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23%23SBATCH+--nodes%3D1++++++++++++%23+Uncomment+to+specify+%28narval+1+node+max%29+%0A%23SBATCH+--ntasks%3D16+++++++++++%23+Specify+total+number+of+cores%0A%23SBATCH+--mem-per-cpu%3D4G++++++%23+Specify+memory+per+core%0A%23SBATCH+--cpus-per-task%3D1+++++%23+Do+not+change%0A%23SBATCH+--array%3D1-5%251+++++++++%23+Specify+number+of+requeue+attempts+%282+or+more%2C+5+is+shown%29%0A%0Amodule+load+StdEnv%2F2023+++++++%23+Do+not+change%0Amodule+load+ansys%2F2023R2++++++%23+Specify+version+%28beluga%2C+cedar%2C+graham%2C+narval%29%0A%0A%23module+load+StdEnv%2F2020++++++%23+no+longer+supported%0A%23module+load+ansys%2F2019R3+++++%23+or+newer+versions+%28narval+only%29%0A%23module+load+ansys%2F2021R2+++++%23+or+newer+versions+%28beluga%2C+cedar%2C+graham%29%0A%0AMYJOURNALFILE%3Dsample.jou++++++%23+Specify+your+journal+file+name%0AMYVERSION%3D3d++++++++++++++++++%23+Specify+2d%2C+2ddp%2C+3d+or+3ddp%0A%0A%23+-------+do+not+change+any+lines+below+--------%0A%0Aif+%5B%5B+%22%24%7BCC_CLUSTER%7D%22+%3D%3D+narval+%5D%5D%3B+then%0A+if+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2020+%5D%3B+then%0A+++module+load+intel%2F2021+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%2Fmpi%2Flatest%0A+++export+HCOLL_RCACHE%3D%5Eucs%0A+elif+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2023+%5D%3B+then%0A+++module+load+intel%2F2023+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%0A+fi%0A+unset+I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS%0A+unset+I_MPI_ROOT%0Afi%0A%0Aslurm_hl2hl.py+--format+ANSYS-FLUENT+%3E+%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID%0ANCORES%3D%24%28%28SLURM_NTASKS+%2A+SLURM_CPUS_PER_TASK%29%29%0A%0Aif+%5B+%22%24SLURM_NNODES%22+%3D%3D+1+%5D%3B+then%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pshmem+-i+%24MYJOURNALFILE%0Aelse%0A+fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pib+-cnf%3D%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID+-i+%24MYJOURNALFILE%0Afi%0Aif+%5B+%24%3F+-eq+0+%5D%3B+then%0A++++echo+%22Job+completed+successfully%21+Exiting+now.%22%0A++++scancel+%24SLURM_ARRAY_JOB_ID%0Aelse%0A++++echo+%22Job+attempt+%24SLURM_ARRAY_TASK_ID+of+%24SLURM_ARRAY_TASK_COUNT+failed+due+to+license+or+simulation+issue%21%22%0A++++if+%5B+%24SLURM_ARRAY_TASK_ID+-lt+%24SLURM_ARRAY_TASK_COUNT+%5D%3B+then%0A+++++++echo+%22Resubmitting+job+now+%E2%80%A6%22%0A++++else%0A+++++++echo+%22All+job+attempts+failed+exiting+now.%22%0A++++fi%0Afi" />
<input type="hidden" name="filename" value="script-flu-bycore+requeue.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group   # Specify account</span>
<span class="c1">#SBATCH --time=00-03:00       # Specify time limit dd-hh:mm</span>
<span class="c1">##SBATCH --nodes=1            # Uncomment to specify (narval 1 node max) </span>
<span class="c1">#SBATCH --ntasks=16           # Specify total number of cores</span>
<span class="c1">#SBATCH --mem-per-cpu=4G      # Specify memory per core</span>
<span class="c1">#SBATCH --cpus-per-task=1     # Do not change</span>
<span class="c1">#SBATCH --array=1-5%1         # Specify number of requeue attempts (2 or more, 5 is shown)</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023<span class="w">       </span><span class="c1"># Do not change</span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">      </span><span class="c1"># Specify version (beluga, cedar, graham, narval)</span>

<span class="c1">#module load StdEnv/2020      # no longer supported</span>
<span class="c1">#module load ansys/2019R3     # or newer versions (narval only)</span>
<span class="c1">#module load ansys/2021R2     # or newer versions (beluga, cedar, graham)</span>

<span class="nv">MYJOURNALFILE</span><span class="o">=</span>sample.jou<span class="w">      </span><span class="c1"># Specify your journal file name</span>
<span class="nv">MYVERSION</span><span class="o">=</span>3d<span class="w">                  </span><span class="c1"># Specify 2d, 2ddp, 3d or 3ddp</span>

<span class="c1"># ------- do not change any lines below --------</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CC_CLUSTER</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>narval<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2021<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>/mpi/latest
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">HCOLL_RCACHE</span><span class="o">=</span>^ucs
<span class="w"> </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2023<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>
<span class="w"> </span><span class="k">fi</span>
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_ROOT
<span class="k">fi</span>

slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-FLUENT<span class="w"> </span>&gt;<span class="w"> </span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="k">$((</span><span class="nv">SLURM_NTASKS</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="k">))</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_NNODES</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pshmem<span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">else</span>
<span class="w"> </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pib<span class="w"> </span>-cnf<span class="o">=</span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOURNALFILE</span>
<span class="k">fi</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Job completed successfully! Exiting now.&quot;</span>
<span class="w">    </span>scancel<span class="w"> </span><span class="nv">$SLURM_ARRAY_JOB_ID</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Job attempt </span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="s2"> of </span><span class="nv">$SLURM_ARRAY_TASK_COUNT</span><span class="s2"> failed due to license or simulation issue!&quot;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="w"> </span>-lt<span class="w"> </span><span class="nv">$SLURM_ARRAY_TASK_COUNT</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">       </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Resubmitting job now â€¦&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">       </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;All job attempts failed exiting now.&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="k">fi</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<h4><span id="Red.C3.A9marrage"></span><span class="mw-headline" id="RedÃ©marrage">RedÃ©marrage</span></h4>
<p>Les deux scripts suivants automatisent le redÃ©marrage de tÃ¢ches intensives qui exigent plus que le maximum de sept jours d'exÃ©cution permis sur la plupart des grappes. Le redÃ©marrage se fait Ã  partir des fichiers de valeur de pas de temps les plus rÃ©cemment sauvegardÃ©s. Une exigence de base est que le premier pas puisse Ãªtre terminÃ© avant la fin du temps demandÃ© dans le vecteur de tÃ¢ches (dÃ©fini dans le haut du script) quand une simulation est lancÃ©e Ã  partir d'un champ initialisÃ©. Nous supposons que la valeur du pas est fixe. Pour commencer, un groupe de <i>sample.cas</i>, <i>sample.dat</i> et <i>sample.jou</i> doit Ãªtre prÃ©sent. Modifiez le fichier <i>sample.jou</i> pour qu'il contienne <code>/solve/dual-time-iterate 1</code> et <code>/file/auto-save/data-frequency 1</code>. CrÃ©ez ensuite un fichier de journalisation avec <code>cp sample.jou sample-restart.jou</code> et modifiez le fichier <i>sample-restart.jou</i> pour qu'il contienne <code>/file/read-cas-data sample-restart</code> plutÃ´t que <code>/file/read-cas-data sample</code> et mettez en commentaire la ligne pour l'initialisation en la prÃ©cÃ©dant dâ€™un point-virgule, par exemple <code>;/solve/initialize/initialize-flow</code>. Si votre deuxiÃ¨me pas et les pas qui suivent sont exÃ©cutÃ©s deux fois plus vite que le pas initial, modifiez <i>sample-restart.jou</i> en spÃ©cifiant <code>/solve/dual-time-iterate 2</code>. De cette faÃ§on, la solution ne sera redÃ©marrÃ©e qu'aprÃ¨s que les deux pas suivant le pas initial soient terminÃ©s. Un fichier de rÃ©sultats pour chaque pas sera enregistrÃ© dans le sous-rÃ©pertoire de sortie. La valeur 2 est arbitraire, mais elle devrait Ãªtre utilisÃ©e pour que la durÃ©e de deux pas soit moindre que la durÃ©e allouÃ©e au vecteur de tÃ¢ches. Ceci limitera le nombre de redÃ©marrages, ce qui consomme beaucoup de ressources. Si le premier pas de <i>sample.jou</i> est fait Ã  partir d'une solution prÃ©cÃ©dente, choisissez 1 plutÃ´t que 2 puisque tous les pas auront probablement besoin du mÃªme temps d'exÃ©cution. En supposant que 2 est choisi, la durÃ©e totale de la simulation sera 1*Dt+2*Nrestart*Dt oÃ¹ Nrestart est le nombre de redÃ©marrages dÃ©fini dans le script Slurm. Le nombre total de pas (de mÃªme que le nombre de fichiers de rÃ©sultats gÃ©nÃ©rÃ©s) sera ainsi 1+2*Nrestart. La valeur pour le temps demandÃ© devrait Ãªtre choisie afin que le pas initial et les pas suivants se terminent dans la fenÃªtre de temps de Slurm, qui peut aller jusqu'Ã  <code>#SBATCH --time=07-00:00</code> jours.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-3-0" name="tabs-3" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-3-1" name="tabs-3" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-3-1" data-tabpos="1">Plusieurs nÅ“uds (par nÅ“ud + redÃ©marrage)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-3-2" name="tabs-3" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-3-2" data-tabpos="2">Plusieurs nÅ“uds (par cÅ“ur + redÃ©marrage)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-flu-bynode+restart.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group+++%23+Specify+account%0A%23SBATCH+--time%3D07-00%3A00+++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23SBATCH+--nodes%3D1+++++++++++++%23+Specify+number+of+compute+nodes+%28narval+1+node+max%29%0A%23SBATCH+--ntasks-per-node%3D32++%23+Specify+number+of+cores+per+node+%28graham+32+or+44%2C+cedar+48%2C+beluga+40%2C+narval+64%2C+or+less%29%0A%23SBATCH+--mem%3D0+++++++++++++++%23+Do+not+change+%28allocates+all+memory+per+compute+node%29%0A%23SBATCH+--cpus-per-task%3D1+++++%23+Do+not+change%0A%23SBATCH+--array%3D1-5%251+++++++++%23+Specify+number+of+solution+restarts+%282+or+more%2C+5+is+shown%29%0A%0Amodule+load+StdEnv%2F2023+++++++%23+Do+not+change%0Amodule+load+ansys%2F2023R2++++++%23+Specify+version+%28beluga%2C+cedar%2C+graham%2C+narval%29%0A%0Aslurm_hl2hl.py+--format+ANSYS-FLUENT+%3E+%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID%0ANCORES%3D%24%28%28SLURM_NTASKS+%2A+SLURM_CPUS_PER_TASK%29%29%0A%0AMYVERSION%3D3d++++++++++++++++++++++++%23+Specify+2d%2C+2ddp%2C+3d+or+3ddp%0AMYJOUFILE%3Dsample.jou++++++++++++++++%23+Specify+your+journal+filename%0AMYJOUFILERES%3Dsample-restart.jou+++++%23+Specify+journal+restart+filename%0AMYCASFILERES%3Dsample-restart.cas.h5++%23+Specify+cas+restart+filename%0AMYDATFILERES%3Dsample-restart.dat.h5++%23+Specify+dat+restart+filename%0A%0A%23+-------+do+not+change+any+lines+below+--------%0A%0Aif+%5B%5B+%22%24%7BCC_CLUSTER%7D%22+%3D%3D+narval+%5D%5D%3B+then%0A+if+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2020+%5D%3B+then%0A+++module+load+intel%2F2021+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%2Fmpi%2Flatest%0A+++export+HCOLL_RCACHE%3D%5Eucs%0A+elif+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2023+%5D%3B+then%0A+++module+load+intel%2F2023+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%0A+fi%0A+unset+I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS%0A+unset+I_MPI_ROOT%0Afi%0A%0Aslurm_hl2hl.py+--format+ANSYS-FLUENT+%3E+%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID%0ANCORES%3D%24%28%28SLURM_NNODES+%2A+SLURM_NTASKS_PER_NODE+%2A+SLURM_CPUS_PER_TASK%29%29%0A%0A%23+Specify+2d%2C+2ddp%2C+3d+or+3ddp+and+replace+sample+with+your+journal+filename+%E2%80%A6%0Aif+%5B+%22%24SLURM_NNODES%22+%3D%3D+1+%5D%3B+then%0A++if+%5B+%22%24SLURM_ARRAY_TASK_ID%22+%3D%3D+1+%5D%3B+then%0A++++fluent+-g+2ddp+-t+%24NCORES+-affinity%3D0+-i+%24MYJOUFILE%0A++else%0A++++fluent+-g+2ddp+-t+%24NCORES+-affinity%3D0+-i+%24MYJOUFILERES%0A++fi%0Aelse+%0A++if+%5B+%22%24SLURM_ARRAY_TASK_ID%22+%3D%3D+1+%5D%3B+then%0A++++fluent+-g+2ddp+-t+%24NCORES+-affinity%3D0+-cnf%3D%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID+-mpi%3Dintel+-ssh+-i+%24MYJOUFILE%0A++else%0A++++fluent+-g+2ddp+-t+%24NCORES+-affinity%3D0+-cnf%3D%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID+-mpi%3Dintel+-ssh+-i+%24MYJOUFILERES%0A++fi%0Afi%0Aif+%5B+%24%3F+-eq+0+%5D%3B+then%0A++++echo%0A++++echo+%22SLURM_ARRAY_TASK_ID++%3D+%24SLURM_ARRAY_TASK_ID%22%0A++++echo+%22SLURM_ARRAY_TASK_COUNT+%3D+%24SLURM_ARRAY_TASK_COUNT%22%0A++++echo%0A++++if+%5B+%24SLURM_ARRAY_TASK_ID+-lt+%24SLURM_ARRAY_TASK_COUNT+%5D%3B+then%0A++++++echo+%22Restarting+job+with+the+most+recent+output+dat+file+%E2%80%A6%22%0A++++++ln+-sfv+output%2F%24%28ls+-ltr+output+%7C+grep+.cas+%7C+tail+-n1+%7C+awk+%27%7Bprint+%249%7D%27%29+%24MYCASFILERES%0A++++++ln+-sfv+output%2F%24%28ls+-ltr+output+%7C+grep+.dat+%7C+tail+-n1+%7C+awk+%27%7Bprint+%249%7D%27%29+%24MYDATFILERES%0A++++++ls+-lh+cavity%2A+output%2F%2A%0A++++else%0A++++++echo+%22Job+completed+successfully%21+Exiting+now.%22%0A++++++scancel+%24SLURM_ARRAY_JOB_ID%0A+++++fi%0Aelse%0A+++++echo+%22Simulation+failed.+Exiting+%E2%80%A6%22%0Afi" />
<input type="hidden" name="filename" value="script-flu-bynode+restart.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group   # Specify account</span>
<span class="c1">#SBATCH --time=07-00:00       # Specify time limit dd-hh:mm</span>
<span class="c1">#SBATCH --nodes=1             # Specify number of compute nodes (narval 1 node max)</span>
<span class="c1">#SBATCH --ntasks-per-node=32  # Specify number of cores per node (graham 32 or 44, cedar 48, beluga 40, narval 64, or less)</span>
<span class="c1">#SBATCH --mem=0               # Do not change (allocates all memory per compute node)</span>
<span class="c1">#SBATCH --cpus-per-task=1     # Do not change</span>
<span class="c1">#SBATCH --array=1-5%1         # Specify number of solution restarts (2 or more, 5 is shown)</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023<span class="w">       </span><span class="c1"># Do not change</span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">      </span><span class="c1"># Specify version (beluga, cedar, graham, narval)</span>

slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-FLUENT<span class="w"> </span>&gt;<span class="w"> </span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="k">$((</span><span class="nv">SLURM_NTASKS</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="k">))</span>

<span class="nv">MYVERSION</span><span class="o">=</span>3d<span class="w">                        </span><span class="c1"># Specify 2d, 2ddp, 3d or 3ddp</span>
<span class="nv">MYJOUFILE</span><span class="o">=</span>sample.jou<span class="w">                </span><span class="c1"># Specify your journal filename</span>
<span class="nv">MYJOUFILERES</span><span class="o">=</span>sample-restart.jou<span class="w">     </span><span class="c1"># Specify journal restart filename</span>
<span class="nv">MYCASFILERES</span><span class="o">=</span>sample-restart.cas.h5<span class="w">  </span><span class="c1"># Specify cas restart filename</span>
<span class="nv">MYDATFILERES</span><span class="o">=</span>sample-restart.dat.h5<span class="w">  </span><span class="c1"># Specify dat restart filename</span>

<span class="c1"># ------- do not change any lines below --------</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CC_CLUSTER</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>narval<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2021<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>/mpi/latest
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">HCOLL_RCACHE</span><span class="o">=</span>^ucs
<span class="w"> </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2023<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>
<span class="w"> </span><span class="k">fi</span>
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_ROOT
<span class="k">fi</span>

slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-FLUENT<span class="w"> </span>&gt;<span class="w"> </span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="k">$((</span><span class="nv">SLURM_NNODES</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_NTASKS_PER_NODE</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="k">))</span>

<span class="c1"># Specify 2d, 2ddp, 3d or 3ddp and replace sample with your journal filename â€¦</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_NNODES</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>fluent<span class="w"> </span>-g<span class="w"> </span>2ddp<span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOUFILE</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span>fluent<span class="w"> </span>-g<span class="w"> </span>2ddp<span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOUFILERES</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">else</span><span class="w"> </span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>fluent<span class="w"> </span>-g<span class="w"> </span>2ddp<span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-cnf<span class="o">=</span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-ssh<span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOUFILE</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span>fluent<span class="w"> </span>-g<span class="w"> </span>2ddp<span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-cnf<span class="o">=</span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-ssh<span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOUFILERES</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">fi</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SLURM_ARRAY_TASK_ID  = </span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SLURM_ARRAY_TASK_COUNT = </span><span class="nv">$SLURM_ARRAY_TASK_COUNT</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="w"> </span>-lt<span class="w"> </span><span class="nv">$SLURM_ARRAY_TASK_COUNT</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Restarting job with the most recent output dat file â€¦&quot;</span>
<span class="w">      </span>ln<span class="w"> </span>-sfv<span class="w"> </span>output/<span class="k">$(</span>ls<span class="w"> </span>-ltr<span class="w"> </span>output<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>.cas<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-n1<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $9}&#39;</span><span class="k">)</span><span class="w"> </span><span class="nv">$MYCASFILERES</span>
<span class="w">      </span>ln<span class="w"> </span>-sfv<span class="w"> </span>output/<span class="k">$(</span>ls<span class="w"> </span>-ltr<span class="w"> </span>output<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-n1<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $9}&#39;</span><span class="k">)</span><span class="w"> </span><span class="nv">$MYDATFILERES</span>
<span class="w">      </span>ls<span class="w"> </span>-lh<span class="w"> </span>cavity*<span class="w"> </span>output/*
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Job completed successfully! Exiting now.&quot;</span>
<span class="w">      </span>scancel<span class="w"> </span><span class="nv">$SLURM_ARRAY_JOB_ID</span>
<span class="w">     </span><span class="k">fi</span>
<span class="k">else</span>
<span class="w">     </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Simulation failed. Exiting â€¦&quot;</span>
<span class="k">fi</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-flu-bycore+restart.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group+++%23+Specify+account%0A%23SBATCH+--time%3D00-03%3A00+++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23%23SBATCH+--nodes%3D1++++++++++++%23+Uncomment+to+specify+%28narval+1+node+max%29%0A%23SBATCH+--ntasks%3D16+++++++++++%23+Specify+total+number+of+cores%0A%23SBATCH+--mem-per-cpu%3D4G++++++%23+Specify+memory+per+core%0A%23SBATCH+--cpus-per-task%3D1+++++%23+Do+not+change%0A%23SBATCH+--array%3D1-5%251+++++++++%23+Specify+number+of+restart+aka+time+steps+%282+or+more%2C+5+is+shown%29%0A%0Amodule+load+StdEnv%2F2023+++++++%23+Do+not+change%0Amodule+load+ansys%2F2023R2++++++%23+Specify+version+%28beluga%2C+cedar%2C+graham%2C+narval%29%0A%0A%23module+load+StdEnv%2F2020++++++%23+no+longer+supported%0A%23module+load+ansys%2F2019R3+++++%23+or+newer+versions+%28narval+only%29%0A%23module+load+ansys%2F2021R2+++++%23+or+newer+versions+%28beluga%2C+cedar%2C+graham%29%0A%0AMYVERSION%3D3d++++++++++++++++++++++++%23+Specify+2d%2C+2ddp%2C+3d+or+3ddp%0AMYJOUFILE%3Dsample.jou++++++++++++++++%23+Specify+your+journal+filename%0AMYJOUFILERES%3Dsample-restart.jou+++++%23+Specify+journal+restart+filename%0AMYCASFILERES%3Dsample-restart.cas.h5++%23+Specify+cas+restart+filename%0AMYDATFILERES%3Dsample-restart.dat.h5++%23+Specify+dat+restart+filename%0A%0A%23+-------+do+not+change+any+lines+below+--------%0A%0Aif+%5B%5B+%22%24%7BCC_CLUSTER%7D%22+%3D%3D+narval+%5D%5D%3B+then%0A+if+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2020+%5D%3B+then%0A+++module+load+intel%2F2021+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%2Fmpi%2Flatest%0A+++export+HCOLL_RCACHE%3D%5Eucs%0A+elif+%5B+%22%24EBVERSIONGENTOO%22+%3D%3D+2023+%5D%3B+then%0A+++module+load+intel%2F2023+intelmpi%0A+++export+INTELMPI_ROOT%3D%24I_MPI_ROOT%0A+fi%0A+unset+I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS%0A+unset+I_MPI_ROOT%0Afi%0A%0Aslurm_hl2hl.py+--format+ANSYS-FLUENT+%3E+%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID%0ANCORES%3D%24%28%28SLURM_NTASKS+%2A+SLURM_CPUS_PER_TASK%29%29%0A%0Aif+%5B+%22%24SLURM_NNODES%22+%3D%3D+1+%5D%3B+then%0A++if+%5B+%22%24SLURM_ARRAY_TASK_ID%22+%3D%3D+1+%5D%3B+then%0A++++fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pshmem+-I+%24MYFILEJOU%0A++else%0A++++fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pshmem+-I+%24MYFILEJOURES%0A++fi%0Aelse+%0A++if+%5B+%22%24SLURM_ARRAY_TASK_ID%22+%3D%3D+1+%5D%3B+then%0A++++fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pib+-cnf%3D%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID+-i+%24MYJOUFILE%0A++else%0A++++fluent+-g+%24MYVERSION+-t+%24NCORES+-affinity%3D0+-mpi%3Dintel+-pib+-cnf%3D%2Ftmp%2Fmachinefile-%24SLURM_JOB_ID+-i+%24MYJOUFILERES%0A++fi%0Afi%0Aif+%5B+%24%3F+-eq+0+%5D%3B+then%0A++++echo%0A++++echo+%22SLURM_ARRAY_TASK_ID++%3D+%24SLURM_ARRAY_TASK_ID%22%0A++++echo+%22SLURM_ARRAY_TASK_COUNT+%3D+%24SLURM_ARRAY_TASK_COUNT%22%0A++++echo%0A++++if+%5B+%24SLURM_ARRAY_TASK_ID+-lt+%24SLURM_ARRAY_TASK_COUNT+%5D%3B+then%0A++++++echo+%22Restarting+job+with+the+most+recent+output+dat+file%22%0A++++++ln+-sfv+output%2F%24%28ls+-ltr+output+%7C+grep+.cas+%7C+tail+-n1+%7C+awk+%27%7Bprint+%249%7D%27%29+%24MYCASFILERES%0A++++++ln+-sfv+output%2F%24%28ls+-ltr+output+%7C+grep+.dat+%7C+tail+-n1+%7C+awk+%27%7Bprint+%249%7D%27%29+%24MYDATFILERES%0A++++++ls+-lh+cavity%2A+output%2F%2A%0A++++else%0A++++++echo+%22Job+completed+successfully%21+Exiting+now.%22%0A++++++scancel+%24SLURM_ARRAY_JOB_ID%0A+++++fi%0Aelse%0A+++++echo+%22Simulation+failed.+Exiting+now.%22%0Afi" />
<input type="hidden" name="filename" value="script-flu-bycore+restart.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group   # Specify account</span>
<span class="c1">#SBATCH --time=00-03:00       # Specify time limit dd-hh:mm</span>
<span class="c1">##SBATCH --nodes=1            # Uncomment to specify (narval 1 node max)</span>
<span class="c1">#SBATCH --ntasks=16           # Specify total number of cores</span>
<span class="c1">#SBATCH --mem-per-cpu=4G      # Specify memory per core</span>
<span class="c1">#SBATCH --cpus-per-task=1     # Do not change</span>
<span class="c1">#SBATCH --array=1-5%1         # Specify number of restart aka time steps (2 or more, 5 is shown)</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023<span class="w">       </span><span class="c1"># Do not change</span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">      </span><span class="c1"># Specify version (beluga, cedar, graham, narval)</span>

<span class="c1">#module load StdEnv/2020      # no longer supported</span>
<span class="c1">#module load ansys/2019R3     # or newer versions (narval only)</span>
<span class="c1">#module load ansys/2021R2     # or newer versions (beluga, cedar, graham)</span>

<span class="nv">MYVERSION</span><span class="o">=</span>3d<span class="w">                        </span><span class="c1"># Specify 2d, 2ddp, 3d or 3ddp</span>
<span class="nv">MYJOUFILE</span><span class="o">=</span>sample.jou<span class="w">                </span><span class="c1"># Specify your journal filename</span>
<span class="nv">MYJOUFILERES</span><span class="o">=</span>sample-restart.jou<span class="w">     </span><span class="c1"># Specify journal restart filename</span>
<span class="nv">MYCASFILERES</span><span class="o">=</span>sample-restart.cas.h5<span class="w">  </span><span class="c1"># Specify cas restart filename</span>
<span class="nv">MYDATFILERES</span><span class="o">=</span>sample-restart.dat.h5<span class="w">  </span><span class="c1"># Specify dat restart filename</span>

<span class="c1"># ------- do not change any lines below --------</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CC_CLUSTER</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>narval<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2020</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2021<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>/mpi/latest
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">HCOLL_RCACHE</span><span class="o">=</span>^ucs
<span class="w"> </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$EBVERSIONGENTOO</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span>module<span class="w"> </span>load<span class="w"> </span>intel/2023<span class="w"> </span>intelmpi
<span class="w">   </span><span class="nb">export</span><span class="w"> </span><span class="nv">INTELMPI_ROOT</span><span class="o">=</span><span class="nv">$I_MPI_ROOT</span>
<span class="w"> </span><span class="k">fi</span>
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_HYDRA_BOOTSTRAP_EXEC_EXTRA_ARGS
<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>I_MPI_ROOT
<span class="k">fi</span>

slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-FLUENT<span class="w"> </span>&gt;<span class="w"> </span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span>
<span class="nv">NCORES</span><span class="o">=</span><span class="k">$((</span><span class="nv">SLURM_NTASKS</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">SLURM_CPUS_PER_TASK</span><span class="k">))</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_NNODES</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pshmem<span class="w"> </span>-I<span class="w"> </span><span class="nv">$MYFILEJOU</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pshmem<span class="w"> </span>-I<span class="w"> </span><span class="nv">$MYFILEJOURES</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">else</span><span class="w"> </span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pib<span class="w"> </span>-cnf<span class="o">=</span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOUFILE</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span>fluent<span class="w"> </span>-g<span class="w"> </span><span class="nv">$MYVERSION</span><span class="w"> </span>-t<span class="w"> </span><span class="nv">$NCORES</span><span class="w"> </span>-affinity<span class="o">=</span><span class="m">0</span><span class="w"> </span>-mpi<span class="o">=</span>intel<span class="w"> </span>-pib<span class="w"> </span>-cnf<span class="o">=</span>/tmp/machinefile-<span class="nv">$SLURM_JOB_ID</span><span class="w"> </span>-i<span class="w"> </span><span class="nv">$MYJOUFILERES</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">fi</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SLURM_ARRAY_TASK_ID  = </span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;SLURM_ARRAY_TASK_COUNT = </span><span class="nv">$SLURM_ARRAY_TASK_COUNT</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">echo</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$SLURM_ARRAY_TASK_ID</span><span class="w"> </span>-lt<span class="w"> </span><span class="nv">$SLURM_ARRAY_TASK_COUNT</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Restarting job with the most recent output dat file&quot;</span>
<span class="w">      </span>ln<span class="w"> </span>-sfv<span class="w"> </span>output/<span class="k">$(</span>ls<span class="w"> </span>-ltr<span class="w"> </span>output<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>.cas<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-n1<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $9}&#39;</span><span class="k">)</span><span class="w"> </span><span class="nv">$MYCASFILERES</span>
<span class="w">      </span>ln<span class="w"> </span>-sfv<span class="w"> </span>output/<span class="k">$(</span>ls<span class="w"> </span>-ltr<span class="w"> </span>output<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-n1<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $9}&#39;</span><span class="k">)</span><span class="w"> </span><span class="nv">$MYDATFILERES</span>
<span class="w">      </span>ls<span class="w"> </span>-lh<span class="w"> </span>cavity*<span class="w"> </span>output/*
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Job completed successfully! Exiting now.&quot;</span>
<span class="w">      </span>scancel<span class="w"> </span><span class="nv">$SLURM_ARRAY_JOB_ID</span>
<span class="w">     </span><span class="k">fi</span>
<span class="k">else</span>
<span class="w">     </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Simulation failed. Exiting now.&quot;</span>
<span class="k">fi</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<h3><span class="mw-headline" id="Fichiers_de_journalisation">Fichiers de journalisation</span></h3>
<p>Les fichiers de journalisation peuvent contenir toutes les commandes de l'interface TUI (<i>Text User Interface</i>) de Fluent; elles peuvent Ãªtre utilisÃ©es pour modifier des paramÃ¨tres de simulation comme la tempÃ©rature, la pression ou la vitesse du flux. Vous pouvez ainsi effectuer une sÃ©rie de simulations sous diffÃ©rentes conditions simplement en modifiant les paramÃ¨tres du fichier de journalisation. Consultez le guide d'utilisation de Fluent pour plus d'information ainsi que pour connaÃ®tre la liste des commandes. Les fichiers qui suivent sont configurÃ©s avec <code>/file/cff-file no</code> pour utiliser les formats de fichiers .cas/.dat qui sont les formats par dÃ©faut pour les modules jusqu'Ã  2019R3. Pour utiliser les formats .cas.h5/.dat.h5 plus efficaces des versions Ã  partir de 2020R1, la configuration est 
<code>/file/cff-files yes</code>.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-4-0" name="tabs-4" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-4-1" name="tabs-4" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-4-1" data-tabpos="1">Fichier de journalisation (stable, cas)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-4-2" name="tabs-4" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-4-2" data-tabpos="2">Fichier de journalisation (stable, cas + donnÃ©es)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-4-3" name="tabs-4" class="tabs-input tabs-input-3" /><label class="tabs-label" for="tabs-input-4-3" data-tabpos="3">Fichier de journalisation (temporaire)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> sample1.jou</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%3B+SAMPLE+FLUENT+JOURNAL+FILE+-+STEADY+SIMULATION%0A%3B+----------------------------------------------%0A%3B+lines+beginning+with+a+semicolon+are+comments%0A%0A%3B+Overwrite+files+by+default%0A%2Ffile%2Fconfirm-overwrite+no%0A%0A%3B+Preferentially+read%2Fwrite+files+in+legacy+format%0A%2Ffile%2Fcff-files+no%0A%0A%3B+Read+input+case+and+data+files%0A%2Ffile%2Fread-case-data+FFF-in%0A%0A%3B+Run+the+solver+for+this+many+iterations%0A%2Fsolve%2Fiterate+1000%0A%0A%3B+Overwrite+output+files+by+default%0A%2Ffile%2Fconfirm-overwrite+n%0A%0A%3B+Write+final+output+data+file%0A%2Ffile%2Fwrite-case-data+FFF-out%0A%0A%3B+Write+simulation+report+to+file+%28optional%29%0A%2Freport%2Fsummary+y+%22My_Simulation_Report.txt%22%0A%0A%3B+Cleanly+shutdown+fluent%0A%2Fexit" />
<input type="hidden" name="filename" value="sample1.jou" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="p">;</span><span class="w"> </span>SAMPLE<span class="w"> </span>FLUENT<span class="w"> </span>JOURNAL<span class="w"> </span>FILE<span class="w"> </span>-<span class="w"> </span>STEADY<span class="w"> </span>SIMULATION
<span class="p">;</span><span class="w"> </span>----------------------------------------------
<span class="p">;</span><span class="w"> </span>lines<span class="w"> </span>beginning<span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>semicolon<span class="w"> </span>are<span class="w"> </span>comments

<span class="p">;</span><span class="w"> </span>Overwrite<span class="w"> </span>files<span class="w"> </span>by<span class="w"> </span>default
/file/confirm-overwrite<span class="w"> </span>no

<span class="p">;</span><span class="w"> </span>Preferentially<span class="w"> </span>read/write<span class="w"> </span>files<span class="w"> </span><span class="k">in</span><span class="w"> </span>legacy<span class="w"> </span>format
/file/cff-files<span class="w"> </span>no

<span class="p">;</span><span class="w"> </span>Read<span class="w"> </span>input<span class="w"> </span><span class="k">case</span><span class="w"> </span>and<span class="w"> </span>data<span class="w"> </span>files
/file/read-case-data<span class="w"> </span>FFF-in

<span class="p">;</span><span class="w"> </span>Run<span class="w"> </span>the<span class="w"> </span>solver<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>many<span class="w"> </span>iterations
/solve/iterate<span class="w"> </span><span class="m">1000</span>

<span class="p">;</span><span class="w"> </span>Overwrite<span class="w"> </span>output<span class="w"> </span>files<span class="w"> </span>by<span class="w"> </span>default
/file/confirm-overwrite<span class="w"> </span>n

<span class="p">;</span><span class="w"> </span>Write<span class="w"> </span>final<span class="w"> </span>output<span class="w"> </span>data<span class="w"> </span>file
/file/write-case-data<span class="w"> </span>FFF-out

<span class="p">;</span><span class="w"> </span>Write<span class="w"> </span>simulation<span class="w"> </span>report<span class="w"> </span>to<span class="w"> </span>file<span class="w"> </span><span class="o">(</span>optional<span class="o">)</span>
/report/summary<span class="w"> </span>y<span class="w"> </span><span class="s2">&quot;My_Simulation_Report.txt&quot;</span>

<span class="p">;</span><span class="w"> </span>Cleanly<span class="w"> </span>shutdown<span class="w"> </span>fluent
/exit
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> sample2.jou</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%3B+EXEMPLE+DE+FICHIER+DE+JOURNALISATION+-+SIMULATION+STABLE%0A%3B+----------------------------------------------%0A%3B+le+point-virgule+en+d%C3%A9but+de+ligne+signale+un+commentaire%0A%0A%3B+Overwrite+files+by+default%0A%2Ffile%2Fconfirm-overwrite+no%0A%0A%3B+Preferentially+read%2Fwrite+files+in+legacy+format%0A%2Ffile%2Fcff-files+no%0A%0A%3B+Read+input+files%0A%2Ffile%2Fread-case-data+FFF-in%0A%0A%3B+Write+a+data+file+every+100+iterations%0A%2Ffile%2Fauto-save%2Fdata-frequency+100%0A%0A%3B+Retain+data+files+from+5+most+recent+iterations%0A%2Ffile%2Fauto-save%2Fretain-most-recent-files+y%0A%0A%3B+Write+data+files+to+output+sub-directory+%28appends+iteration%29%0A%2Ffile%2Fauto-save%2Froot-name+output%2FFFF-out%0A%0A%3B+Run+the+solver+for+this+many+iterations%0A%2Fsolve%2Fiterate+1000%0A%0A%3B+%C3%A9crire+le+dernier+fichier+de+cas+et+de+donn%C3%A9es+en+sortie%0A%2Ffile%2Fwrite-case-data+FFF-out%0A%0A%3B+enregistrer+le+rapport+de+la+simulation+%28optionnel%29%0A%2Freport%2Fsummary+y+%22My_Simulation_Report.txt%22%0A%0A%3B+fermez+correctement+Fluent%0Aexit" />
<input type="hidden" name="filename" value="sample2.jou" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="p">;</span><span class="w"> </span>EXEMPLE<span class="w"> </span>DE<span class="w"> </span>FICHIER<span class="w"> </span>DE<span class="w"> </span>JOURNALISATION<span class="w"> </span>-<span class="w"> </span>SIMULATION<span class="w"> </span>STABLE
<span class="p">;</span><span class="w"> </span>----------------------------------------------
<span class="p">;</span><span class="w"> </span>le<span class="w"> </span>point-virgule<span class="w"> </span>en<span class="w"> </span>dÃ©but<span class="w"> </span>de<span class="w"> </span>ligne<span class="w"> </span>signale<span class="w"> </span>un<span class="w"> </span>commentaire

<span class="p">;</span><span class="w"> </span>Overwrite<span class="w"> </span>files<span class="w"> </span>by<span class="w"> </span>default
/file/confirm-overwrite<span class="w"> </span>no

<span class="p">;</span><span class="w"> </span>Preferentially<span class="w"> </span>read/write<span class="w"> </span>files<span class="w"> </span><span class="k">in</span><span class="w"> </span>legacy<span class="w"> </span>format
/file/cff-files<span class="w"> </span>no

<span class="p">;</span><span class="w"> </span>Read<span class="w"> </span>input<span class="w"> </span>files
/file/read-case-data<span class="w"> </span>FFF-in

<span class="p">;</span><span class="w"> </span>Write<span class="w"> </span>a<span class="w"> </span>data<span class="w"> </span>file<span class="w"> </span>every<span class="w"> </span><span class="m">100</span><span class="w"> </span>iterations
/file/auto-save/data-frequency<span class="w"> </span><span class="m">100</span>

<span class="p">;</span><span class="w"> </span>Retain<span class="w"> </span>data<span class="w"> </span>files<span class="w"> </span>from<span class="w"> </span><span class="m">5</span><span class="w"> </span>most<span class="w"> </span>recent<span class="w"> </span>iterations
/file/auto-save/retain-most-recent-files<span class="w"> </span>y

<span class="p">;</span><span class="w"> </span>Write<span class="w"> </span>data<span class="w"> </span>files<span class="w"> </span>to<span class="w"> </span>output<span class="w"> </span>sub-directory<span class="w"> </span><span class="o">(</span>appends<span class="w"> </span>iteration<span class="o">)</span>
/file/auto-save/root-name<span class="w"> </span>output/FFF-out

<span class="p">;</span><span class="w"> </span>Run<span class="w"> </span>the<span class="w"> </span>solver<span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>many<span class="w"> </span>iterations
/solve/iterate<span class="w"> </span><span class="m">1000</span>

<span class="p">;</span><span class="w"> </span>Ã©crire<span class="w"> </span>le<span class="w"> </span>dernier<span class="w"> </span>fichier<span class="w"> </span>de<span class="w"> </span>cas<span class="w"> </span>et<span class="w"> </span>de<span class="w"> </span>donnÃ©es<span class="w"> </span>en<span class="w"> </span>sortie
/file/write-case-data<span class="w"> </span>FFF-out

<span class="p">;</span><span class="w"> </span>enregistrer<span class="w"> </span>le<span class="w"> </span>rapport<span class="w"> </span>de<span class="w"> </span>la<span class="w"> </span>simulation<span class="w"> </span><span class="o">(</span>optionnel<span class="o">)</span>
/report/summary<span class="w"> </span>y<span class="w"> </span><span class="s2">&quot;My_Simulation_Report.txt&quot;</span>

<span class="p">;</span><span class="w"> </span>fermez<span class="w"> </span>correctement<span class="w"> </span>Fluent
<span class="nb">exit</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-3">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> sample3.jou</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%3B+EXEMPLE+DE+FICHIER+DE+JOURNALISATION+-+SIMULATION+TEMPORAIRE%0A%3B+----------------------------------------------%0A%3B+le+point-virgule+en+d%C3%A9but+de+ligne+signale+un+commentaire%0A%0A%3B+Overwrite+files+by+default%0A%2Ffile%2Fconfirm-overwrite+no%0A%0A%3B+Preferentially+read%2Fwrite+files+in+legacy+format%0A%2Ffile%2Fcff-files+no%0A%0A%3B+Read+the+input+case+file%0A%2Ffile%2Fread-case+FFF-transient-inp%0A%0A%3B+For+continuation+%28restart%29+read+in+both+case+and+data+input+files%0A%3B%2Ffile%2Fread-case-data+FFF-transient-inp%0A%0A%3B+Write+a+data+%28and+maybe+case%29+file+every+100+time+steps%0A%2Ffile%2Fauto-save%2Fdata-frequency+100%0A%2Ffile%2Fauto-save%2Fcase-frequency+if-case-is-modified%0A%0A%3B+Retain+only+the+most+recent+5+data+%28and+maybe+case%29+files%0A%2Ffile%2Fauto-save%2Fretain-most-recent-files+y%0A%0A%3B+Write+to+output+sub-directory+%28appends+flowtime+and+timestep%29%0A%2Ffile%2Fauto-save%2Froot-name+output%2FFFF-transient-out-%2510.6f%0A%0A%3B+%23%23%23%23%23+Settings+for+Transient+simulation+%3A++%23%23%23%23%23%0A%0A%3B+Set+the+physical+time+step+size%0A%2Fsolve%2Fset%2Ftime-step+0.0001%0A%0A%3B+Set+the+number+of+iterations+for+which+convergence+monitors+are+reported%0A%2Fsolve%2Fset%2Freporting-interval+1%0A%0A%3B+%23%23%23%23%23+Fin+des+param%C3%A8tres+%23%23%23%23%23%0A%0A%3B+initialiser+avec+la+m%C3%A9thode+hybride%0A%2Fsolve%2Finitialize%2Fhyb-initialization%0A%0A%3B+indiquer+le+nombre+maximal+d%27it%C3%A9rations+par+pas+et+le+nombre+de+pas%0A%3B%2Fsolve%2Fset%2Fmax-iterations-per-time-step+75%0A%3B%2Fsolve%2Fdual-time-iterate+1000+%2C%0A%2Fsolve%2Fdual-time-iterate+1000+75%0A%0A%3B+enregistrer+les+derniers+fichiers+en+sortie+pour+les+cas+et+les+donn%C3%A9es%0A%2Ffile%2Fwrite-case-data+FFF-transient-out%0A%0A%3B+enregistrer+le+rapport+de+la+simulation+%28optionnel%29%0A%2Freport%2Fsummary+y+Report_Transient_Simulation.txt%0A%0A%3B+Cleanly+shutdown+fluent%0A%2Fexit" />
<input type="hidden" name="filename" value="sample3.jou" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="p">;</span><span class="w"> </span>EXEMPLE<span class="w"> </span>DE<span class="w"> </span>FICHIER<span class="w"> </span>DE<span class="w"> </span>JOURNALISATION<span class="w"> </span>-<span class="w"> </span>SIMULATION<span class="w"> </span>TEMPORAIRE
<span class="p">;</span><span class="w"> </span>----------------------------------------------
<span class="p">;</span><span class="w"> </span>le<span class="w"> </span>point-virgule<span class="w"> </span>en<span class="w"> </span>dÃ©but<span class="w"> </span>de<span class="w"> </span>ligne<span class="w"> </span>signale<span class="w"> </span>un<span class="w"> </span>commentaire

<span class="p">;</span><span class="w"> </span>Overwrite<span class="w"> </span>files<span class="w"> </span>by<span class="w"> </span>default
/file/confirm-overwrite<span class="w"> </span>no

<span class="p">;</span><span class="w"> </span>Preferentially<span class="w"> </span>read/write<span class="w"> </span>files<span class="w"> </span><span class="k">in</span><span class="w"> </span>legacy<span class="w"> </span>format
/file/cff-files<span class="w"> </span>no

<span class="p">;</span><span class="w"> </span>Read<span class="w"> </span>the<span class="w"> </span>input<span class="w"> </span><span class="k">case</span><span class="w"> </span>file
/file/read-case<span class="w"> </span>FFF-transient-inp

<span class="p">;</span><span class="w"> </span>For<span class="w"> </span>continuation<span class="w"> </span><span class="o">(</span>restart<span class="o">)</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>both<span class="w"> </span><span class="k">case</span><span class="w"> </span>and<span class="w"> </span>data<span class="w"> </span>input<span class="w"> </span>files
<span class="p">;</span>/file/read-case-data<span class="w"> </span>FFF-transient-inp

<span class="p">;</span><span class="w"> </span>Write<span class="w"> </span>a<span class="w"> </span>data<span class="w"> </span><span class="o">(</span>and<span class="w"> </span>maybe<span class="w"> </span><span class="k">case</span><span class="o">)</span><span class="w"> </span>file<span class="w"> </span>every<span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="nb">time</span><span class="w"> </span>steps
/file/auto-save/data-frequency<span class="w"> </span><span class="m">100</span>
/file/auto-save/case-frequency<span class="w"> </span><span class="k">if</span>-case-is-modified

<span class="p">;</span><span class="w"> </span>Retain<span class="w"> </span>only<span class="w"> </span>the<span class="w"> </span>most<span class="w"> </span>recent<span class="w"> </span><span class="m">5</span><span class="w"> </span>data<span class="w"> </span><span class="o">(</span>and<span class="w"> </span>maybe<span class="w"> </span><span class="k">case</span><span class="o">)</span><span class="w"> </span>files
/file/auto-save/retain-most-recent-files<span class="w"> </span>y

<span class="p">;</span><span class="w"> </span>Write<span class="w"> </span>to<span class="w"> </span>output<span class="w"> </span>sub-directory<span class="w"> </span><span class="o">(</span>appends<span class="w"> </span>flowtime<span class="w"> </span>and<span class="w"> </span>timestep<span class="o">)</span>
/file/auto-save/root-name<span class="w"> </span>output/FFF-transient-out-%10.6f

<span class="p">;</span><span class="w"> </span><span class="c1">##### Settings for Transient simulation&#160;:  #####</span>

<span class="p">;</span><span class="w"> </span>Set<span class="w"> </span>the<span class="w"> </span>physical<span class="w"> </span><span class="nb">time</span><span class="w"> </span>step<span class="w"> </span>size
/solve/set/time-step<span class="w"> </span><span class="m">0</span>.0001

<span class="p">;</span><span class="w"> </span>Set<span class="w"> </span>the<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>iterations<span class="w"> </span><span class="k">for</span><span class="w"> </span>which<span class="w"> </span>convergence<span class="w"> </span>monitors<span class="w"> </span>are<span class="w"> </span>reported
/solve/set/reporting-interval<span class="w"> </span><span class="m">1</span>

<span class="p">;</span><span class="w"> </span><span class="c1">##### Fin des paramÃ¨tres #####</span>

<span class="p">;</span><span class="w"> </span>initialiser<span class="w"> </span>avec<span class="w"> </span>la<span class="w"> </span>mÃ©thode<span class="w"> </span>hybride
/solve/initialize/hyb-initialization

<span class="p">;</span><span class="w"> </span>indiquer<span class="w"> </span>le<span class="w"> </span>nombre<span class="w"> </span>maximal<span class="w"> </span>d<span class="err">&#39;</span>itÃ©rations<span class="w"> </span>par<span class="w"> </span>pas<span class="w"> </span>et<span class="w"> </span>le<span class="w"> </span>nombre<span class="w"> </span>de<span class="w"> </span>pas
<span class="p">;</span>/solve/set/max-iterations-per-time-step<span class="w"> </span><span class="m">75</span>
<span class="p">;</span>/solve/dual-time-iterate<span class="w"> </span><span class="m">1000</span><span class="w"> </span>,
/solve/dual-time-iterate<span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="m">75</span>

<span class="p">;</span><span class="w"> </span>enregistrer<span class="w"> </span>les<span class="w"> </span>derniers<span class="w"> </span>fichiers<span class="w"> </span>en<span class="w"> </span>sortie<span class="w"> </span>pour<span class="w"> </span>les<span class="w"> </span>cas<span class="w"> </span>et<span class="w"> </span>les<span class="w"> </span>donnÃ©es
/file/write-case-data<span class="w"> </span>FFF-transient-out

<span class="p">;</span><span class="w"> </span>enregistrer<span class="w"> </span>le<span class="w"> </span>rapport<span class="w"> </span>de<span class="w"> </span>la<span class="w"> </span>simulation<span class="w"> </span><span class="o">(</span>optionnel<span class="o">)</span>
/report/summary<span class="w"> </span>y<span class="w"> </span>Report_Transient_Simulation.txt

<span class="p">;</span><span class="w"> </span>Cleanly<span class="w"> </span>shutdown<span class="w"> </span>fluent
/exit
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<h3><span class="mw-headline" id="Fonctions_UDF">Fonctions UDF</span></h3>
<p>La premiÃ¨re Ã©tape est de transfÃ©rer vers la grappe votre UDF (<i> User-Defined Function</i>), soit le fichier source sampleudf.c et tous les fichiers de dÃ©pendance supplÃ©mentaires. Lors du tÃ©lÃ©chargement Ã  partir d'une machine Windows, assurez-vous que le mode texte de votre client de transfert est utilisÃ©, sinon Fluent ne pourra pas lire correctement le fichier sur la grappe qui elle exÃ©cute Linux. L'UDF doit Ãªtre placÃ©e dans le rÃ©pertoire oÃ¹ rÃ©sident vos fichiers de journalisation, cas et dat. Ajoutez ensuite l'une des commandes suivantes dans votre fichier de journalisation avant les commandes qui lisent vos fichiers de simulation cas/dat. Que vous utilisiez l'approche UDF interprÃ©tÃ©e ou compilÃ©e, avant de tÃ©lÃ©charger votre fichier de cas, vÃ©rifiez que les boÃ®tes de dialogue <i>Interpreted UDFs</i> et <i>UDF Library Manager</i> ne sont pas configurÃ©es pour utiliser un UDF; ceci garantira que lorsque les tÃ¢ches sont soumises, seules les commandes du fichier de journalisation auront le contrÃ´le.
</p>
<h4><span id="Interpret.C3.A9"></span><span class="mw-headline" id="InterpretÃ©">InterpretÃ©</span></h4>
<p>Pour indiquer Ã  Fluent d'interprÃ©ter votre UDF au moment de l'exÃ©cution, ajoutez la ligne de commande suivante dans votre fichier journal avant que les fichiers cas/dat ne soient lus ou initialisÃ©s. Remplacez le nom de fichier sampleudf.c par le nom de votre fichier source. La commande reste la mÃªme, que la simulation soit exÃ©cutÃ©e sÃ©quentiellement ou en parallÃ¨le. Pour vous assurer que l'UDF se trouve dans le mÃªme rÃ©pertoire que le fichier de journalisation, ouvrez votre fichier cas dans l'interface graphique Fluent, supprimez toutes les dÃ©finitions gÃ©rÃ©es et rÃ©enregistrez-le. Cela garantira que seule la commande/mÃ©thode suivante est en contrÃ´le lors de l'exÃ©cution de Fluent. Pour utiliser une UDF interprÃ©tÃ©e avec des tÃ¢ches parallÃ¨les, elle devra Ãªtre parallÃ©lisÃ©e comme dÃ©crit dans la section ci-dessous.
</p>
<pre>define/user-defined/interpreted-functions "sampleudf.c" "cpp" 10000 no
</pre>
<h4><span id="Compil.C3.A9"></span><span class="mw-headline" id="CompilÃ©">CompilÃ©</span></h4>
<p>Pour utiliser cette approche, votre UDF doit Ãªtre compilÃ©e sur une de nos grappes au moins une fois. Cela crÃ©era une structure de sous-rÃ©pertoire libudf contenant la bibliothÃ¨que partagÃ©e <code>libudf.so</code> requise. Le rÃ©pertoire libudf ne peut pas Ãªtre simplement copiÃ© d'un systÃ¨me distant (comme votre ordinateur portable) vers l'Alliance car les dÃ©pendances de la bibliothÃ¨que partagÃ©e ne seront pas satisfaites, ce qui fera planter Fluent au dÃ©marrage. Cela dit, une fois que vous avez compilÃ© votre UDF sur une de nos grappes, vous pouvez transfÃ©rer la libudf nouvellement crÃ©Ã©e vers n'importe quel autre de nos grappes, Ã  condition que votre compte charge la mÃªme version du module d'environnement StdEnv. Une fois copiÃ©e, l'UDF peut Ãªtre utilisÃ©e en supprimant le commentaire de la deuxiÃ¨me ligne (load) libudf ci-dessous dans votre fichier de journalisation quand une tÃ¢che est soumise. Les deux lignes libudf (compile et load) ne doivent pas Ãªtre laissÃ©es sans commentaire lors de la soumission de tÃ¢ches, sinon votre UDF sera automatiquement (re)compilÃ©e pour chaque tÃ¢che. Non seulement cette mÃ©thode est trÃ¨s inefficace, mais elle peut Ã©galement entraÃ®ner des conflits de build de type Â«&#160;racetime&#160;Â» si plusieurs tÃ¢ches sont exÃ©cutÃ©es Ã  partir du mÃªme rÃ©pertoire. Outre la configuration de votre fichier de journalisation pour construire votre UDF, l'interface graphique de Fluent (exÃ©cutÃ©e sur n'importe quel nÅ“ud de calcul ou sur gra-vdi) peut Ã©galement Ãªtre utilisÃ©e. Pour ce faire, ajoutez le fichier source UDF dans la boÃ®te de dialogue <i>Compiled UDFs</i>, et cliquez sur <i>Build</i>. Lorsque vous utilisez une UDF compilÃ©e avec des tÃ¢ches parallÃ¨les, votre fichier source doit Ãªtre parallÃ©lisÃ© comme indiquÃ© dans la section ci-dessous.
</p>
<pre>define/user-defined/compiled-functions compile libudf yes sampleudf.c "" ""
</pre>
<p>et/ou
</p>
<pre>define/user-defined/compiled-functions load libudf
</pre>
<h4><span id="Parall.C3.A8le"></span><span class="mw-headline" id="ParallÃ¨le">ParallÃ¨le</span></h4>
<p>Avant qu'une UDF puisse Ãªtre utilisÃ©e avec une tÃ¢che parallÃ¨le Fluent (SMP Ã  nÅ“ud unique et MPI Ã  nÅ“uds multiples), elle doit Ãªtre parallÃ©lisÃ©e. En procÃ©dant ainsi, nous contrÃ´lons comment/quels processus (hÃ´te et/ou calcul) exÃ©cutent des parties spÃ©cifiques du code UDF lorsque Fluent est exÃ©cutÃ© en parallÃ¨le sur la grappe. La procÃ©dure d'instrumentation consiste Ã  ajouter des directives de compilation, des prÃ©dicats et des macros de rÃ©duction dans votre UDF sÃ©quentielle. Si vous ne le faites pas, Fluent fonctionnera lentement au mieux ou plantera immÃ©diatement au pire. Le rÃ©sultat final sera une UDF unique qui s'exÃ©cute efficacement lorsque Fluent est utilisÃ© Ã  la fois en mode sÃ©quentiel et en mode parallÃ¨le. Le sujet est dÃ©crit en dÃ©tail dans <i>Fluent Customization Manual, Part I: Chapter 7: Parallel Considerations</i> qui se trouve dans la <a class="mw-selflink-fragment" href="#Documentation_en_ligne">Documentation en ligne</a>.
</p>
<h4><span class="mw-headline" id="DPM">DPM</span></h4>
<p>Les UDF peuvent Ãªtre utilisÃ©es pour personnaliser les modÃ¨les de phase discrÃ¨te (DPM pour <i>Discrete Phase Models</i>) comme dÃ©crit dans <i>2024R2 Fluent Users Guide, Part III: Solution Mode, Chapter 24: Modeling Discrete Phase, 24.2 Steps for Using the Discrete Phase Models,</i> et dans <i>2024R2 Fluent Customization Manual, Part I: Creating and Using User Defined Functions, Chapter 2: DEFINE Macros, 2.5 Discrete Phase Model (DPM) DEFINE Macros</i>. Avant qu'une UDF basÃ©e sur DMP puisse Ãªtre utilisÃ©e dans une simulation, l'injection d'un ensemble de particules doit Ãªtre dÃ©finie en spÃ©cifiant des <i>Point Properties</i> avec des variables telles que la position de la source, la trajectoire initiale, le dÃ©bit massique, la durÃ©e, la tempÃ©rature, etc., en fonction du type d'injection. Cela peut Ãªtre fait dans l'interface graphique en cliquant sur le panneau <i>Physics--&gt; Discrete Phase</i>, puis en cliquant sur le bouton <i>Injections</i>. Cela ouvrira la boÃ®te de dialogue <i>Injections</i> dans laquelle une ou plusieurs injections peuvent Ãªtre crÃ©Ã©es en cliquant sur le bouton <i>Create</i>. La boÃ®te de dialogue <i>Set Injection Properties</i> contient le menu dÃ©roulant <i>Injection Type</i> avec les quatre premiers types disponibles (<i>single, group, surface, flat-fan-atomizer</i>). Si vous sÃ©lectionnez l'un de ces types, vous pouvez alors sÃ©lectionner l'onglet <i>Point Properties</i> pour saisir les champs de valeurs correspondants. Une autre faÃ§on de spÃ©cifier les <i>Point Properties</i> serait de lire un fichier texte d'injection. Pour ce faire, sÃ©lectionnez <i>File</i> dans le menu dÃ©roulant <i>Injection Type</i>, spÃ©cifiez le nom de l'injection Ã  crÃ©er, puis cliquez sur le bouton <i>File</i> (situÃ© Ã  cÃ´tÃ© du bouton <i>OK</i> en bas de la boÃ®te de dialogue <i>Set Injection Properties</i>). Ici, vous pouvez sÃ©lectionner un fichier d'Ã©chantillon d'injection (avec l'extension .dpm) ou un fichier texte d'injection crÃ©Ã© manuellement. Pour ce faire, dans la boÃ®te de dialogue <i>Select File</i>, sÃ©lectionnez <i>All Files (*)</i>, puis mettez en surbrillance le fichier qui pourrait avoir n'importe quel nom arbitraire mais qui a gÃ©nÃ©ralement une extension .inj; cliquez sur le bouton OK. En supposant qu'il n'y ait aucun problÃ¨me avec le fichier, aucun message d'erreur ou d'avertissement de la console n'apparaÃ®tra dans Fluent. Lorsque vous serez retournÃ© Ã  la boÃ®te de dialogue  <i>Injection</i>, vous devriez voir le mÃªme nom d'injection que celui que vous avez spÃ©cifiÃ© dans la boÃ®te de dialogue <i>Set Injection Properties</i> et pouvoir rÃ©pertorier ses particules et propriÃ©tÃ©s dans la console. Ouvrez ensuite la boÃ®te de dialogue <i>Discrete Phase Model</i> et sÃ©lectionnez <i>Interaction with Continuous Phase</i> qui permettra de mettre Ã  jour les termes sources DPM Ã  chaque itÃ©ration de flux. Ce paramÃ¨tre peut Ãªtre enregistrÃ© dans votre fichier cas ou ajoutÃ© via le fichier de journalisation comme indiquÃ©. Une fois que l'injection est confirmÃ©e comme fonctionnant dans l'interface graphique, les Ã©tapes peuvent Ãªtre automatisÃ©es en ajoutant des commandes au fichier de journalisation aprÃ¨s l'initialisation de la solution, par exemple&#160;:
/define/models/dpm/interaction/coupled-calculations yes
/define/models/dpm/injections/delete-injection injection-0:1
/define/models/dpm/injections/create injection-0:1 no yes file no zinjection01.inj no no no no
/define/models/dpm/injections/list-particles injection-0:1
/define/models/dpm/injections/list-injection-properties injection-0:1
oÃ¹ un format de fichier stable d'injection de base crÃ©Ã© manuellement pourrait ressembler Ã &#160;:
$ cat zinjection01.inj
(z=4 12)
( x y z u v w diamÃ¨tre t dÃ©bit massique frÃ©quence massique temps nom )
(( 2.90e-02 5.00e-03 0.0 -1,00e-03 0,0 0,0 1,00e-04 2,93e+02 1,00e-06 0,0 0,0 0,0 ) injection-0:1 )
notant que les fichiers d'injection pour les simulations DPM sont gÃ©nÃ©ralement configurÃ©s pour un suivi stationnaire ou instable de particules, le format du premier Ã©tant dÃ©crit dans <i>2024R2 Fluent Customization Manual, Part III: Solution Mode | Chapter 24: Modeling Discrete Phase | 24.3. Setting Initial Conditions for the Discrete Phase | 24.3.13 Point Properties for File Injections | 24.3.13.1 Steady File Format</i>.
</p>
<h2><span class="mw-headline" id="Ansys_CFX">Ansys CFX</span></h2>
<h3><span id="Scripts_pour_l.27ordonnanceur_Slurm_2"></span><span class="mw-headline" id="Scripts_pour_l'ordonnanceur_Slurm_2">Scripts pour l'ordonnanceur Slurm</span></h3>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-5-0" name="tabs-5" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-5-1" name="tabs-5" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-5-1" data-tabpos="1">NÅ“ud simple</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-5-2" name="tabs-5" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-5-2" data-tabpos="2">Plusieurs nÅ“uds</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-local.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group+++%23+Specify+account+name%0A%23SBATCH+--time%3D00-03%3A00+++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23SBATCH+--nodes%3D1+++++++++++++%23+Specify+single+compute+node+%28do+not+change%29%0A%23SBATCH+--ntasks-per-node%3D4+++%23+Specify+number+cores+%28maximum+values%3A+graham+32+or+44%2C+cedar+32+or+48%2C+beluga+40%2C+narval+64%29%0A%23SBATCH+--mem%3D16G+++++++++++++%23+Specify+node+memory+%28optionally+set+to+0+to+allocate+all+node+memory%29%0A%23SBATCH+--cpus-per-task%3D1+++++%23+Do+not+change%0A%0Amodule+load+StdEnv%2F2023+++++++%23+Applies+to%3A+beluga%2C+cedar%2C+graham%2C+narval%0Amodule+load+ansys%2F2023R2++++++%23+Specify+2021R1+or+newer+module+versions%0A%0A%23+append+additional+cfx5solve+command+line+options+as+required%0Aif+%5B%5B+%22%24CC_CLUSTER%22+%3D+narval+%5D%5D%3B+then%0A++cfx5solve+-def+YOURFILE.def+-start-method+%22Open+MPI+Local+Parallel%22+-part+%24SLURM_CPUS_ON_NODE%0Aelse%0A++cfx5solve+-def+YOURFILE.def+-start-method+%22Intel+MPI+Local+Parallel%22+-part+%24SLURM_CPUS_ON_NODE%0Afi" />
<input type="hidden" name="filename" value="script-local.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group   # Specify account name</span>
<span class="c1">#SBATCH --time=00-03:00       # Specify time limit dd-hh:mm</span>
<span class="c1">#SBATCH --nodes=1             # Specify single compute node (do not change)</span>
<span class="c1">#SBATCH --ntasks-per-node=4   # Specify number cores (maximum values: graham 32 or 44, cedar 32 or 48, beluga 40, narval 64)</span>
<span class="c1">#SBATCH --mem=16G             # Specify node memory (optionally set to 0 to allocate all node memory)</span>
<span class="c1">#SBATCH --cpus-per-task=1     # Do not change</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023<span class="w">       </span><span class="c1"># Applies to: beluga, cedar, graham, narval</span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">      </span><span class="c1"># Specify 2021R1 or newer module versions</span>

<span class="c1"># append additional cfx5solve command line options as required</span>
<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$CC_CLUSTER</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>narval<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span>cfx5solve<span class="w"> </span>-def<span class="w"> </span>YOURFILE.def<span class="w"> </span>-start-method<span class="w"> </span><span class="s2">&quot;Open MPI Local Parallel&quot;</span><span class="w"> </span>-part<span class="w"> </span><span class="nv">$SLURM_CPUS_ON_NODE</span>
<span class="k">else</span>
<span class="w">  </span>cfx5solve<span class="w"> </span>-def<span class="w"> </span>YOURFILE.def<span class="w"> </span>-start-method<span class="w"> </span><span class="s2">&quot;Intel MPI Local Parallel&quot;</span><span class="w"> </span>-part<span class="w"> </span><span class="nv">$SLURM_CPUS_ON_NODE</span>
<span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-cfx-multiple.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-group+++%23+Specify+account+name%0A%23SBATCH+--time%3D00-03%3A00+++++++%23+Specify+time+limit+dd-hh%3Amm%0A%23SBATCH+--nodes%3D2+++++++++++++%23+Specify+multiple+compute+nodes+%282+or+more%29%0A%23SBATCH+--ntasks-per-node%3D64++%23+Specify+all+cores+per+node+%28graham+32+or+44%2C+cedar+32+or+48%2C+beluga+40%2C+narval+64%29%0A%23SBATCH+--mem%3D0+++++++++++++++%23+Use+all+memory+per+compute+node+%28do+not+change%29%0A%23SBATCH+--cpus-per-task%3D1+++++%23+Do+not+change%0A%0Amodule+load+StdEnv%2F2023+++++++%23+Applies+to%3A+beluga%2C+cedar%2C+graham%2C+narval%0Amodule+load+ansys%2F2023R2++++++%23+Specify+2021R1+or+newer+module+versions%0A%0ANNODES%3D%24%28slurm_hl2hl.py+--format+ANSYS-CFX%29%0A%0A%23+append+additional+cfx5solve+command+line+options+as+required%0Aif+%5B%5B+%22%24CC_CLUSTER%22+%3D+narval+%5D%5D%3B+then%0A++cfx5solve+-def+YOURFILE.def+-start-method+%22Open+MPI+Distributed+Parallel%22+-par-dist+%24NNODES%0Aelse%0A++cfx5solve+-def+YOURFILE.def+-start-method+%22Intel+MPI+Distributed+Parallel%22+-par-dist+%24NNODES%0Afi" />
<input type="hidden" name="filename" value="script-cfx-multiple.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-group   # Specify account name</span>
<span class="c1">#SBATCH --time=00-03:00       # Specify time limit dd-hh:mm</span>
<span class="c1">#SBATCH --nodes=2             # Specify multiple compute nodes (2 or more)</span>
<span class="c1">#SBATCH --ntasks-per-node=64  # Specify all cores per node (graham 32 or 44, cedar 32 or 48, beluga 40, narval 64)</span>
<span class="c1">#SBATCH --mem=0               # Use all memory per compute node (do not change)</span>
<span class="c1">#SBATCH --cpus-per-task=1     # Do not change</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023<span class="w">       </span><span class="c1"># Applies to: beluga, cedar, graham, narval</span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2023R2<span class="w">      </span><span class="c1"># Specify 2021R1 or newer module versions</span>

<span class="nv">NNODES</span><span class="o">=</span><span class="k">$(</span>slurm_hl2hl.py<span class="w"> </span>--format<span class="w"> </span>ANSYS-CFX<span class="k">)</span>

<span class="c1"># append additional cfx5solve command line options as required</span>
<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$CC_CLUSTER</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>narval<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span>cfx5solve<span class="w"> </span>-def<span class="w"> </span>YOURFILE.def<span class="w"> </span>-start-method<span class="w"> </span><span class="s2">&quot;Open MPI Distributed Parallel&quot;</span><span class="w"> </span>-par-dist<span class="w"> </span><span class="nv">$NNODES</span>
<span class="k">else</span>
<span class="w">  </span>cfx5solve<span class="w"> </span>-def<span class="w"> </span>YOURFILE.def<span class="w"> </span>-start-method<span class="w"> </span><span class="s2">&quot;Intel MPI Distributed Parallel&quot;</span><span class="w"> </span>-par-dist<span class="w"> </span><span class="nv">$NNODES</span>
<span class="k">fi</span>
</pre></div>
</div>
</div>
</div></div>
<h2><span class="mw-headline" id="Workbench">Workbench</span></h2>
<p>Initialisez le fichier de projet avant de le soumettre pour la premiÃ¨re fois.<br />
</p>
<ol><li>Connectez-vous Ã  la grappe avec <a href="/wiki/VNC/fr#NÅ“uds_de_calcul" title="VNC/fr">TigerVNC</a>.</li>
<li>Dans le mÃªme rÃ©pertoire oÃ¹ se trouve le fichier de projet (YOURPROJECT.wbpj), <a class="mw-selflink-fragment" href="#Workbench_3">lancez Workbench</a> avec la mÃªme version du module Ansys qui a servi Ã  crÃ©er le projet.</li>
<li>Dans Workbench, ouvrez le projet avec <i>File -&gt; Open</i>.</li>
<li>Dans la fenÃªtre principale, faites un clic droit sur <i>Setup</i> et sÃ©lectionnez <i>Clear All Generated Data</i>.</li>
<li>Dans la liste dÃ©roulante de la barre de menus du haut, cliquez sur <i>File -&gt; Exit</i> pour sortir de Workbench.</li>
<li>Dans la fenÃªtre contextuelle Ansys Workbench qui affiche <i>The current project has been modified. Do you want to save it&#160;?</i> cliquez sur le bouton <i>No</i>.</li>
<li>Quittez Workbench et soumettez la tÃ¢che avec un des scripts ci-dessous.</li></ol>
<p>Pour ne pas Ã©crire la solution quand une tÃ¢che en cours se termine avec succÃ¨s sur une grappe,  enlevez <code>;Save(Overwrite=True)</code> de la derniÃ¨re ligne du script Slurm. Il sera ainsi plus facile d'effectuer plusieurs tÃ¢ches de test (pour une mise Ã  l'Ã©chelle quand vous changez ntasks) puisque la solution initialisÃ©e ne sera pas Ã©crasÃ©e Ã  chaque fois et donc n'aura pas besoin d'Ãªtre rÃ©initialisÃ©e entre les tÃ¢ches. Ou encore, vous pouvez sauvegarder une copie du fichier initialisÃ© YOURPROJECT.wbpj et du sous-rÃ©pertoire YOURPROJECT_files avant que chaque tÃ¢che soit soumise et les restaurer ensuite une fois que la solution est Ã©crite.
</p>
<h3><span id="Scripts_pour_l.27ordonnanceur_Slurm_3"></span><span class="mw-headline" id="Scripts_pour_l'ordonnanceur_Slurm_3">Scripts pour l'ordonnanceur Slurm</span></h3>
<p>Pour soumettre un fichier de projet Ã  la queue, personnaliser les scripts suivants et lancer la commande <code>sbatch script-wbpj.sh</code>.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-6-0" name="tabs-6" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-6-1" name="tabs-6" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-6-1" data-tabpos="1">NÅ“ud simple (StdEnv/2020)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-wbpj-2020.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Ddef-account%0A%23SBATCH+--time%3D00-03%3A00++++++++++++++++%23+Time+%28DD-HH%3AMM%29%0A%23SBATCH+--mem%3D16G++++++++++++++++++++++%23+Total+Memory+%28set+to+0+for+all+node+memory%29%0A%23SBATCH+--ntasks%3D4+++++++++++++++++++++%23+Number+of+cores%0A%23SBATCH+--nodes%3D1++++++++++++++++++++++%23+Do+not+change+%28multi-node+not+supported%29%0A%23%23SBATCH+--exclusive+++++++++++++++++++%23+Uncomment+for+scaling+testing%0A%23%23SBATCH+--constraint%3Dbroadwell++++++++%23+Applicable+to+graham+or+cedar%0A%0Amodule+load+StdEnv%2F2020+ansys%2F2021R2+++%23+OR+newer+Ansys+modules%0A%0Aif+%5B+%22%24SLURM_NNODES%22+%3D%3D+1+%5D%3B+then%0A++MEMPAR%3D0+++++++++++++++++++++++++++++++%23+Set+to+0+for+SMP+%28shared+memory+parallel%29%0Aelse%0A++MEMPAR%3D1+++++++++++++++++++++++++++++++%23+Set+to+1+for+DMP+%28distributed+memory+parallel%29%0Afi%0A%0Arm+-fv+%2A_files%2F.lock%0AMWFILE%3D%7E%2F.mw%2FApplication%5C+Data%2FAnsys%2F%60basename+%24%28find+%24EBROOTANSYS%2Fv%2A+-maxdepth+0+-type+d%29%60%2FSolveHandlers.xml%0Ased+-re+%22s%2F%28.AnsysSolution%3E%2B%29%5Ba-zA-Z0-9%5D%2A%28%3C%5C%2FDistribute.%29%2F%5C1%24MEMPAR%5C2%2F%22+-i+%22%24MWFILE%22%0Ased+-re+%22s%2F%28.Processors%3E%2B%29%5Ba-zA-Z0-9%5D%2A%28%3C%5C%2FMaxNumber.%29%2F%5C1%24SLURM_NTASKS%5C2%2F%22+-i+%22%24MWFILE%22%0Ased+-i+%22s%21UserConfigured%3D%5C%220%5C%22%21UserConfigured%3D%5C%221%5C%22%21g%22+%22%24MWFILE%22%0A%0Aexport+KMP_AFFINITY%3Ddisabled%0Aexport+I_MPI_HYDRA_BOOTSTRAP%3Dssh%0A%0Arunwb2+-B+-E+%22Update%28%29%3BSave%28Overwrite%3DTrue%29%22+-F+YOURPROJECT.wbpj" />
<input type="hidden" name="filename" value="script-wbpj-2020.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=def-account</span>
<span class="c1">#SBATCH --time=00-03:00                # Time (DD-HH:MM)</span>
<span class="c1">#SBATCH --mem=16G                      # Total Memory (set to 0 for all node memory)</span>
<span class="c1">#SBATCH --ntasks=4                     # Number of cores</span>
<span class="c1">#SBATCH --nodes=1                      # Do not change (multi-node not supported)</span>
<span class="c1">##SBATCH --exclusive                   # Uncomment for scaling testing</span>
<span class="c1">##SBATCH --constraint=broadwell        # Applicable to graham or cedar</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2020<span class="w"> </span>ansys/2021R2<span class="w">   </span><span class="c1"># OR newer Ansys modules</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SLURM_NNODES</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="nv">MEMPAR</span><span class="o">=</span><span class="m">0</span><span class="w">                               </span><span class="c1"># Set to 0 for SMP (shared memory parallel)</span>
<span class="k">else</span>
<span class="w">  </span><span class="nv">MEMPAR</span><span class="o">=</span><span class="m">1</span><span class="w">                               </span><span class="c1"># Set to 1 for DMP (distributed memory parallel)</span>
<span class="k">fi</span>

rm<span class="w"> </span>-fv<span class="w"> </span>*_files/.lock
<span class="nv">MWFILE</span><span class="o">=</span>~/.mw/Application<span class="se">\ </span>Data/Ansys/<span class="sb">`</span>basename<span class="w"> </span><span class="k">$(</span>find<span class="w"> </span><span class="nv">$EBROOTANSYS</span>/v*<span class="w"> </span>-maxdepth<span class="w"> </span><span class="m">0</span><span class="w"> </span>-type<span class="w"> </span>d<span class="k">)</span><span class="sb">`</span>/SolveHandlers.xml
sed<span class="w"> </span>-re<span class="w"> </span><span class="s2">&quot;s/(.AnsysSolution&gt;+)[a-zA-Z0-9]*(&lt;\/Distribute.)/\1</span><span class="nv">$MEMPAR</span><span class="s2">\2/&quot;</span><span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MWFILE</span><span class="s2">&quot;</span>
sed<span class="w"> </span>-re<span class="w"> </span><span class="s2">&quot;s/(.Processors&gt;+)[a-zA-Z0-9]*(&lt;\/MaxNumber.)/\1</span><span class="nv">$SLURM_NTASKS</span><span class="s2">\2/&quot;</span><span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MWFILE</span><span class="s2">&quot;</span>
sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s!UserConfigured=\&quot;0\&quot;!UserConfigured=\&quot;1\&quot;!g&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MWFILE</span><span class="s2">&quot;</span>

<span class="nb">export</span><span class="w"> </span><span class="nv">KMP_AFFINITY</span><span class="o">=</span>disabled
<span class="nb">export</span><span class="w"> </span><span class="nv">I_MPI_HYDRA_BOOTSTRAP</span><span class="o">=</span>ssh

runwb2<span class="w"> </span>-B<span class="w"> </span>-E<span class="w"> </span><span class="s2">&quot;Update();Save(Overwrite=True)&quot;</span><span class="w"> </span>-F<span class="w"> </span>YOURPROJECT.wbpj
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<h2><span class="mw-headline" id="Mechanical">Mechanical</span></h2>
<p>Le fichier d'entrÃ©e peut Ãªtre gÃ©nÃ©rÃ© dans votre session interactive Workbench Mechanical en cliquant sur <i>Solution -&gt; Tools -&gt; Write Input Files</i> et en spÃ©cifiant <code>File name:</code> pour YOURAPDLFILE.inp et <code>Save as type:</code> pour les fichiers APDL en entrÃ©e (*.inp).  Les tÃ¢ches APDL peuvent ensuite Ãªtre soumises Ã  la queue avec la commande <code>sbatch script-name.sh</code>.
</p>
<h3><span id="Scripts_pour_l.27ordonnanceur_Slurm_4"></span><span class="mw-headline" id="Scripts_pour_l'ordonnanceur_Slurm_4">Scripts pour l'ordonnanceur Slurm</span></h3>
<p>Les modules Ansys dans les scripts suivants ont Ã©tÃ© testÃ©s sur Graham et devraient fonctionner sans problÃ¨me (supprimez les marques de commentaire).  S'il y a lieu, ils seront mis Ã  jour une fois qu'ils auront Ã©tÃ© testÃ©s sur d'autres grappes.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-7-0" name="tabs-7" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-7-1" name="tabs-7" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-7-1" data-tabpos="1">NÅ“ud simple (StdEnv/2020)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-7-2" name="tabs-7" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-7-2" data-tabpos="2">Script pour plusieurs nÅ“uds (StdEnv/2020)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-smp-2020.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%23SBATCH+--account%3Ddef-account++%23+Specify+your+account%0A%23SBATCH+--time%3D00-03%3A00++++++++%23+Specify+time+%28DD-HH%3AMM%29%0A%23SBATCH+--mem%3D16G++++++++++++++%23+Specify+memory+for+all+cores%0A%23SBATCH+--ntasks%3D8+++++++++++++%23+Specify+number+of+cores+%281+or+more%29%0A%23SBATCH+--nodes%3D1++++++++++++++%23+Specify+one+node+%28do+not+change%29%0A%0Aunset+SLURM_GTIDS%0A%0Amodule+load+StdEnv%2F2020%0A%0A%23module+load+ansys%2F2021R2%0A%23module+load+ansys%2F2022R1%0Amodule+load+ansys%2F2022R2%0A%0Amapdl+-smp+-b+nolist+-np+%24SLURM_NTASKS+-dir+%24SLURM_TMPDIR+-I+YOURAPDLFILE.inp%0A%0Arm+-rf+results-%2A%0Amkdir+results-%24SLURM_JOB_ID%0Acp+-a+--no-preserve%3Downership+%24SLURM_TMPDIR%2F%2A+results-%24SLURM_JOB_ID" />
<input type="hidden" name="filename" value="script-smp-2020.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --account=def-account  # Specify your account</span>
<span class="c1">#SBATCH --time=00-03:00        # Specify time (DD-HH:MM)</span>
<span class="c1">#SBATCH --mem=16G              # Specify memory for all cores</span>
<span class="c1">#SBATCH --ntasks=8             # Specify number of cores (1 or more)</span>
<span class="c1">#SBATCH --nodes=1              # Specify one node (do not change)</span>

<span class="nb">unset</span><span class="w"> </span>SLURM_GTIDS

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2020

<span class="c1">#module load ansys/2021R2</span>
<span class="c1">#module load ansys/2022R1</span>
module<span class="w"> </span>load<span class="w"> </span>ansys/2022R2

mapdl<span class="w"> </span>-smp<span class="w"> </span>-b<span class="w"> </span>nolist<span class="w"> </span>-np<span class="w"> </span><span class="nv">$SLURM_NTASKS</span><span class="w"> </span>-dir<span class="w"> </span><span class="nv">$SLURM_TMPDIR</span><span class="w"> </span>-I<span class="w"> </span>YOURAPDLFILE.inp

rm<span class="w"> </span>-rf<span class="w"> </span>results-*
mkdir<span class="w"> </span>results-<span class="nv">$SLURM_JOB_ID</span>
cp<span class="w"> </span>-a<span class="w"> </span>--no-preserve<span class="o">=</span>ownership<span class="w"> </span><span class="nv">$SLURM_TMPDIR</span>/*<span class="w"> </span>results-<span class="nv">$SLURM_JOB_ID</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-dis-2020.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%23SBATCH+--account%3Ddef-account++%23+Specify+your+account%0A%23SBATCH+--time%3D00-03%3A00++++++++%23+Specify+time+%28DD-HH%3AMM%29%0A%23SBATCH+--mem-per-cpu%3D2G+++++++%23+Specify+memory+per+core%0A%23SBATCH+--ntasks%3D8+++++++++++++%23+Specify+number+of+cores+%282+or+more%29%0A%23%23SBATCH+--nodes%3D2+++++++++++++%23+Specify+number+of+nodes+%28optional%29%0A%23%23SBATCH+--ntasks-per-node%3D4+++%23+Specify+cores+per+node+%28optional%29%0A%0Aunset+SLURM_GTIDS%0A%0Amodule+load+StdEnv%2F2020%0A%0Amodule+load+ansys%2F2022R2%0A%0Amapdl+-dis+-mpi+openmpi+-b+nolist+-np+%24SLURM_NTASKS+-dir+%24SLURM_TMPDIR+-I+YOURAPDLFILE.inp%0A%0Arm+-rf+results-%2A%0Amkdir+results-%24SLURM_JOB_ID%0Acp+-a+--no-preserve%3Downership+%24SLURM_TMPDIR%2F%2A+results-%24SLURM_JOB_ID" />
<input type="hidden" name="filename" value="script-dis-2020.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --account=def-account  # Specify your account</span>
<span class="c1">#SBATCH --time=00-03:00        # Specify time (DD-HH:MM)</span>
<span class="c1">#SBATCH --mem-per-cpu=2G       # Specify memory per core</span>
<span class="c1">#SBATCH --ntasks=8             # Specify number of cores (2 or more)</span>
<span class="c1">##SBATCH --nodes=2             # Specify number of nodes (optional)</span>
<span class="c1">##SBATCH --ntasks-per-node=4   # Specify cores per node (optional)</span>

<span class="nb">unset</span><span class="w"> </span>SLURM_GTIDS

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2020

module<span class="w"> </span>load<span class="w"> </span>ansys/2022R2

mapdl<span class="w"> </span>-dis<span class="w"> </span>-mpi<span class="w"> </span>openmpi<span class="w"> </span>-b<span class="w"> </span>nolist<span class="w"> </span>-np<span class="w"> </span><span class="nv">$SLURM_NTASKS</span><span class="w"> </span>-dir<span class="w"> </span><span class="nv">$SLURM_TMPDIR</span><span class="w"> </span>-I<span class="w"> </span>YOURAPDLFILE.inp

rm<span class="w"> </span>-rf<span class="w"> </span>results-*
mkdir<span class="w"> </span>results-<span class="nv">$SLURM_JOB_ID</span>
cp<span class="w"> </span>-a<span class="w"> </span>--no-preserve<span class="o">=</span>ownership<span class="w"> </span><span class="nv">$SLURM_TMPDIR</span>/*<span class="w"> </span>results-<span class="nv">$SLURM_JOB_ID</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<p>Par dÃ©faut, Ansys alloue aux tÃ¢ches APDL 1024Mo de mÃ©moire totale et 1024Mo de mÃ©moire pour les bases de donnÃ©es. Ces valeurs peuvent Ãªtre dÃ©finies manuellement (ou modifiÃ©es) avec l'ajout des arguments <code>-m 1024</code> et/ou <code>-db 1024</code> sur la derniÃ¨re ligne de commande mapdl des scripts ci-dessus. Si vous utilisez Ã  distance un serveur de licence de votre Ã©tablissement qui a plusieurs licences Ansys, il pourrait Ãªtre nÃ©cessaire d'ajouter des arguments comme <code>-p aa_r</code> ou <code>-ppf anshpc</code>, selon le module que vous utilisez. Comme d'habitude, effectuez des tests dÃ©taillÃ©s de mise Ã  l'Ã©chelle avant de lancer des tÃ¢ches en production pour vous assurer que vous utilisez le nombre optimal de cÅ“urs et la bonne quantitÃ© minimale de mÃ©moire. Les scripts pour nÅ“ud simple avec mÃ©moire parallÃ¨le partagÃ©e (SMP pour <i>Shared Memory Parallel</i>) offriront une meilleure performance que les scripts pour plusieurs nÅ“uds avec mÃ©moire parallÃ¨le distribuÃ©e (DMP pour <i>Distributed Memory Parallel</i>) et devraient Ãªtre utilisÃ©s autant que possible.  Pour prÃ©venir les problÃ¨mes de compatibilitÃ©, le module qui est chargÃ© dans votre script devrait idÃ©alement correspondre Ã  la version employÃ©e pour gÃ©nÃ©rer le fichier en entrÃ©e.
</p>
<pre> [gra-login2:~/ansys/mechanical/demo] cat YOURAPDLFILE.inp | grep version
! ANSYS input file written by Workbench version 2019 R3
</pre>
<h2><span class="mw-headline" id="Ansys_EDT">Ansys EDT</span></h2>
<p>Ansys EDT peut Ãªtre exÃ©cutÃ© de maniÃ¨re interactive en mode <i>batch</i> (sans interface graphique) en dÃ©marrant d'abord une session salloc avec les options <code>salloc --time=3:00:00 --tasks=8 --mem=16G --account=def- compte</code>; copiez-collez ensuite la commande <code>ansysedt</code> complÃ¨te donnÃ©e Ã  la derniÃ¨re ligne de <i>script-local-cmd.sh</i> en vous assurant de spÃ©cifier manuellement $YOUR_AEDT_FILE.
</p>
<h3><span id="Scripts_pour_l.27ordonnanceur_Slurm_5"></span><span class="mw-headline" id="Scripts_pour_l'ordonnanceur_Slurm_5">Scripts pour l'ordonnanceur Slurm</span></h3>
<p>Les tÃ¢ches Ansys Electronic Desktop peuvent Ãªtre soumises Ã  la file d'attente d'une grappe avec la commande <code>sbatch script-name.sh</code> en utilisant l'un des scripts Slurm pour nÅ“ud simple ci-dessous. En date de janvier 2023, ces scripts n'ont Ã©tÃ© testÃ©s que sur Graham et pourraient donc Ãªtre mis Ã  jour Ã  l'avenir si nÃ©cessaire pour fonctionner avec d'autres grappes. Avant de les utiliser, spÃ©cifiez le temps de simulation, la mÃ©moire, le nombre de cÅ“urs et remplacez YOUR_AEDT_FILE par le nom de votre fichier d'entrÃ©e. Une liste complÃ¨te des options de ligne de commande ansysedt peut Ãªtre obtenue en dÃ©marrant Ansys EDT en <a class="mw-selflink-fragment" href="#Mode_graphique">mode graphique</a> avec les commandes <code>ansysedt -help</code> ou <code>ansysedt -Batchoptionhelp</code> pour obtenir des fenÃªtres contextuelles graphiques dÃ©roulantes.  
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-8-0" name="tabs-8" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-8-1" name="tabs-8" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-8-1" data-tabpos="1">NÅ“ud simple (ligne de commande)</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-8-2" name="tabs-8" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-8-2" data-tabpos="2">NÅ“ud simple (fichier d&amp;#039;options)</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-local-cmd.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Daccount++++++%23+Specify+your+account+%28def+or+rrg%29%0A%23SBATCH+--time%3D00-01%3A00++++++++%23+Specify+time+%28DD-HH%3AMM%29%0A%23SBATCH+--mem%3D16G++++++++++++++%23+Specify+memory+%28set+to+0+to+use+all+compute+node+memory%29%0A%23SBATCH+--ntasks%3D8+++++++++++++%23+Specify+cores+%28beluga+40%2C+cedar+32+or+48%2C+graham+32+or+44%2C+narval+64%29%0A%23SBATCH+--nodes%3D1++++++++++++++%23+Request+one+node+%28Do+Not+Change%29%0A%0Amodule+load+StdEnv%2F2020%0Amodule+load+ansysedt%2F2021R2%0A%0A%23+Uncomment+next+line+to+run+a+test+example%3A%0Acp+-f+%24EBROOTANSYSEDT%2FAnsysEM21.2%2FLinux64%2FExamples%2FHFSS%2FAntennas%2FTransientGeoRadar.aedt+.%0A%0A%23+Specify+input+file+such+as%3A%0AYOUR_AEDT_FILE%3D%22TransientGeoRadar.aedt%22%0A%0A%23+Remove+previous+output%3A%0Arm+-rf+%24YOUR_AEDT_FILE.%2A+%24%7BYOUR_AEDT_FILE%7Dresults%0A%0A%23+----+do+not+change+anything+below+this+line+----+%23%0A%0Aecho+-e+%22%5CnANSYSLI_SERVERS%3D+%24ANSYSLI_SERVERS%22%0Aecho+%22ANSYSLMD_LICENSE_FILE%3D+%24ANSYSLMD_LICENSE_FILE%22%0Aecho+-e+%22SLURM_TMPDIR%3D+%24SLURM_TMPDIR+on+%24SLURMD_NODENAME%5Cn%22%0A%0Aexport+KMP_AFFINITY%3Ddisabled%0Aansysedt+-monitor+-UseElectronicsPPE+-ng+-distributed+-machinelist+list%3Dlocalhost%3A1%3A%24SLURM_NTASKS+%5C%0A-batchoptions+%22TempDirectory%3D%24SLURM_TMPDIR+HPCLicenseType%3Dpool+HFSS%2FEnableGPU%3D0%22+-batchsolve+%22%24YOUR_AEDT_FILE%22" />
<input type="hidden" name="filename" value="script-local-cmd.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=account      # Specify your account (def or rrg)</span>
<span class="c1">#SBATCH --time=00-01:00        # Specify time (DD-HH:MM)</span>
<span class="c1">#SBATCH --mem=16G              # Specify memory (set to 0 to use all compute node memory)</span>
<span class="c1">#SBATCH --ntasks=8             # Specify cores (beluga 40, cedar 32 or 48, graham 32 or 44, narval 64)</span>
<span class="c1">#SBATCH --nodes=1              # Request one node (Do Not Change)</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2020
module<span class="w"> </span>load<span class="w"> </span>ansysedt/2021R2

<span class="c1"># Uncomment next line to run a test example:</span>
cp<span class="w"> </span>-f<span class="w"> </span><span class="nv">$EBROOTANSYSEDT</span>/AnsysEM21.2/Linux64/Examples/HFSS/Antennas/TransientGeoRadar.aedt<span class="w"> </span>.

<span class="c1"># Specify input file such as:</span>
<span class="nv">YOUR_AEDT_FILE</span><span class="o">=</span><span class="s2">&quot;TransientGeoRadar.aedt&quot;</span>

<span class="c1"># Remove previous output:</span>
rm<span class="w"> </span>-rf<span class="w"> </span><span class="nv">$YOUR_AEDT_FILE</span>.*<span class="w"> </span><span class="si">${</span><span class="nv">YOUR_AEDT_FILE</span><span class="si">}</span>results

<span class="c1"># ---- do not change anything below this line ---- #</span>

<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\nANSYSLI_SERVERS= </span><span class="nv">$ANSYSLI_SERVERS</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;ANSYSLMD_LICENSE_FILE= </span><span class="nv">$ANSYSLMD_LICENSE_FILE</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;SLURM_TMPDIR= </span><span class="nv">$SLURM_TMPDIR</span><span class="s2"> on </span><span class="nv">$SLURMD_NODENAME</span><span class="s2">\n&quot;</span>

<span class="nb">export</span><span class="w"> </span><span class="nv">KMP_AFFINITY</span><span class="o">=</span>disabled
ansysedt<span class="w"> </span>-monitor<span class="w"> </span>-UseElectronicsPPE<span class="w"> </span>-ng<span class="w"> </span>-distributed<span class="w"> </span>-machinelist<span class="w"> </span><span class="nv">list</span><span class="o">=</span>localhost:1:<span class="nv">$SLURM_NTASKS</span><span class="w"> </span><span class="se">\</span>
-batchoptions<span class="w"> </span><span class="s2">&quot;TempDirectory=</span><span class="nv">$SLURM_TMPDIR</span><span class="s2"> HPCLicenseType=pool HFSS/EnableGPU=0&quot;</span><span class="w"> </span>-batchsolve<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$YOUR_AEDT_FILE</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-local-opt.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Daccount++++++%23+Specify+your+account+%28def+or+rrg%29%0A%23SBATCH+--time%3D00-01%3A00++++++++%23+Specify+time+%28DD-HH%3AMM%29%0A%23SBATCH+--mem%3D16G++++++++++++++%23+Specify+memory+%28set+to+0+to+allocate+all+compute+node+memory%29%0A%23SBATCH+--ntasks%3D8+++++++++++++%23+Specify+cores+%28beluga+40%2C+cedar+32+or+48%2C+graham+32+or+44%2C+narval+64%29%0A%23SBATCH+--nodes%3D1++++++++++++++%23+Request+one+node+%28Do+Not+Change%29%0A%0Amodule+load+StdEnv%2F2020%0Amodule+load+ansysedt%2F2021R2%0A%0A%23+Uncomment+next+line+to+run+a+test+example%3A%0Acp+-f+%24EBROOTANSYSEDT%2FAnsysEM21.2%2FLinux64%2FExamples%2FHFSS%2FAntennas%2FTransientGeoRadar.aedt+.%0A%0A%23+indiquer+un+fichier+en+entr%C3%A9e+comme%0AYOUR_AEDT_FILE%3D%22TransientGeoRadar.aedt%22%0A%0A%23+Remove+previous+output%3A%0Arm+-rf+%24YOUR_AEDT_FILE.%2A+%24%7BYOUR_AEDT_FILE%7Dresults%0A%0A%23+Specify+options+filename%3A%0AOPTIONS_TXT%3D%22Options.txt%22%0A%0A%23+Write+sample+options+file%0Arm+-f+%24OPTIONS_TXT%0Acat+%3E+%24OPTIONS_TXT+%3C%3CEOF%0A%5C%24begin+%27Config%27%0A%27TempDirectory%27%3D%27%24SLURM_TMPDIR%27%0A%27HPCLicenseType%27%3D%27pool%27%0A%27HFSS%2FEnableGPU%27%3D0%0A%5C%24end+%27Config%27%0AEOF%0A%0A%23+----+do+not+change+anything+below+this+line+----+%23%0A%0Aecho+-e+%22%5CnANSYSLI_SERVERS%3D+%24ANSYSLI_SERVERS%22%0Aecho+%22ANSYSLMD_LICENSE_FILE%3D+%24ANSYSLMD_LICENSE_FILE%22%0Aecho+-e+%22SLURM_TMPDIR%3D+%24SLURM_TMPDIR+on+%24SLURMD_NODENAME%5Cn%22%0A%0Aexport+KMP_AFFINITY%3Ddisabled%0Aansysedt+-monitor+-UseElectronicsPPE+-ng+-distributed+-machinelist+list%3Dlocalhost%3A1%3A%24SLURM_NTASKS+%5C%0A-batchoptions+%24OPTIONS_TXT+-batchsolve+%22%24YOUR_AEDT_FILE%22" />
<input type="hidden" name="filename" value="script-local-opt.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=account      # Specify your account (def or rrg)</span>
<span class="c1">#SBATCH --time=00-01:00        # Specify time (DD-HH:MM)</span>
<span class="c1">#SBATCH --mem=16G              # Specify memory (set to 0 to allocate all compute node memory)</span>
<span class="c1">#SBATCH --ntasks=8             # Specify cores (beluga 40, cedar 32 or 48, graham 32 or 44, narval 64)</span>
<span class="c1">#SBATCH --nodes=1              # Request one node (Do Not Change)</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2020
module<span class="w"> </span>load<span class="w"> </span>ansysedt/2021R2

<span class="c1"># Uncomment next line to run a test example:</span>
cp<span class="w"> </span>-f<span class="w"> </span><span class="nv">$EBROOTANSYSEDT</span>/AnsysEM21.2/Linux64/Examples/HFSS/Antennas/TransientGeoRadar.aedt<span class="w"> </span>.

<span class="c1"># indiquer un fichier en entrÃ©e comme</span>
<span class="nv">YOUR_AEDT_FILE</span><span class="o">=</span><span class="s2">&quot;TransientGeoRadar.aedt&quot;</span>

<span class="c1"># Remove previous output:</span>
rm<span class="w"> </span>-rf<span class="w"> </span><span class="nv">$YOUR_AEDT_FILE</span>.*<span class="w"> </span><span class="si">${</span><span class="nv">YOUR_AEDT_FILE</span><span class="si">}</span>results

<span class="c1"># Specify options filename:</span>
<span class="nv">OPTIONS_TXT</span><span class="o">=</span><span class="s2">&quot;Options.txt&quot;</span>

<span class="c1"># Write sample options file</span>
rm<span class="w"> </span>-f<span class="w"> </span><span class="nv">$OPTIONS_TXT</span>
cat<span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$OPTIONS_TXT</span><span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">\$begin &#39;Config&#39;</span>
<span class="s">&#39;TempDirectory&#39;=&#39;$SLURM_TMPDIR&#39;</span>
<span class="s">&#39;HPCLicenseType&#39;=&#39;pool&#39;</span>
<span class="s">&#39;HFSS/EnableGPU&#39;=0</span>
<span class="s">\$end &#39;Config&#39;</span>
<span class="s">EOF</span>

<span class="c1"># ---- do not change anything below this line ---- #</span>

<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\nANSYSLI_SERVERS= </span><span class="nv">$ANSYSLI_SERVERS</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;ANSYSLMD_LICENSE_FILE= </span><span class="nv">$ANSYSLMD_LICENSE_FILE</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;SLURM_TMPDIR= </span><span class="nv">$SLURM_TMPDIR</span><span class="s2"> on </span><span class="nv">$SLURMD_NODENAME</span><span class="s2">\n&quot;</span>

<span class="nb">export</span><span class="w"> </span><span class="nv">KMP_AFFINITY</span><span class="o">=</span>disabled
ansysedt<span class="w"> </span>-monitor<span class="w"> </span>-UseElectronicsPPE<span class="w"> </span>-ng<span class="w"> </span>-distributed<span class="w"> </span>-machinelist<span class="w"> </span><span class="nv">list</span><span class="o">=</span>localhost:1:<span class="nv">$SLURM_NTASKS</span><span class="w"> </span><span class="se">\</span>
-batchoptions<span class="w"> </span><span class="nv">$OPTIONS_TXT</span><span class="w"> </span>-batchsolve<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$YOUR_AEDT_FILE</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<h2><span class="mw-headline" id="Ansys_ROCKY">Ansys ROCKY</span></h2>
<p>En plus de pouvoir exÃ©cuter des simulations en mode graphique (comme indiquÃ© dans la section <i>Mode graphique</i> ci-dessous), <a rel="nofollow" class="external text" href="https://www.ansys.com/products/fluids/ansys-rocky">Ansys Rocky</a> peut Ã©galement exÃ©cuter des simulations en mode non graphique. Les deux modes prennent en charge l'exÃ©cution de Rocky avec des processeurs uniquement ou avec des processeurs et <a rel="nofollow" class="external text" href="https://www.ansys.com/blog/mastering-multi-gpu-ansys-rocky-software-enhancing-its-performance">des GPU</a>. Dans la section ci-dessous, deux exemples de scripts sont fournis oÃ¹ chacun serait soumis Ã  la file d'attente de Graham avec la commande habituelle <code>sbatch</code>. Au moment de la rÃ©daction de cet article, aucun des deux scripts n'a Ã©tÃ© testÃ© et des modifications seraient probablement nÃ©cessaires. Il est important de noter que ces scripts ne sont utilisables que sur Graham puisque le module Rocky qu'ils chargent tous les deux n'est (pour le moment) installÃ© que sur Graham localement.
</p>
<h3><span id="Scripts_pour_l.27ordonnanceur_Slurm_6"></span><span class="mw-headline" id="Scripts_pour_l'ordonnanceur_Slurm_6">Scripts pour l'ordonnanceur Slurm</span></h3>
<p>Pour obtenir une liste complÃ¨te des options de ligne de commande, exÃ©cutez <code>Rocky -h</code> sur la ligne de commande aprÃ¨s avoir chargÃ© un module Rocky (seul rocky/2023R2 est prÃ©sentement disponible sur Graham). En ce qui concerne l'utilisation de Rocky avec des GPU pour rÃ©soudre des problÃ¨mes couplÃ©s, le nombre de CPU que vous devez demander (sur le mÃªme nÅ“ud) doit Ãªtre augmentÃ© au maximum jusqu'Ã  ce que la limite de scalabilitÃ© de l'application couplÃ©e soit atteinte. D'autre part, si Rocky est exÃ©cutÃ© avec des GPU pour rÃ©soudre des problÃ¨mes dÃ©couplÃ©s autonomes, seul un nombre minimal de CPU doit Ãªtre demandÃ©, ce qui permettra Ã  Rocky de fonctionner de maniÃ¨re optimale; par exemple, seuls 2 ou Ã©ventuellement 3 CPU peuvent Ãªtre nÃ©cessaires. Enfin, lorsque Rocky est exÃ©cutÃ© avec plus de 4 CPU, des licences <i>rocky_hpc</i> seront nÃ©cessaires, ce que fournit la licence SHARCNET.
</p>
<div class="tabs tabs-tabbox"><input type="radio" form="tabs-inputform" id="tabs-input-9-0" name="tabs-9" class="tabs-input tabs-input-0" checked="" /><input type="radio" form="tabs-inputform" id="tabs-input-9-1" name="tabs-9" class="tabs-input tabs-input-1" /><label class="tabs-label" for="tabs-input-9-1" data-tabpos="1">CPU seulement</label><wbr /><input type="radio" form="tabs-inputform" id="tabs-input-9-2" name="tabs-9" class="tabs-input tabs-input-2" /><label class="tabs-label" for="tabs-input-9-2" data-tabpos="2">GPU based</label><wbr /><div class="tabs-container" style="">
<div class="tabs-content tabs-content-1">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-rocky-cpu.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Daccount++++++%23+Specify+your+account+%28def+or+rrg%29%0A%23SBATCH+--time%3D00-02%3A00++++++++%23+Specify+time+%28DD-HH%3AMM%29%0A%23SBATCH+--mem%3D24G++++++++++++++%23+Specify+memory+%28set+to+0+to+use+all+node+memory%29%0A%23SBATCH+--cpus-per-task%3D6++++++%23+Specify+cores+%28graham+32+or+44+to+use+all+cores%29%0A%23SBATCH+--nodes%3D1++++++++++++++%23+Request+one+node+%28do+not+change%29%0A%0Amodule+load+StdEnv%2F2023%0Amodule+load+rocky%2F2023R2+ansys%2F2023R2+++%23+only+available+on+graham+%28do+not+change%29+++%0A%0ARocky+--simulate+%E2%80%9Cmysim.rocky%E2%80%9D+--resume%3D0+--ncpus%3D%24SLURM_CPUS_PER_TASK+--use-gpu%3D0" />
<input type="hidden" name="filename" value="script-rocky-cpu.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=account      # Specify your account (def or rrg)</span>
<span class="c1">#SBATCH --time=00-02:00        # Specify time (DD-HH:MM)</span>
<span class="c1">#SBATCH --mem=24G              # Specify memory (set to 0 to use all node memory)</span>
<span class="c1">#SBATCH --cpus-per-task=6      # Specify cores (graham 32 or 44 to use all cores)</span>
<span class="c1">#SBATCH --nodes=1              # Request one node (do not change)</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023
module<span class="w"> </span>load<span class="w"> </span>rocky/2023R2<span class="w"> </span>ansys/2023R2<span class="w">   </span><span class="c1"># only available on graham (do not change)   </span>

Rocky<span class="w"> </span>--simulate<span class="w"> </span>â€œmysim.rockyâ€<span class="w"> </span>--resume<span class="o">=</span><span class="m">0</span><span class="w"> </span>--ncpus<span class="o">=</span><span class="nv">$SLURM_CPUS_PER_TASK</span><span class="w"> </span>--use-gpu<span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
<p><br />
</p>
</div>
<div class="tabs-content tabs-content-2">
<div class="code-file">
<div class="filename"><b>File&#160;:</b> script-rocky-gpu.sh</div>
<div class="download_form">
<p class="mw-empty-elt"></p><form action="/mediawiki/resources/assets/download.php" method="post">
<input type="hidden" name="text" value="%23%21%2Fbin%2Fbash%0A%0A%23SBATCH+--account%3Daccount++++++%23+Specify+your+account+%28def+or+reg%29%0A%23SBATCH+--time%3D00-01%3A00++++++++%23+Specify+time+%28DD-HH%3AMM%29%0A%23SBATCH+--mem%3D24G++++++++++++++%23+Specify+memory+%28set+to+0+to+use+all+node+memory%29%0A%23SBATCH+--cpus-per-task%3D6++++++%23+Specify+cores+%28graham+32+or+44+to+use+all+cores%29%0A%23SBATCH+--gres%3Dgpu%3Av100%3A2++++++%23+Specify+gpu+type+%3A+gpu+quantity%0A%23SBATCH+--nodes%3D1++++++++++++++%23+Request+one+node+%28do+not+change%29%0A%0Amodule+load+StdEnv%2F2023%0Amodule+load+rocky%2F2023R2+ansys%2F2023R2+++%23+only+available+on+graham+%28do+not+change%29%0A%0ARocky+--simulate+%E2%80%9Cmysim.rocky%E2%80%9D+--resume%3D0+--ncpus%3D%24SLURM_CPUS_PER_TASK+--use-gpu%3D1+--gpu-num%3D%24SLURM_GPUS_ON_NODE" />
<input type="hidden" name="filename" value="script-rocky-gpu.sh" />
<input type="submit" value="" name="submit" class="download_submit" />
</form>
<p class="mw-empty-elt"></p>
</div>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --account=account      # Specify your account (def or reg)</span>
<span class="c1">#SBATCH --time=00-01:00        # Specify time (DD-HH:MM)</span>
<span class="c1">#SBATCH --mem=24G              # Specify memory (set to 0 to use all node memory)</span>
<span class="c1">#SBATCH --cpus-per-task=6      # Specify cores (graham 32 or 44 to use all cores)</span>
<span class="c1">#SBATCH --gres=gpu:v100:2      # Specify gpu type&#160;: gpu quantity</span>
<span class="c1">#SBATCH --nodes=1              # Request one node (do not change)</span>

module<span class="w"> </span>load<span class="w"> </span>StdEnv/2023
module<span class="w"> </span>load<span class="w"> </span>rocky/2023R2<span class="w"> </span>ansys/2023R2<span class="w">   </span><span class="c1"># only available on graham (do not change)</span>

Rocky<span class="w"> </span>--simulate<span class="w"> </span>â€œmysim.rockyâ€<span class="w"> </span>--resume<span class="o">=</span><span class="m">0</span><span class="w"> </span>--ncpus<span class="o">=</span><span class="nv">$SLURM_CPUS_PER_TASK</span><span class="w"> </span>--use-gpu<span class="o">=</span><span class="m">1</span><span class="w"> </span>--gpu-num<span class="o">=</span><span class="nv">$SLURM_GPUS_ON_NODE</span>
</pre></div>
</div>
<p><br />
</p>
</div>
</div></div>
<h1><span class="mw-headline" id="Mode_graphique">Mode graphique</span></h1>
<p>Les programmes Ansys fonctionnent interactivement en mode graphique sur les nÅ“uds de calcul des grappes ou sur les nÅ“uds VDI de Graham.
</p>
<h2><span id="N.C5.93uds_de_calcul"></span><span class="mw-headline" id="NÅ“uds_de_calcul">NÅ“uds de calcul</span></h2>
<p>Ansys peut Ãªtre exÃ©cutÃ© interactivement sur un nÅ“ud de calcul simple pour une durÃ©e pouvant aller jusqu'Ã  24 heures. C'est l'approche idÃ©ale pour tester des simulations intensives puisque tous les cÅ“urs et la mÃ©moire peuvent Ãªtre demandÃ©s avec salloc comme dÃ©crit dans <a href="/wiki/VNC/fr#NÅ“uds_de_calcul" title="VNC/fr">TigerVNC</a>. Une fois la connexion faite avec vncviewer, toutes les versions suivantes peuvent Ãªtre lancÃ©es aprÃ¨s que les modules requis ont Ã©tÃ© chargÃ©s.
</p>
<h3><span class="mw-headline" id="Fluids">Fluids</span></h3>
<dl><dd><dl><dd><dl><dd><code>module load StdEnv/2020</code></dd>
<dd><code>module load ansys/2021R1</code> (ou versions plus rÃ©centes)</dd>
<dd><code>fluent -mpi=intel</code>, ou</dd>
<dd><code>QTWEBENGINE_DISABLE_SANDBOX=1 cfx5</code></dd></dl></dd></dl></dd></dl>
<h3><span class="mw-headline" id="Mapdl">Mapdl</span></h3>
<dl><dd><dl><dd><dl><dd><code>module load StdEnv/2020</code></dd>
<dd><code>module load ansys/2021R2</code> (ou versions plus rÃ©centes)</dd>
<dd><code>mapdl -g</code>, ou via le dÃ©marreur,</dd>
<dd><code>launcher</code> --&gt; cliquer sur le bouton RUN</dd></dl></dd></dl></dd></dl>
<h3><span class="mw-headline" id="Workbench_2">Workbench</span></h3>
<dl><dd><dl><dd><dl><dd><code>module load StdEnv/2020</code></dd>
<dd><code>module load ansys/2021R2</code> (ou versions plus rÃ©centes)</dd>
<dd><code>xfwm4 --replace &amp;</code> (nÃ©cessaire seulement si vous utilisez Ansys Mechanical)</dd>
<dd><code>export QTWEBENGINE_DISABLE_SANDBOX=1</code> (nÃ©cessaire seulement si vous utilisez CFD-Post)</dd>
<dd><code>runwb2</code></dd>
<dd><br /></dd>
<dd>Remarques&#160;: Quand vous exÃ©cutez en parallÃ¨le un programme d'analyse comme  Mechanical or Fluent sur un nÅ“ud simple, ne cochez pas la case <i>Distributed</i> et indiquez un nombre de cÅ“urs Ã©gal Ã  votre  <b>session salloc, moins 1</b>. Les menus dÃ©roulants du Ansys Mechanical Workbench ne rÃ©pondent pas correctement. Comme solution, lancez <code>xfwm4 --replace</code> sur la ligne de commande avant de dÃ©marrer Workbench. Pour avoir xfwm4 par dÃ©faut, modifiez <code>$HOME/.vnc/xstartup</code> et remplacez <code>mate-session</code> par <code>xfce4-session</code>. Enfin, Fluent dans ansys/2022R2 ne fonctionne pas en ce moment sur les nÅ“uds de calcul; utilisez une autre version.</dd></dl></dd></dl></dd></dl>
<h3><span class="mw-headline" id="Ansys_EDT_2">Ansys EDT</span></h3>
<dl><dd><dl><dd><dl><dd>Lancez une session interactive avec le format suivant de la commande salloc (pour spÃ©cifier les cÅ“urs et la mÃ©moire disponible)&#160;:</dd>
<dd><code>salloc --time=3:00:00 --nodes=1 --cores=8 --mem=16G --account=def-group</code></dd>
<dd><code>xfwm4 --replace &amp;</code> (appuyez deux fois sur Enter)</dd>
<dd><code>module load StdEnv/2020 ansysedt/2021R2</code>, ou</dd>
<dd><code>module load StdEnv/2020 ansysedt/2023R2</code>, ou</dd>
<dd><code>module load StdEnv/2023 ansysedt/2023R2</code> ou plus rÃ©cente</dd>
<dd><code>ansysedt</code></dd>
<dd>o Cliquez sur <code>Tools -&gt; Options -&gt; HPC and Analysis Options -&gt; Edit</code>, puis
<dl><dd>1) supprimez la coche de la case Use Automatic Settings (nÃ©cessaire une fois seulement)</dd>
<dd>2) sous l'onglet Machines, ne modifiez pas Cores (dÃ©tectÃ© automatiquement Ã  partir de Slurm)</dd></dl></dd>
<dd>o Pour exÃ©cuter l'analyse interactive, cliquez sur  <code>Project -&gt; Analyze All</code></dd></dl></dd></dl></dd></dl>
<h3><span class="mw-headline" id="Ensight">Ensight</span></h3>
<dl><dd><dl><dd><dl><dd><code>module load StdEnv/2020 ansys/2022R2; A=222; B=5.12.6</code>, ou</dd>
<dd><code>module load StdEnv/2020 ansys/2022R1; A=221; B=5.12.6</code>, ou</dd>
<dd><code>module load StdEnv/2020 ansys/2021R2; A=212; B=5.12.6</code>, ou</dd>
<dd><code>module load StdEnv/2020 ansys/2021R1; A=211; B=5.12.6</code>, ou</dd>
<dd><code>export LD_LIBRARY_PATH=$EBROOTANSYS/v$A/CEI/apex$A/machines/linux_2.6_64/qt-$B/lib</code></dd>
<dd><code>ensight -X</code></dd></dl></dd></dl></dd></dl>
<p>Remarque&#160;: ansys/2022R2 Ensight a Ã©tÃ© peu testÃ© sur les nÅ“uds de calcul; veuillez nous faire part des problÃ¨mes que vous rencontrez.
</p>
<h3><span class="mw-headline" id="Rocky">Rocky</span></h3>
<dl><dd><dl><dd><dl><dd><code>module load rocky/2023R2 ansys/2023R2</code> (ou versions plus rÃ©centes)</dd>
<dd><code>Rocky</code> (se lit ~/licenses/ansys.lic si le module est prÃ©sent, affiche autrement le serveur SHARCNET en ligne de commande), ou<br /></dd>
<dd><code>Rocky-int</code> (sÃ©lectionner interactivement le serveur CMC ou SHARCNET server; se lit aussi ~/licenses/ansys.lic, gui use)<br /></dd>
<dd><code>RockySolver</code> (exÃ©cuter Rocky Ã  partir de la ligne de commande; ceci n'a pas Ã©tÃ© testÃ© mais vous pouvez entrer "-h" pour <i>help</i>)</dd>
<dd><code>RockySchedular</code> (gestionnaire de ressources pour soumettre plusieurs tÃ¢ches sur le nÅ“ud courant)</dd>
<dd>o Rocky est prÃ©sentement disponible uniquement sur gra-vdi et la grappe Graham (workbench ne prend pas en charge linux)</dd>
<dd>o La documentation se trouve sur /opt/software/rocky/2023R2/docs (que vous pouvez lire avec <code>mupdf</code>)</dd>
<dd>o Rocky prend en charge le calcul avec GPU accÃ©lÃ©rÃ©s (par contre, aucun test n'a Ã©tÃ© effectuÃ©)</dd>
<dd>o Pour travailler interactivement sur un nÅ“ud de calcul sur Graham pour une durÃ©e de 8 heures avec 4 CPU et 1 GPU, la commande est</dd>
<dd><code>salloc --time=08:00:00 --nodes=1 --cpus-per-task=4 --gres=gpu:v100:1 --mem=32G --account=someaccount</code></dd>
<dd>o La licence SHARCNET comprend maintenant Rocky (utilisation gratuite pour la recherche)</dd></dl></dd></dl></dd></dl>
<h2><span id="N.C5.93uds_VDI"></span><span class="mw-headline" id="NÅ“uds_VDI">NÅ“uds VDI</span></h2>
<p>Les programmes Ansys peuvent Ãªtre exÃ©cutÃ©s jusqu'Ã  7&#160;jours sur les nÅ“uds Graham VDI (gra-vdi.alliancecan.ca) en utilisant un maximum de 8&#160;cÅ“urs (maximum de 16&#160;cÅ“urs) et 128 Go&#160;de mÃ©moire. Le systÃ¨me VDI fournit une accÃ©lÃ©ration GPU OpenGL, ce qui est idÃ©al pour les  graphiques Ã  haute performance. On peut utiliser VDI pour crÃ©er ou modifier des fichiers d'entrÃ©e de simulation, post-traiter des donnÃ©es ou visualiser des rÃ©sultats de simulation. Connectez-vous d'abord Ã  gra-vdi.computecanada.ca avec <a href="/wiki/VNC/fr#NÅ“uds_VDI" title="VNC/fr">TigerVNC</a> puis ouvrez une nouvelle fenÃªtre de terminal et dÃ©marrez l'une des <b>versions de programme prises en charge</b> montrÃ©es ci-dessous. La barre verticale <code>|</code> est utilisÃ©e pour sÃ©parer les commandes. La taille maximale d'une tÃ¢che parallÃ¨le exÃ©cutÃ©e sur gra-vdi doit Ãªtre limitÃ©e Ã  16&#160;cÅ“urs pour Ã©viter de surcharger les serveurs et de nuire aux autres utilisateurs. Pour exÃ©cuter deux tÃ¢ches simultanÃ©es (16&#160;cÅ“urs maximum chacune), utilisez deux sessions VCN distinctes. Pour la premiÃ¨re session, connectez-vous avec VNC Ã  gra-vdi3.sharcnet.ca. Pour la deuxiÃ¨me session, connectez-vous Ã  gra-vdi4.sharecnet.ca aussi avec VNC. Dans chacune des sessions, dÃ©marrez Ansys en mode graphique et faites exÃ©cuter la simulation. Notez que les simulations simultanÃ©es doivent en gÃ©nÃ©ral Ãªtre exÃ©cutÃ©es dans des rÃ©pertoires diffÃ©rents pour Ã©viter les conflits de fichiers. Contrairement aux connexions VNC des nÅ“uds de calcul (qui imposent des limites Slurm via salloc), il n'y a pas de contrainte de limite de temps sur gra-vdi lors de l'exÃ©cution des simulations.
</p>
<h3><span class="mw-headline" id="Fluids_2">Fluids</span></h3>
<dl><dd><dl><dd><dl><dd><code>module load CcEnv StdEnv/2020</code></dd>
<dd><code>module load ansys/2021R1</code> (ou versions plus rÃ©centes)</dd>
<dd><code>unset SESSION_MANAGER</code></dd>
<dd><code>fluent | cfx5 | icemcfd</code></dd>
<dd>o La commande <code>unset SESSION_MANAGER</code> permet d'Ã©viter le message d'erreur suivant au lancement de Fluent.</dd>
<dd>[<span style="Color:#ff7f50">Qt: Session management error: None of the authentication protocols specified are supported</span>]</dd>
<dd>o Si le message suivant est affichÃ© au lancement de icemcfd ...</dd>
<dd>[<span style="Color:#ff7f50">Error segmentation violation - exiting after doing an emergency save</span>]</dd>
<dd>... ne cliquez pas sur le bouton OK, autrement icemcfd va planter. Faites plutÃ´t ce qui suit (une seule fois)&#160;:</dd>
<dd>sÃ©lectionnez <i>Settings Tab -&gt; Display -&gt; tick X11 -&gt; Apply -&gt; OK -&gt; File -&gt; Exit</i></dd>
<dd>L'erreur ne devrait pas se produire quand vous dÃ©marrez de nouveau icemcfd.</dd></dl></dd></dl></dd></dl>
<h3><span class="mw-headline" id="Mapdl_2">Mapdl</span></h3>
<dl><dd><dl><dd><dl><dd><code>module load CcEnv StdEnv/2020</code></dd>
<dd><code>module load ansys/2021R1</code> (ou versions plus rÃ©centes)</dd>
<dd><code>mapdl -g</code>, or via launcher,</dd>
<dd><code>unset SESSION_MANAGER; launcher</code> --&gt; cliquez sur le bouton RUN</dd></dl></dd></dl></dd></dl>
<h3><span class="mw-headline" id="Workbench_3">Workbench</span></h3>
<dl><dd><dl><dd><dl><dd><code>module load SnEnv</code></dd>
<dd><code>module load ansys/2020R2</code> (ou versions plus rÃ©centes)</dd>
<dd><code>export HOOPS_PICTURE=opengl</code></dd>
<dd><code>runwb2</code></dd>
<dd>o La ligne <code>export HOOPS_PICTURE=opengl</code> permet d'Ã©viter le message suivant au lancement de Fluid.
<dl><dd>[<span style="Color:#ff7f50">Software rasterizer found, hardware acceleration will be disabled.</span>]</dd></dl></dd>
<dd>La variable HOOPS_PICTURE peut aussi Ãªtre configurÃ©e dans Workbench avec
<dl><dd>Fluent Launcher --&gt; Environment Tab --&gt; HOOPS_PICTURE=opengl (sans la commande export)</dd></dl></dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd><dl><dd>REMARQUE&#160;1&#160;: Lorsque vous exÃ©cutez Mechanical dans Workbench sur gra-vdi, assurez-vous de cocher <i>Distributed</i> dans le panneau <i>Solver</i> du ruban supÃ©rieur et de spÃ©cifier une valeur maximale de <b>24&#160;cÅ“urs</b>. Lorsque vous exÃ©cutez Fluent sur gra-vdi, ne cochez pas <i>Distributed</i> et spÃ©cifiez une valeur maximale de <b>12&#160;cÅ“urs</b>. N'essayez pas d'utiliser plus de 128Go de mÃ©moire, sinon Ansys atteindra la limite et sera arrÃªtÃ©. Si vous avez besoin de plus de cÅ“urs ou de mÃ©moire, utilisez un nÅ“ud de calcul sur une grappe pour exÃ©cuter votre session graphique (comme dÃ©crit dans la section <i>NÅ“uds de calcul</i> ci-dessus). Lorsque vous effectuez une ancienne tÃ¢che de prÃ©traitement ou de post-traitement avec Ansys sur gra-vdi et que vous n'exÃ©cutez pas de calcul, utilisez uniquement <b>4&#160;cÅ“urs</b>, sinon les licences HPC seront extraites inutilement.</dd>
<dd>REMARQUE&#160;2&#160;: Dans de trÃ¨s rares cas, l'interface graphique de Workbench se bloque ou cesse de rÃ©pondre pour quelconque raison. Si cela se produit, ouvrez une nouvelle fenÃªtre de terminal et exÃ©cutez <code>pkill -9 -e -u $USER -f "ansys|fluent|mwrpcss|mwfwrapper|ENGINE|mono"</code> pour arrÃªter complÃ¨tement Ansys. De mÃªme, si Ansys plante ou si vncviewer se dÃ©connecte avant qu'Ansys ne puisse Ãªtre arrÃªtÃ© correctement, essayez d'exÃ©cuter la commande <code>pkill</code> si Ansys ne fonctionne pas normalement par la suite. En gÃ©nÃ©ral, si Ansys ne se comporte pas correctement et que vous soupÃ§onnez l'une des causes ci-dessus, essayez <code>pkill</code> avant de faire une demande d'assistance.</dd></dl></dd></dl></dd></dl>
<h3><span class="mw-headline" id="Ansys_EDT_3">Ansys EDT</span></h3>
<dl><dd><dl><dd><dl><dd>Ouvrez une fenÃªtre de terminal et chargez le module avec
<dl><dd><code>module load SnEnv ansysedt/2023R2</code>, ou</dd>
<dd><code>module load SnEnv ansysedt/2021R2</code></dd></dl></dd>
<dd>Dans le terminal, entrez <code>ansysedt</code> et attendez que l'interface s'affiche.</dd>
<dd>Ceci doit Ãªtre fait une seule fois&#160;:
<dl><dd>sÃ©lectionnez <i>Tools -&gt; Options -&gt; HPC and Analysis Options -&gt; Options</i></dd>
<dd>dans le menu dÃ©roulant, changez <i>HPC License</i> pour <i><b>Pool</b></i> (pour utiliser plus de 4 cÅ“urs)</dd>
<dd>cliquez sur <i>OK</i></dd></dl></dd>
<dd>----------   EXEMPLES  ----------</dd>
<dd>Pour copier dans votre compte les exemples Antennas de 2023R2&#160;:
<dl><dd>connectez-vous Ã  une grappe (par exemple Graham)</dd>
<dd><code>module load ansysedt/2023R2</code></dd>
<dd><code>mkdir -p ~/Ansoft/$EBVERSIONANSYSEDT; cd ~/Ansoft/$EBVERSIONANSYSEDT; rm -rf Antennas</code></dd>
<dd><code>cp -a $EBROOTANSYSEDT/v232/Linux64/Examples/HFSS/Antennas ~/Ansoft/$EBVERSIONANSYSEDT</code></dd></dl></dd>
<dd>Pour faire exÃ©cuter un exemple&#160;:
<dl><dd>ouvrez un fichier .aedt et cliquez sur <i>HFSS -&gt; Validation Check</i></dd>
<dd>(si la validation produit une erreur, fermez et ouvrez de nouveau la simulation autant de fois que nÃ©cessaire)</dd>
<dd>pour lancer la simulation, cliquez sur <i>Project -&gt; Analyze All</i></dd>
<dd>pour quitter sans sauvegarder la solution, cliquez sur <i>File -&gt; Close -&gt; No </i></dd></dl></dd>
<dd>si le programme plante et ne repart pas, essayez les commandes suivantes&#160;:
<dl><dd><code>pkill -9 -u $USER -f "ansys*|mono|mwrpcss|apip-standalone-service"</code></dd>
<dd><code>rm -rf ~/.mw</code> (au lancement, ansysedt utilisera la configuration initiale)</dd></dl></dd></dl></dd></dl></dd></dl>
<h3><span class="mw-headline" id="Ensight_2">Ensight</span></h3>
<dl><dd><dl><dd><dl><dd><code>module load SnEnv ansys/2019R2</code> (ou version plus rÃ©cente)</dd>
<dd><code>ensight</code><br /></dd></dl></dd></dl></dd></dl>
<h3><span class="mw-headline" id="Rocky_2">Rocky</span></h3>
<dl><dd><dl><dd><dl><dd><code>module load clumod rocky/2023R2 CcEnv StdEnv/2020 ansys/2023R2</code> (ou versions plus rÃ©centes)</dd>
<dd><code>Rocky</code> (s'il existe, lit  ~/licenses/ansys.lic, autrement utilise le serveur SHARCNET par dÃ©faut), ou<br /></dd>
<dd><code>Rocky-int</code> (sÃ©lectionnez interactivement le serveur CMC ou SHARCNET; lit aussi ~/licenses/ansys.lic)<br /></dd>
<dd><code>RockySolver</code> (lancez Rocky Ã  partir de la ligne de commande; ceci n'a pas Ã©tÃ© testÃ© mais vous pouvez entrer "-h" pour <i>help</i>)</dd>
<dd><code>RockySchedular</code> (gestionnaire de ressources pour soumettre plusieurs tÃ¢ches sur le nÅ“ud courant)</dd>
<dd>o Rocky est prÃ©sentement disponible uniquement sur gra-vdi et la grappe Graham (Workbench n'est pas supportÃ© par linux)</dd>
<dd>o La documentation se trouve sur /opt/software/rocky/2023R2/docs (que vous pouvez lire avec <code>mupdf</code>)</dd>
<dd>o Rocky ne peut utiliser que des CPU sur gra-vdi puisqu'il n'y a prÃ©sentement qu'un seul GPU dÃ©diÃ© aux graphiques</dd>
<dd>o La licence SHARCNET inclut maintenant Rocky dont l'utilisation est sans frais pour la recherche</dd></dl></dd></dl></dd></dl>
<h2><span id="Probl.C3.A8mes_avec_SSH"></span><span class="mw-headline" id="ProblÃ¨mes_avec_SSH">ProblÃ¨mes avec SSH</span></h2>
<dl><dd><dl><dd><dl><dd>Certains programmes d'interface graphique ANSYS peuvent Ãªtre exÃ©cutÃ©s Ã  distance sur un nÅ“ud de calcul d'une de nos grappes par redirection X via SSH vers votre ordinateur local. Contrairement Ã  VNC, cette approche n'est ni testÃ©e ni prise en charge car elle repose sur un serveur d'affichage X correctement configurÃ© pour votre systÃ¨me d'exploitation particulier OU sur la sÃ©lection, l'installation et la configuration d'un paquet d'Ã©mulateur client X appropriÃ© tel que MobaXterm. La plupart d'entre vous trouverez les temps de rÃ©ponse interactifs inacceptables pour les tÃ¢ches de menu de base, sans parler de l'exÃ©cution de tÃ¢ches plus complexes telles que celles nÃ©cessitant du rendu graphique. Les temps d'attente pour dÃ©marrer des programmes avec interface graphique peuvent Ã©galement Ãªtre trÃ¨s longs, dÃ©pendant de votre connexion Internet. Dans un test par exemple, il a fallu 40&#160;minutes pour dÃ©marrer complÃ¨tement <i>ansysedt</i> sur SSH alors que vncviewer n'a pris que 34&#160;secondes. MalgrÃ© la lenteur potentielle lors de la connexion via SSH pour exÃ©cuter des programmes avec interface graphique, cela peut toujours Ãªtre intÃ©ressant si votre seul objectif est d'ouvrir une simulation et d'effectuer des opÃ©rations de menu de base ou d'exÃ©cuter des calculs. Ces Ã©tapes de base sont un point de dÃ©part&#160;: 1) ssh -Y username@graham.computecanada.ca; 2) salloc --x11 --time=1:00:00 --mem=16G --cpus-per-task =4 [--gpus-per-node=1] --account=def-mygroup; 3) une fois connectÃ© Ã  un nÅ“ud de calcul, essayez d'exÃ©cuter <code>xclock</code>. Si l'horloge apparaÃ®t sur votre bureau, chargez le module Ansys souhaitÃ© et essayez d'exÃ©cuter le programme.</dd></dl></dd></dl></dd></dl>
<h1><span id="Particularit.C3.A9s_selon_le_site_d.27utilisation"></span><span class="mw-headline" id="ParticularitÃ©s_selon_le_site_d'utilisation">ParticularitÃ©s selon le site d'utilisation</span></h1>
<h2><span class="mw-headline" id="Licence_SHARCNET">Licence SHARCNET</span></h2>
<p>La licence Ansys de SHARCNET est gratuite pour une utilisation acadÃ©mique par les chercheurs et chercheuses de l'Alliance sur les systÃ¨mes de l'Alliance. Le logiciel installÃ© n'a pas de limites de solveur ou de gÃ©omÃ©trie. La licence SHARCNET peut  <b>uniquement</b> Ãªtre utilisÃ©e Ã  des fins de <b><i>recherche universitaire publiable</i></b>; la production de rÃ©sultats Ã  des fins commerciales privÃ©es est strictement interdite. La licence a Ã©tÃ© mise Ã  niveau de CFD vers MCS (Multiphysics Campus Solution) en mai 2020 et inclut les produits suivants&#160;: HF, EM, Electronics HPC, Mechanical et CFD  <a rel="nofollow" class="external text" href="https://www.ansys.com/academic/educator-tools/academic-product-portfolio">comme dÃ©crit ici</a>. En 2023 Rocky pour Linux a Ã©tÃ© ajoutÃ©, mais sans prise en charge pour Workbench. Puisque toutes nos grappes fonctionnent avec Linux, SpaceClaim ne peut pas Ãªtre utilisÃ©. La licence SHARCNET n'inclut pas LS-DYNA et Lumerical, mais ceux-ci peuvent Ãªtre achetÃ©s  but could purchased as an add-on that would work with the existing hpc licenses. Ni LS-DYNA ni Lumerical ne sont inclus. En juillet 2021, 1024 licences anshpc supplÃ©mentaires ont Ã©tÃ© ajoutÃ©es au groupe de 512. Avant d'exÃ©cuter de grands travaux parallÃ¨les, des tests de scalabilitÃ© doivent Ãªtre exÃ©cutÃ©s pour une simulation donnÃ©e. Les tÃ¢ches parallÃ¨les qui n'atteignent pas au moins 50% d'utilisation CPU peuvent Ãªtre portÃ©es Ã  l'attention de notre Ã©quipe technique par le systÃ¨me.
</p><p>Depuis dÃ©cembre 2022, chaque utilisateur peut exÃ©cuter 4 travaux en utilisant un total de 252 anshpc (plus 4 anshpc par tÃ¢che). Ainsi, les combinaisons de taille de tÃ¢ches uniformes suivantes sont possibles&#160;: une tÃ¢che de 256&#160;cÅ“urs, deux tÃ¢ches de 130&#160;cÅ“urs, trois tÃ¢ches de 88&#160;cÅ“urs ou quatre tÃ¢ches de 67&#160;cÅ“urs selon ( (252 + 4* nombre de tÃ¢ches) / nombre de tÃ¢ches). MISE Ã€ JOUR%nbsp;: En octobre 2024, la limite a Ã©tÃ© portÃ©e Ã  8 tÃ¢ches et 512 cÅ“urs HPC par utilisateur (collectivement sur toutes les grappes pour toutes les applications) pour une pÃ©riode de test afin de permettre plus de flexibilitÃ© pour l'exploration de paramÃ¨tres et l'exÃ©cution de problÃ¨mes de plus grande envergure. Comme la licence sera beaucoup moins utilisÃ©e, certains cas d'Ã©chec de tÃ¢che au dÃ©marrage pourront rarement se produire, mais les tÃ¢ches devront Ãªtre soumises Ã  nouveau. NÃ©anmoins, en supposant que la plupart continuent Ã  exÃ©cuter une ou deux tÃ¢ches en utilisant 128 cÅ“urs en moyenne au total, cela ne devrait pas poser de problÃ¨me. Cela dit, il sera utile de fermer les applications Ansys immÃ©diatement aprÃ¨s l'achÃ¨vement de toute tÃ¢che liÃ©e Ã  l'interface graphique afin de libÃ©rer toutes les licences qui peuvent Ãªtre consommÃ©es pendant que l'application est inactive, pour que d'autres puissent les utiliser.
</p><p>Ã‰tant donnÃ© que les meilleures performances parallÃ¨les sont gÃ©nÃ©ralement obtenues en utilisant tous les cÅ“urs sur des nÅ“uds de calcul (Ã©galement appelÃ©s nÅ“uds complets), on peut dÃ©terminer le nombre de nÅ“uds complets en divisant le nombre total de cÅ“urs anshpc par la taille du nÅ“ud de calcul. Par exemple, prenons Graham qui possÃ¨de de nombreux nÅ“uds de calcul Ã  32&#160;cÅ“urs (Broadwell) et certains Ã  44&#160;cÅ“urs (Cascade). Le nombre maximal de nÅ“uds pouvant Ãªtre demandÃ©s lors de l'exÃ©cution de tÃ¢ches de diffÃ©rentes tailles sur des nÅ“uds Ã  32&#160;cÅ“urs en supposant une limite de 252&#160;cÅ“urs pour exÃ©cuter respectivement 1, 2, 3 ou 4 tÃ¢ches simultanÃ©es serait&#160;<br />
256/32=8, 130/32=~4, 88/32=~2 ou 67/32=~2. Pour exprimer cela sous forme d'Ã©quation, pour une taille de nÅ“ud de calcul donnÃ©e sur n'importe quelle grappe, le nombre de nÅ“uds de calcul peut Ãªtre calculÃ© par
( 252 + (4*num_tÃ¢ches) ) / (num_tÃ¢ches*cÅ“urs par nÅ“ud) ) puis arrondir Ã  l'infÃ©rieur et enfin dÃ©terminer le nombre total de cÅ“urs Ã  demander en multipliant le nombre pair de nÅ“uds par le nombre de cÅ“urs par nÅ“ud.
</p><p>La licence de SHARCNET est disponible selon le principe du premier arrivÃ©, premier servi. Si un nombre anormalement Ã©levÃ© de tÃ¢ches Ansys Ã©tait soumis un jour donnÃ©, certaines tÃ¢ches pourraient Ã©chouer au dÃ©marrage si le nombre de licences disponibles est insuffisant.  Ces Ã©vÃ©nements sont cependant devenus trÃ¨s rares compte tenu de l'augmentation rÃ©cente des licences anshpc. Si votre recherche nÃ©cessite plus de licences que SHARCNET ne peut fournir, une licence dÃ©diÃ©e peut Ãªtre achetÃ©e (et hÃ©bergÃ©e) sur un serveur de licences Ansys dans votre Ã©tablissement local. Cependant, si la demande est forte, nous pourrions Ã©ventuellement acquÃ©rir une licence offrant plus d'accÃ¨s.
</p><p>Vous pouvez aussi acheter votre propre licence Ansys auprÃ¨s de <a rel="nofollow" class="external text" href="https://www.cmc.ca/subscriptions/">CMC</a> et utiliser leurs serveurs de licences distants. Ceci prÃ©sente plusieurs avantages&#160;:
</p>
<ul><li>un serveur de licences institutionnel local n'est pas nÃ©cessaire,</li>
<li>une licence physique n'a pas besoin d'Ãªtre obtenue Ã  chaque renouvellement,</li>
<li>la licence peut Ãªtre utilisÃ©e <a rel="nofollow" class="external text" href="https://www.cmc.ca/ansys-">campus-solutions-cmc-00200-04847/ presque n'importe oÃ¹</a>, y compris Ã  la maison, dans des Ã©tablissements ou dans toutes les grappes de l'Alliance,</li>
<li>les directives de tÃ©lÃ©chargement et d'installation pour la version Windows d'Ansys sont fournies afin de permettre l'exÃ©cution de spaceclaim sur votre propre ordinateur (ceci n'est pas possible sur nos systÃ¨mes qui sont basÃ©s sur Linux).</li></ul>
<p>Il existe cependant une limitation potentiellement sÃ©rieuse Ã  prendre en compte&#160;: selon <a rel="nofollow" class="external text" href="https://www.cmc.ca/qsg-ansys-cadpass-r20/">Ansys Quick Start Guides</a>, il pourrait avoir une limite de 64 cÅ“urs par utilisateur.
</p>
<h4><span class="mw-headline" id="Fichier_du_serveur_de_licence">Fichier du serveur de licence</span></h4>
<p>Pour utiliser la licence de SHARCNET sur nos grappes, configurez votre fichier <code>ansys.lic</code> comme suit&#160;:
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span><span class="o">[</span>username@cluster:~<span class="o">]</span><span class="w"> </span>cat<span class="w"> </span>~/.licenses/ansys.lic
setenv<span class="o">(</span><span class="s2">&quot;ANSYSLMD_LICENSE_FILE&quot;</span>,<span class="w"> </span><span class="s2">&quot;1055@license3.sharcnet.ca&quot;</span><span class="o">)</span>
setenv<span class="o">(</span><span class="s2">&quot;ANSYSLI_SERVERS&quot;</span>,<span class="w"> </span><span class="s2">&quot;2325@license3.sharcnet.ca&quot;</span><span class="o">)</span>
</pre></div>
<h4><span class="mw-headline" id="Interroger_le_serveur_de_licence">Interroger le serveur de licence</span></h4>
<p>Pour connaÃ®tre le nombre de licences utilisÃ©es qui sont associÃ©es Ã  votre nom d'utilisateur et le nombre de licences utilisÃ©es par tous les utilisateurs, lancez
</p>
<div class="mw-highlight mw-highlight-lang-bash mw-content-ltr" dir="ltr"><pre><span></span>ssh<span class="w"> </span>graham.computecanada.ca
module<span class="w"> </span>load<span class="w"> </span>ansys
lmutil<span class="w"> </span>lmstat<span class="w"> </span>-c<span class="w"> </span><span class="nv">$ANSYSLMD_LICENSE_FILE</span><span class="w"> </span>-a<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;Users of\|</span><span class="nv">$USER</span><span class="s2">&quot;</span>
</pre></div>
<p>Si vous remarquez que des licences sont utilisÃ©es sans justification avec votre nom d'utilisateur (ce qui peut se produire si Ansys n'a pas Ã©tÃ© correctement fermÃ© sur gra-vdi), connectez-vous au nÅ“ud en cause, ouvrez une fenÃªtre de terminal et mettez fin au processus avec <code>pkill -9 -e -u $USER -f "ansys"</code> pour libÃ©rer vos licences.  Prenez note que gra-vdi possÃ¨de deux nÅ“uds (gra-vdi3 et gra-vdi4) qui vous sont assignÃ©s au hasard quand vous vous connectez avec tigervnc; ainsi, avant de lancer <tt>pkill</tt>, il est nÃ©cessaire d'indiquer le nom complet de l'hÃ´te (gra-vdi3.sharcnet.ca ou grav-vdi4.sharcnet.ca) quand vous vous connectez.
</p>
<h3><span class="mw-headline" id="Modules_VDI_locaux">Modules VDI locaux</span></h3>
<p>Lors de l'utilisation de gra-vdi, vous avez le choix de charger des modules Ansys Ã  partir de notre environnement global (aprÃ¨s avoir chargÃ© CcEnv) ou de charger des modules Ansys installÃ©s localement sur la machine elle-mÃªme (aprÃ¨s avoir chargÃ© SnEnv). Les modules locaux peuvent Ãªtre intÃ©ressants, car ils incluent certains programmes et versions d'Ansys non encore pris en charge par notre environnement standard. Lors du dÃ©marrage de programmes Ã  partir de modules Ansys locaux, vous pouvez sÃ©lectionner le serveur de licences CMC ou accepter le serveur de licences SHARCNET par dÃ©faut. Les paramÃ¨tres de <code>~/.licenses/ansys.lic</code> ne sont prÃ©sentement pas utilisÃ©s par les modules Ansys locaux, sauf lors du dÃ©marrage de <code>runwb2</code> oÃ¹ ils remplacent les paramÃ¨tres par dÃ©faut du serveur de licences SHARCNET. L'utilisation appropriÃ©e des programmes Ansys sur gra-vdi comprend&#160;: l'exÃ©cution interactive d'une seule tÃ¢che de test avec jusqu'Ã  8&#160;cÅ“urs et/ou 128Go de RAM; la crÃ©ation ou la modification de fichiers d'entrÃ©e pour la simulation; le post-traitement; ou la visualisation de donnÃ©es.
</p>
<h4><span class="mw-headline" id="Modules_Ansys">Modules Ansys</span></h4>
<ol><li>Connectez-vous Ã  gra-vdi.computecanada.ca avec <a href="/wiki/VNC/fr#NÅ“uds_VDI" title="VNC/fr">TigerVNC</a>.</li>
<li>Ouvrez une fenÃªtre de terminal et chargez le module &#160;:
<dl><dt><code>module load SnEnv ansys/2021R2</code>, ou</dt>
<dt><code>module load SnEnv ansys/2021R1</code>, ou</dt>
<dt><code>module load SnEnv ansys/2020R2</code>, ou</dt>
<dt><code>module load SnEnv ansys/2020R1</code>, ou</dt>
<dt><code>module load SnEnv ansys/2019R3</code></dt></dl></li>
<li>Lancez un programme Ansys avec une des commandes suivantes&#160;:
<dl><dt><code>runwb2|fluent|<b>cfx5</b>|icemcfd|apdl</code></dt></dl></li>
<li>Appuyez sur <code>y</code> et <code>Enter</code> pour accepter les conditions.</li>
<li>Appuyez sur <code>Enter</code> pour accepter l'option <code>n</code> et utilisez le serveur de licence par dÃ©faut SHARCNET (dans le cas de runwb2, <i>~/.licenses/ansysedt.lic</i> sera utilisÃ© si trouvÃ©, autrement ANSYSLI_SERVERS et ANSYSLMD_LICENSE_FILE seront utilisÃ©s s'ils sont configurÃ©s dans votre environnement, pour un autre serveur de licences distant, par exemple).   Pour utiliser le serveur de licence de CMC, changez <code>n</code> pour <code>y</code> et appuyez sur <code>Enter</code>.</li></ol>
<p>oÃ¹ <code><b>cfx5</b></code> de l'Ã©tape 3 ci-dessus donne l'option de dÃ©marrer les composantes suivantes&#160;:
</p>
<pre>   1) CFX-Launcher  (cfx5 -&gt; cfx5launch)
   2) CFX-Pre       (cfx5pre)
   3) CFD-Post      (cfdpost -&gt; cfx5post)
   4) CFX-Solver    (cfx5solve)
</pre>
<h4><span class="mw-headline" id="Modules_ansysedt">Modules ansysedt</span></h4>
<ol><li>Connectez-vous Ã  gra-vdi.computecanada.ca avec <a href="/wiki/VNC/fr#NÅ“uds_VDI" title="VNC/fr">TigerVNC</a>.</li>
<li>Ouvrez une nouvelle fenÃªtre de terminal et chargez un module
<dl><dt><code>module load SnEnv ansysedt/2021R2</code>, ou</dt>
<dt><code>module load SnEnv ansysedt/2021R1</code></dt></dl></li>
<li>Lancez Ansys Electromagnetics Desktop avec la commande <code>ansysedt</code>.</li>
<li>Appuyez sur <code>y</code> et <code>Enter</code> pour accepter les conditions.</li>
<li>Appuyez sur <code>enter</code> pour accepter l'option <code>n</code> et utiliser le serveur de licences SHARCNET par dÃ©faut (si prÃ©sente,  <i>~/.licenses/ansysedt.lic</i> sera utilisÃ©e, autrement ANSYSLI_SERVERS et ANSYSLMD_LICENSE_FILE seront utilisÃ©s s'ils sont configurÃ©s dans votre environnement, par exemple pour un autre serveur Ã  distance).  Si vous remplacez <code>n</code> par <code>y</code> et appuyez sur <code>Enter</code>, le serveur de licences CMC sera utilisÃ©.</li></ol>
<p>Les prÃ©fÃ©rences des fonctionnalitÃ©s de licence prÃ©cÃ©demment configurÃ©es avec <i>anslic_admin</i> ne sont plus prises en charge suite Ã  la mise Ã  jour du serveur de licences SHARCNET du 9 septembre 2021. Si un problÃ¨me de licence survient, essayez de supprimer le rÃ©pertoire <code>~/.ansys</code> de votre compte /home pour effacer les paramÃ¨tres. Si les problÃ¨mes persistent, veuillez contacter notre <a href="/wiki/Technical_support/fr" title="Technical support/fr">soutien technique</a> et fournir le contenu de votre fichier <code>~/.licenses/ansys.lic</code>.
</p>
<h1><span class="mw-headline" id="Additive_Manufacturing">Additive Manufacturing</span></h1>
<p>Configurez d'abord votre fichier <code>~/.licenses/ansys.lic</code> pour l'orienter vers le serveur de licence oÃ¹ se trouve une licence valide pour Ansys Mechanical.  Vous devez faire ceci sur tous les systÃ¨mes oÃ¹ vous utiliserez le logiciel.  
</p>
<h2><span class="mw-headline" id="Activer_Additive">Activer Additive</span></h2>
<p>Nous dÃ©crivons ici comment obtenir l'extension ACT de Ansys Additive Manufacturing pour l'utiliser dans votre projet. Les Ã©tapes suivantes doivent Ãªtre effectuÃ©es pour chaque version de module Ansys sur chacune des grappes oÃ¹ l'extension sera utilisÃ©e. Les extensions nÃ©cessaires Ã  votre projet doivent aussi Ãªtre installÃ©es sur la ou les grappes, tel que dÃ©crit ci-dessous. Si vous recevez des avertissements Ã  l'effet que des extensions dont vous n'avez pas besoin sont manquantes, par exemple ANSYSMotion, dÃ©sinstallez-les Ã  partir de votre projet.
</p>
<h3><span id="T.C3.A9l.C3.A9charger_l.27extension"></span><span class="mw-headline" id="TÃ©lÃ©charger_l'extension">TÃ©lÃ©charger l'extension</span></h3>
<ul><li>tÃ©lÃ©chargez AdditiveWizard.wbex Ã  partir de <a rel="nofollow" class="external free" href="https://catalog.ansys.com/">https://catalog.ansys.com/</a></li>
<li>tÃ©lÃ©versez AdditiveWizard.wbex sur la grappe oÃ¹ vous allez l'utiliser</li></ul>
<h3><span class="mw-headline" id="Lancer_Workbench">Lancer Workbench</span></h3>
<ul><li>Voir la section Workbench dans<a href="/mediawiki/index.php?title=ANSYS/fr&amp;action=edit&amp;redlink=1" class="new" title="ANSYS/fr (page does not exist)">Mode graphique plus haut</a>.</li>
<li>Dans l'interface Workbench, ouvrez votre fichier de projet avec File -&gt; Open.</li></ul>
<h3><span id="Ouvrir_le_gestionnaire_d.27extensions"></span><span class="mw-headline" id="Ouvrir_le_gestionnaire_d'extensions">Ouvrir le gestionnaire d'extensions</span></h3>
<ul><li>Cliquez sur la page ACT Start pour faire afficher l'onglet de la page ACT Home.</li>
<li>Cliquez sur Manage Extensions pour ouvrir le gestionnaire d'extensions.</li></ul>
<h3><span id="Installer_l.27extension"></span><span class="mw-headline" id="Installer_l'extension">Installer l'extension</span></h3>
<ul><li>Cliquez sur la boÃ®te avec le signe + sous la barre de recherche.</li>
<li>SÃ©lectionnez et installez votre fichier AdditiveWizard.wbex.</li></ul>
<h3><span id="Charger_l.27extension"></span><span class="mw-headline" id="Charger_l'extension">Charger l'extension</span></h3>
<ul><li>Cliquez pour sÃ©lectionner la boÃ®te AdditiveWizard, ce qui charge l'extension uniquement pour la session en cours.</li>
<li>Cliquez sur la flÃ¨che dans le coin droit au bas de la boÃ®te AdditiveWizard et sÃ©lectionnez <i>Load extension</i>, ce qui charge l'extension pour la session en cours et pour les sessions futures.</li></ul>
<h3><span id="Supprimer_l.27extension"></span><span class="mw-headline" id="Supprimer_l'extension">Supprimer l'extension</span></h3>
<ul><li>Cliquez pour dÃ©sÃ©lectionner la boÃ®te AdditiveWizard, ce qui supprime l'extension pour la session en cours.</li>
<li>Cliquez sur la flÃ¨che dans le coin droit au bas de la boÃ®te AdditiveWizard et sÃ©lectionnez <i>Do not load as default</i>, ce qui empÃªche le chargement de l'extension pour les futures sessions.</li></ul>
<h2><span id="Ex.C3.A9cuter_Additive"></span><span class="mw-headline" id="ExÃ©cuter_Additive">ExÃ©cuter Additive</span></h2>
<h3><span class="mw-headline" id="Gra-vdi">Gra-vdi</span></h3>
<p>Vous pouvez exÃ©cuter une seule tÃ¢che Ansys Additive Manufacturing sur gra-vdi en utilisant jusqu'Ã  16 cÅ“urs comme suit&#160;: 
</p>
<ul><li>Lancez Workbench sur gra-vdi comme dÃ©crit ci-dessus dans <i>Additive Manufacturing -&gt; Activer Additive</i>.</li>
<li>Cliquez sur <i>File -&gt; Open</i> et sÃ©lectionnez <i>test.wbpj</i> puis cliquez sur <i>Open</i>.</li>
<li>Cliquez sur <i>View -&gt; Reset workspace</i> si votre Ã©cran est gris.</li>
<li>Lancez <i>Mechanical, Clear Generated Data</i>, sÃ©lectionnez  <i>Distributed</i>, spÃ©cifiez <i>Cores</i>.</li>
<li>Cliquez sur <i>File -&gt; Save Project -&gt; Solve</i>.</li></ul>
<p>VÃ©rifiez l'utilisation&#160;:
</p>
<ul><li>Ouvrez un autre terminal et lancez <code>top -u $USER</code> OU <code>ps u -u $USER | grep ansys</code>.</li>
<li>Terminez les processus non nÃ©cessaires crÃ©Ã©s par des tÃ¢ches prÃ©cÃ©dentes avec  <code>pkill -9 -e -u $USER -f "ansys|mwrpcss|mwfwrapper|ENGINE"</code>.</li></ul>
<p>Veuillez noter que des processus persistants peuvent bloquer les licences entre les sessions de connexion gra-vdi ou provoquer d'autres erreurs inhabituelles lors de la tentative de dÃ©marrage de l'interface graphique sur gra-vdi. Bien que cela soit rare, un processus peut rester en mÃ©moire si une session d'interface graphique Ansys (Fluent, Workbench, etc.) n'est pas correctement terminÃ©e avant que vncviewer ne soit terminÃ© manuellement ou de maniÃ¨re inattendue, par exemple en raison d'une panne de rÃ©seau temporaire ou d'un systÃ¨me de fichiers bloquÃ©. Dans ce dernier cas, les processus peuvent ne pas Ãªtre tuÃ©s tant que l'accÃ¨s normal au disque n'est pas rÃ©tabli.
</p>
<h3><span class="mw-headline" id="Grappe">Grappe</span></h3>
<p>PrÃ©paration du projet
</p><p>Certaines prÃ©parations doivent Ãªtre effectuÃ©es avant de soumettre un projet Additive nouvellement tÃ©lÃ©chargÃ© dans la file d'attente d'une grappe avec <code>sbatch scriptname</code>. Pour commencer, ouvrez votre simulation avec l'interface graphique de Workbench (comme dÃ©crit ci-dessus dans <i>Additive Manufacturing -&gt; Activer Additive</i>) dans le mÃªme rÃ©pertoire que celui Ã  partir duquel votre tÃ¢che sera soumise, puis enregistrez-la Ã  nouveau. Assurez-vous d'utiliser la mÃªme version du module Ansys qui sera utilisÃ© pour la tÃ¢che. CrÃ©ez ensuite un script Slurm (comme expliquÃ© dans le paragraphe pour Workbench dans la section <i>Soumettre des tÃ¢ches en lot sur nos grappes</i> ci-dessus). Pour effectuer des Ã©tudes paramÃ©triques, remplacez <code>Update()</code> par <code>UpdateAllDesignPoints()</code> dans le script Slurm. DÃ©terminez le nombre optimal de cÅ“urs et de mÃ©moire en soumettant plusieurs courtes tÃ¢ches de test. Pour Ã©viter d'avoir Ã  effacer manuellement la solution <b>et</b> recrÃ©er tous les points de conception dans Workbench entre chaque exÃ©cution de test, soit 1. remplacez <code>Save(Overwrite=True)</code> par <code>Save (Overwrite=False)</code>; ou 2. enregistrez une copie du fichier YOURPROJECT.wbpj d'origine et du rÃ©pertoire YOURPROJECT_files correspondant. Vous pouvez aussi crÃ©er puis exÃ©cuter manuellement un fichier de relecture sur la grappe dans le rÃ©pertoire de cas de test entre chaque exÃ©cution, en notant qu'un seul fichier de relecture peut Ãªtre utilisÃ© dans diffÃ©rents rÃ©pertoires en l'ouvrant dans un Ã©diteur de texte et en modifiant le paramÃ¨tre interne FilePath.
</p>
<pre>module load ansys/2019R3
rm -f test_files/.lock
runwb2 -R myreplay.wbjn
</pre>
<p>Utilisation des ressources
</p><p>AprÃ¨s quelques minutes, vous pouvez obtenir un instantanÃ© de l'utilisation des ressources par la tÃ¢che en cours d'exÃ©cution sur le ou les nÅ“uds de calcul avec la commande <tt>srun</tt>. Le script pour 8 cÅ“urs ci-dessous produit le rÃ©sultat suivant oÃ¹ on remarque que l'ordonnanceur a choisi 2 nÅ“uds.
</p>
<pre>[gra-login1:~] srun --jobid=myjobid top -bn1 -u $USER | grep R | grep -v top
  PID USER   PR  NI    VIRT    RES    SHR S  %CPU %MEM    TIME+  COMMAND
22843 demo   20   0 2272124 256048  72796 R  88.0  0.2  1:06.24  ansys.e
22849 demo   20   0 2272118 256024  72822 R  99.0  0.2  1:06.37  ansys.e
22838 demo   20   0 2272362 255086  76644 R  96.0  0.2  1:06.37  ansys.e
  PID USER   PR  NI    VIRT    RES    SHR S  %CPU %MEM    TIME+  COMMAND
 4310 demo   20   0 2740212 271096 101892 R 101.0  0.2  1:06.26  ansys.e
 4311 demo   20   0 2740416 284552  98084 R  98.0  0.2  1:06.55  ansys.e
 4304 demo   20   0 2729516 268824 100388 R 100.0  0.2  1:06.12  ansys.e
 4305 demo   20   0 2729436 263204 100932 R 100.0  0.2  1:06.88  ansys.e
 4306 demo   20   0 2734720 431532  95180 R 100.0  0.3  1:06.57  ansys.e
</pre>
<p>Tests de scalabilitÃ©
</p><p>Une fois la tÃ¢che complÃ©tÃ©e, son <i>Job Wall-clock time</i> peut Ãªtre obtenu avec <code>seff jobid</code>. Cette valeur peut Ãªtre utilisÃ©e pour effectuer des tests de scalabilitÃ© en soumettant de courtes tÃ¢ches d'abord puis en doublant le nombre de cÅ“urs. Tant que le Wall-clock time  diminue d'environ 50%, vous pouvez continuer de doubler le nombre de cÅ“urs.
</p>
<h1><span class="mw-headline" id="Aide">Aide</span></h1>
<h2><span class="mw-headline" id="Documentation_en_ligne">Documentation en ligne</span></h2>
<p>Ansys documentation, tutorial and videos (for any Ansys version back to 19.2) can be accessed by following these steps:
</p>
<ol><li>Connect to <b>gra-vdi.computecanada.ca</b> with tigervnc as described <a href="/wiki/VNC#VDI_Nodes" title="VNC">here</a>.</li>
<li>If the Firefox browser or the Ansys Workbench is open, close it now.</li>
<li>Start Firefox by clicking <i>Applications -&gt; Internet -&gt; Firefox</i>.</li>
<li>Open a <b><i>new</i></b> terminal window by clicking  <i>Applications -&gt; System Tools -&gt; Mate Terminal</i>.</li>
<li>Start Workbench by typing the following in your terminal: <i>module load CcEnv StdEnv/2023 ansys; runwb2</i></li>
<li>Go to the upper Workbench menu bar and click  <i>Help -&gt; ANSYS Workbench Help</i>.  The <b>Workbench Users' Guide</b> should appear loaded in Firefox.</li>
<li>At this point Workbench is no longer needed so close it by clicking the <i>&gt;Unsaved Project - Workbench</i> tab located along the bottom frame (doing this will bring Workbench into focus) and then click <i>File -&gt; Exit</i>.</li>
<li>In the top middle of the Ansys documentation page, click the word <i>HOME</i> located just left of <i>API DOCS</i>.</li>
<li>Now scroll down and you should see a list of Ansys product icons and/or alphabetical ranges.</li>
<li>Select a product to view its documentation.  The documentation for the latest release version will be displayed by default.  Change the version by clicking the <i>Release Year</i> pull down located above and just to the right of the Ansys documentation page search bar.</li>
<li>To search for documentation corresponding to a different Ansys product, click <i>HOME</i> again.</li></ol>
<h2><span id="Vid.C3.A9os_sur_YouTube"></span><span class="mw-headline" id="VidÃ©os_sur_YouTube">VidÃ©os sur YouTube</span></h2>
<p><a rel="nofollow" class="external text" href="https://www.youtube.com/@AnsysHowTo/videos">Ansys How To</a>
</p>
<h2><span class="mw-headline" id="Innovation_Space">Innovation Space</span></h2>
<p><a rel="nofollow" class="external text" href="https://innovationspace.ansys.com/">Customer Support &amp; Training: Ansys Innovation Space</a>.
</p>
<!-- 
NewPP limit report
Cached time: 20250530235441
Cache expiry: 86400
Reduced expiry: false
Complications: [showâ€toc]
CPU time usage: 0.270 seconds
Real time usage: 2.701 seconds
Preprocessor visited node count: 1531/1000000
Postâ€expand include size: 43255/2097152 bytes
Template argument size: 61589/2097152 bytes
Highest expansion depth: 9/100
Expensive parser function count: 24/100
Unstrip recursion depth: 3/20
Unstrip postâ€expand size: 164826/5000000 bytes
ExtLoops count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00% 2366.016      1 -total
 92.71% 2193.649     21 Template:File
  4.52%  107.021      1 Template:Commands2
-->

<!-- Saved in parser cache with key ccwiki:pcache:idhash:4960-0!canonical and timestamp 20250530235441 and revision id 173818. Rendering was triggered because: page-view
 -->
</div>
<div class="printfooter" data-nosnippet="">Retrieved from "<a dir="ltr" href="https://docs.alliancecan.ca/mediawiki/index.php?title=Ansys/fr&amp;oldid=173818">https://docs.alliancecan.ca/mediawiki/index.php?title=Ansys/fr&amp;oldid=173818</a>"</div></div>
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/mediawiki/index.php?title=Category:Pages_using_deprecated_source_tags&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages using deprecated source tags (page does not exist)">Pages using deprecated source tags</a></li><li><a href="/wiki/Category:Software" title="Category:Software">Software</a></li></ul></div></div>
	</div>
</div>

<div id="mw-navigation">
	<h2>Navigation menu</h2>
	<div id="mw-head">
		
<nav id="p-personal" class="mw-portlet mw-portlet-personal vector-user-menu-legacy vector-menu" aria-labelledby="p-personal-label"  >
	<h3
		id="p-personal-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Personal tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="pt-uls" class="mw-list-item active"><a class="uls-trigger" href="#"><span>English</span></a></li><li id="pt-login" class="mw-list-item"><a href="/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Ansys%2Ffr" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span>Log in</span></a></li>
		</ul>
		
	</div>
</nav>

		<div id="left-navigation">
			
<nav id="p-namespaces" class="mw-portlet mw-portlet-namespaces vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-namespaces-label"  >
	<h3
		id="p-namespaces-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Namespaces</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-nstab-main" class="selected mw-list-item"><a href="/wiki/Ansys/fr" title="View the content page [c]" accesskey="c"><span>Page</span></a></li><li id="ca-talk" class="new mw-list-item"><a href="/mediawiki/index.php?title=Talk:Ansys/fr&amp;action=edit&amp;redlink=1" rel="discussion" class="new" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-variants" class="mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-variants-label"  >
	<input type="checkbox"
		id="p-variants-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-variants"
		class="vector-menu-checkbox"
		aria-labelledby="p-variants-label"
	>
	<label
		id="p-variants-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">franÃ§ais</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

		</div>
		<div id="right-navigation">
			
<nav id="p-views" class="mw-portlet mw-portlet-views vector-menu-tabs vector-menu-tabs-legacy vector-menu" aria-labelledby="p-views-label"  >
	<h3
		id="p-views-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Views</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-view" class="selected mw-list-item"><a href="/wiki/Ansys/fr"><span>Read</span></a></li><li id="ca-viewsource" class="mw-list-item"><a href="/mediawiki/index.php?title=Ansys/fr&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e"><span>View source</span></a></li><li id="ca-history" class="mw-list-item"><a href="/mediawiki/index.php?title=Ansys/fr&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
		</ul>
		
	</div>
</nav>

			
<nav id="p-cactions" class="mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-menu" aria-labelledby="p-cactions-label"  title="More options" >
	<input type="checkbox"
		id="p-cactions-checkbox"
		role="button"
		aria-haspopup="true"
		data-event-name="ui.dropdown-p-cactions"
		class="vector-menu-checkbox"
		aria-labelledby="p-cactions-label"
	>
	<label
		id="p-cactions-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</nav>

			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<h3 >Search</h3>
	<form action="/mediawiki/index.php" id="searchform" class="vector-search-box-form">
		<div id="simpleSearch"
			class="vector-search-box-inner"
			 data-search-loc="header-navigation">
			<input class="vector-search-box-input"
				 type="search" name="search" placeholder="Search Alliance Doc" aria-label="Search Alliance Doc" autocapitalize="sentences" title="Search Alliance Doc [f]" accesskey="f" id="searchInput"
			>
			<input type="hidden" name="title" value="Special:Search">
			<input id="mw-searchButton"
				 class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
			<input id="searchButton"
				 class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
		</div>
	</form>
</div>

		</div>
	</div>
	
<div id="mw-panel" class="vector-legacy-sidebar">
	<div id="p-logo" role="banner">
		<a class="mw-wiki-logo" href="/wiki/Technical_documentation"
			title="Visit the main page"></a>
	</div>
	
<nav id="p-navigation" class="mw-portlet mw-portlet-navigation vector-menu-portal portal vector-menu" aria-labelledby="p-navigation-label"  >
	<h3
		id="p-navigation-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Navigation</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-wiki-main-page" class="mw-list-item"><a href="/wiki/Technical_documentation"><span>Wiki Main Page</span></a></li>
		</ul>
		
	</div>
</nav>

	
<nav id="p-sidebar-support" class="mw-portlet mw-portlet-sidebar-support vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-support-label"  >
	<h3
		id="p-sidebar-support-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Support</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-getting-started" class="mw-list-item"><a href="/wiki/Getting_started"><span>Getting started</span></a></li><li id="n-sidebar-technical-support" class="mw-list-item"><a href="/wiki/Technical_support"><span>Getting help</span></a></li><li id="n-sidebar-running-jobs" class="mw-list-item"><a href="/wiki/Running_jobs"><span>Running jobs</span></a></li><li id="n-sidebar-known-issues" class="mw-list-item"><a href="/wiki/Known_issues"><span>Known issues</span></a></li><li id="n-sidebar-system-status" class="mw-list-item"><a href="http://status.computecanada.ca" rel="nofollow"><span>System status</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-resources" class="mw-portlet mw-portlet-sidebar-resources vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-resources-label"  >
	<h3
		id="p-sidebar-resources-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Resources</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-BÃ©luga" class="mw-list-item"><a href="/wiki/B%C3%A9luga/en"><span>BÃ©luga</span></a></li><li id="n-Cedar" class="mw-list-item"><a href="/wiki/Cedar"><span>Cedar</span></a></li><li id="n-Graham" class="mw-list-item"><a href="/wiki/Graham"><span>Graham</span></a></li><li id="n-Narval" class="mw-list-item"><a href="/wiki/Narval/en"><span>Narval</span></a></li><li id="n-Niagara" class="mw-list-item"><a href="/wiki/Niagara"><span>Niagara</span></a></li><li id="n-sidebar-cloud" class="mw-list-item"><a href="/wiki/CC-Cloud"><span>Cloud</span></a></li><li id="n-tamIA" class="mw-list-item"><a href="/wiki/TamIA/en"><span>tamIA</span></a></li><li id="n-Killarney" class="mw-list-item"><a href="/wiki/Killarney"><span>Killarney</span></a></li><li id="n-sidebar-quantum-computing" class="mw-list-item"><a href="/wiki/Services_d%27informatique_quantique/en"><span>Quantum computing</span></a></li><li id="n-sidebar-available-software" class="mw-list-item"><a href="/wiki/Available_software"><span>Available software</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-alliance" class="mw-portlet mw-portlet-sidebar-alliance vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-alliance-label"  >
	<h3
		id="p-sidebar-alliance-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">The Alliance</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-alliance-main-page" class="mw-list-item"><a href="https://alliancecan.ca/en" rel="nofollow"><span>Alliance main page</span></a></li><li id="n-sidebar-ccdb" class="mw-list-item"><a href="https://ccdb.computecanada.ca/security/login" rel="nofollow"><span>CCDB</span></a></li><li id="n-sidebar-getting-an-account" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/apply-account" rel="nofollow"><span>Getting An Account</span></a></li><li id="n-sidebar-acknowledging-alliance" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/research-portal/acknowledging-alliance" rel="nofollow"><span>Acknowledging the Alliance</span></a></li><li id="n-sidebar-aup" class="mw-list-item"><a href="https://alliancecan.ca/en/services/advanced-research-computing/account-management/policies" rel="nofollow"><span>Acceptable Use Policy</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-sidebar-authoring" class="mw-portlet mw-portlet-sidebar-authoring vector-menu-portal portal vector-menu" aria-labelledby="p-sidebar-authoring-label"  >
	<h3
		id="p-sidebar-authoring-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Authoring</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-sidebar-guidelines" class="mw-list-item"><a href="/wiki/Authoring_guidelines"><span>Guidelines</span></a></li><li id="n-sidebar-mediawiki-help" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents"><span>MediaWiki Help</span></a></li><li id="n-recentchanges" class="mw-list-item"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li>
		</ul>
		
	</div>
</nav>

<nav id="p-tb" class="mw-portlet mw-portlet-tb vector-menu-portal portal vector-menu" aria-labelledby="p-tb-label"  >
	<h3
		id="p-tb-label"
		
		class="vector-menu-heading "
	>
		<span class="vector-menu-heading-label">Tools</span>
	</h3>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="t-whatlinkshere" class="mw-list-item"><a href="/wiki/Special:WhatLinksHere/Ansys/fr" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="/wiki/Special:RecentChangesLinked/Ansys/fr" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li><li id="t-specialpages" class="mw-list-item"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li><li id="t-permalink" class="mw-list-item"><a href="/mediawiki/index.php?title=Ansys/fr&amp;oldid=173818" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li><li id="t-info" class="mw-list-item"><a href="/mediawiki/index.php?title=Ansys/fr&amp;action=info" title="More information about this page"><span>Page information</span></a></li>
		</ul>
		
	</div>
</nav>

	
</div>

</div>

<footer id="footer" class="mw-footer" >
	<ul id="footer-info">
	<li id="footer-info-lastmod"> This page was last edited on 5 March 2025, at 22:25.</li>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="/wiki/CCWiki:Privacy_policy">Privacy policy</a></li>
	<li id="footer-places-about"><a href="/wiki/CCWiki:About">About Alliance Doc</a></li>
	<li id="footer-places-disclaimers"><a href="/wiki/CCWiki:General_disclaimer">Disclaimers</a></li>
	<li id="footer-places-mobileview"><a href="https://docs.alliancecan.ca/mediawiki/index.php?title=Ansys/fr&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="/mediawiki/resources/assets/poweredby_mediawiki.svg" alt="Powered by MediaWiki" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

<script>(RLQ=window.RLQ||[]).push(function(){mw.log.warn("This page is using the deprecated ResourceLoader module \"codex-search-styles\".\n[1.43] Use a CodexModule with codexComponents to set your specific components used: https://www.mediawiki.org/wiki/Codex#Using_a_limited_subset_of_components");});</script>
<script src="https://www.googletagmanager.com/gtag/js?id=G-TVBPRD78K4" async=""></script><script>
window.dataLayer = window.dataLayer || [];

function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TVBPRD78K4', {});
</script>

<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":2832,"wgPageParseReport":{"limitreport":{"cputime":"0.270","walltime":"2.701","ppvisitednodes":{"value":1531,"limit":1000000},"postexpandincludesize":{"value":43255,"limit":2097152},"templateargumentsize":{"value":61589,"limit":2097152},"expansiondepth":{"value":9,"limit":100},"expensivefunctioncount":{"value":24,"limit":100},"unstrip-depth":{"value":3,"limit":20},"unstrip-size":{"value":164826,"limit":5000000},"timingprofile":["100.00% 2366.016      1 -total"," 92.71% 2193.649     21 Template:File","  4.52%  107.021      1 Template:Commands2"]},"loops":{"limitreport-count-limited":{"value":0,"limit":100}},"cachereport":{"timestamp":"20250530235441","ttl":86400,"transientcontent":false}}});});</script>
</body>
</html>